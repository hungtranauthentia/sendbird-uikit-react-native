{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_uikitUtils","_Modal","_interopRequireDefault","_Text","_createStyleSheet","_useHeaderStyle","_useUIKitTheme","_DialogBox","_LoadingSpinner","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ActionMenu","_ref","visible","onHide","onError","onDismiss","title","menuItems","statusBarTranslucent","useHeaderStyle","colors","useUIKitTheme","pending","setPending","useState","_onHide","createElement","onClose","backgroundStyle","alignItems","justifyContent","View","style","styles","h1","color","ui","dialog","none","text","numberOfLines","maxWidth","size","highlight","width","marginLeft","buttonContainer","map","item","index","TouchableOpacity","activeOpacity","button","disabled","onPress","_item$onPress","e","errorHandler","Logger","error","subtitle2","destructive","createStyleSheet","flexDirection","paddingHorizontal","paddingVertical","marginTop","marginBottom","_default","exports"],"sources":["index.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { TouchableOpacity, View } from 'react-native';\n\nimport { Logger } from '@sendbird/uikit-utils';\n\nimport Modal from '../../components/Modal';\nimport Text from '../../components/Text';\nimport createStyleSheet from '../../styles/createStyleSheet';\nimport useHeaderStyle from '../../styles/useHeaderStyle';\nimport useUIKitTheme from '../../theme/useUIKitTheme';\nimport DialogBox from '../Dialog/DialogBox';\nimport LoadingSpinner from '../LoadingSpinner';\n\nexport type ActionMenuItem = {\n  title?: string;\n  menuItems: {\n    title: string;\n    style?: 'destructive';\n    onPress?: (() => Promise<void>) | (() => void);\n    onError?: () => void;\n  }[];\n};\n\ntype Props = {\n  visible: boolean;\n  onHide: () => void;\n  onError?: (error: unknown) => void;\n  onDismiss?: () => void;\n} & ActionMenuItem;\nconst ActionMenu = ({ visible, onHide, onError, onDismiss, title, menuItems }: Props) => {\n  const { statusBarTranslucent } = useHeaderStyle();\n  const { colors } = useUIKitTheme();\n  const [pending, setPending] = useState(false);\n  const _onHide = () => {\n    if (!pending) onHide();\n  };\n\n  return (\n    <Modal\n      onClose={_onHide}\n      onDismiss={onDismiss}\n      statusBarTranslucent={statusBarTranslucent}\n      visible={visible}\n      backgroundStyle={{ alignItems: 'center', justifyContent: 'center' }}\n    >\n      <DialogBox>\n        <View style={styles.title}>\n          <Text\n            h1\n            color={colors.ui.dialog.default.none.text}\n            numberOfLines={1}\n            // style={{ flex: 1 }}\n            style={{ maxWidth: pending ? '86%' : '100%' }}\n          >\n            {title}\n          </Text>\n          {pending && (\n            <LoadingSpinner\n              size={20}\n              color={colors.ui.dialog.default.none.highlight}\n              style={{ width: '10%', marginLeft: '4%' }}\n            />\n          )}\n        </View>\n        <View style={styles.buttonContainer}>\n          {menuItems.map((item, index) => {\n            return (\n              <TouchableOpacity\n                activeOpacity={0.75}\n                key={item.title + index}\n                style={styles.button}\n                disabled={pending}\n                onPress={async () => {\n                  setPending(true);\n                  try {\n                    await item.onPress?.();\n                  } catch (e: unknown) {\n                    const errorHandler = onError ?? item.onError;\n                    errorHandler?.(e);\n                    if (!errorHandler) Logger.error('ActionMenu onPress error', e);\n                  } finally {\n                    onHide();\n                    setPending(false);\n                  }\n                }}\n              >\n                <Text\n                  subtitle2\n                  color={\n                    item.style === 'destructive'\n                      ? colors.ui.dialog.default.none.destructive\n                      : colors.ui.dialog.default.none.text\n                  }\n                  numberOfLines={1}\n                >\n                  {item.title}\n                </Text>\n              </TouchableOpacity>\n            );\n          })}\n        </View>\n      </DialogBox>\n    </Modal>\n  );\n};\n\nconst styles = createStyleSheet({\n  title: {\n    flexDirection: 'row',\n    paddingHorizontal: 24,\n    paddingVertical: 20,\n    alignItems: 'center',\n  },\n  buttonContainer: {\n    marginTop: 4,\n    marginBottom: 8,\n  },\n  button: {\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n  },\n});\n\nexport default ActionMenu;\n"],"mappings":"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"}