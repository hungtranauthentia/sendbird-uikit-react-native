{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_uikitUtils","_Modal","_interopRequireDefault","_Text","_TextInput","_createStyleSheet","_useHeaderStyle","_useUIKitTheme","_Button","_DialogBox","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Prompt","_ref","onDismiss","visible","onHide","autoFocus","title","defaultValue","placeholder","onSubmit","NOOP","onCancel","submitLabel","cancelLabel","statusBarTranslucent","useHeaderStyle","colors","useUIKitTheme","inputRef","useRef","width","height","useWindowDimensions","buttons","text","onPress","setText","useState","useEffect","setTimeout","_inputRef$current","_inputRef$current2","Platform","OS","current","blur","focus","createElement","enableKeyboardAvoid","disableBackgroundClose","onClose","backgroundStyle","alignItems","justifyContent","style","styles","container","Boolean","View","titleContainer","h1","color","ui","dialog","none","numberOfLines","flex","inputContainer","ref","variant","value","onChangeText","paddingLeft","paddingRight","paddingTop","paddingBottom","buttonContainer","map","_ref2","index","button","contentColor","highlight","Keyboard","dismiss","createStyleSheet","marginBottom","paddingVertical","paddingHorizontal","flexDirection","padding","marginLeft","_default","exports"],"sources":["index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Keyboard, Platform, TextInput as RNTextInput, View, useWindowDimensions } from 'react-native';\n\nimport { NOOP } from '@sendbird/uikit-utils';\n\nimport Modal from '../../components/Modal';\nimport Text from '../../components/Text';\nimport TextInput from '../../components/TextInput';\nimport createStyleSheet from '../../styles/createStyleSheet';\nimport useHeaderStyle from '../../styles/useHeaderStyle';\nimport useUIKitTheme from '../../theme/useUIKitTheme';\nimport Button from '../Button';\nimport DialogBox from '../Dialog/DialogBox';\n\nexport type PromptItem = {\n  title: string;\n  placeholder?: string;\n  defaultValue?: string;\n  onSubmit?: (text: string) => void;\n  submitLabel?: string;\n  onCancel?: () => void;\n  cancelLabel?: string;\n};\n\ntype Props = {\n  visible: boolean;\n  onHide: () => void;\n  onDismiss?: () => void;\n  autoFocus?: boolean;\n} & PromptItem;\nconst Prompt = ({\n  onDismiss,\n  visible,\n  onHide,\n  autoFocus = true,\n  title,\n  defaultValue = '',\n  placeholder = 'Enter',\n  onSubmit = NOOP,\n  onCancel = NOOP,\n  submitLabel = 'Submit',\n  cancelLabel = 'Cancel',\n}: Props) => {\n  const { statusBarTranslucent } = useHeaderStyle();\n  const { colors } = useUIKitTheme();\n  const inputRef = useRef<RNTextInput>(null);\n  const { width, height } = useWindowDimensions();\n\n  const buttons = [\n    { text: cancelLabel, onPress: onCancel },\n    { text: submitLabel, onPress: () => onSubmit(text) },\n  ];\n\n  const [text, setText] = useState(defaultValue);\n\n  // FIXME: autoFocus trick with modal\n  // Android\n  // - InputProps.autoFocus is not trigger keyboard appearing.\n  // - InputRef.focus() is trigger keyboard appearing, but position of keyboard selection is always the start of text.\n  // iOS\n  // - InputProps.autoFocus is trigger weird UI behavior on landscape mode.\n  useEffect(() => {\n    if (autoFocus && visible) {\n      setTimeout(() => {\n        if (Platform.OS === 'android') inputRef.current?.blur();\n        inputRef.current?.focus();\n      }, 250);\n    }\n  }, [autoFocus, visible, `${width}-${height}`]);\n\n  return (\n    <Modal\n      enableKeyboardAvoid\n      disableBackgroundClose\n      onClose={onHide}\n      onDismiss={() => {\n        setText('');\n        onDismiss?.();\n      }}\n      statusBarTranslucent={statusBarTranslucent}\n      visible={visible}\n      backgroundStyle={{ alignItems: 'center', justifyContent: 'center' }}\n    >\n      <DialogBox style={styles.container}>\n        {Boolean(title) && (\n          <View style={styles.titleContainer}>\n            <Text h1 color={colors.ui.dialog.default.none.text} numberOfLines={1} style={{ flex: 1 }}>\n              {title}\n            </Text>\n          </View>\n        )}\n\n        <View style={styles.inputContainer}>\n          <TextInput\n            autoFocus={autoFocus && Platform.OS === 'android'}\n            ref={inputRef}\n            placeholder={placeholder}\n            variant={'underline'}\n            value={text}\n            onChangeText={setText}\n            style={{ paddingLeft: 0, paddingRight: 0, paddingTop: 10, paddingBottom: 10 }}\n          />\n        </View>\n\n        <View style={styles.buttonContainer}>\n          {buttons.map(({ text, onPress }, index) => {\n            return (\n              <Button\n                key={text + index}\n                variant={'text'}\n                style={styles.button}\n                contentColor={colors.ui.dialog.default.none.highlight}\n                onPress={() => {\n                  Keyboard.dismiss();\n                  try {\n                    onPress?.();\n                  } finally {\n                    onHide();\n                  }\n                }}\n              >\n                {text}\n              </Button>\n            );\n          })}\n        </View>\n      </DialogBox>\n    </Modal>\n  );\n};\n\nconst styles = createStyleSheet({\n  container: {\n    paddingTop: 8,\n  },\n  titleContainer: {\n    marginBottom: 12,\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  inputContainer: {\n    paddingHorizontal: 24,\n    marginBottom: 12,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: 12,\n  },\n  button: {\n    marginLeft: 8,\n  },\n});\n\nexport default Prompt;\n"],"mappings":"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"}