{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeSafeAreaContext","_Icon","_interopRequireDefault","_Text","_createStyleSheet","_useUIKitTheme","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ToastContext","createContext","useOpacity","opacity","useRef","Animated","Value","current","transition","value","timing","toValue","duration","useNativeDriver","start","show","hide","Toast","_ref","visible","type","children","top","bottom","colors","select","palette","useUIKitTheme","color","useMemo","dark","error300","light","error200","secondary300","secondary200","backgroundColor","useEffect","createElement","View","pointerEvents","style","styles","toast","icon","containerStyle","onBackgroundReverse01","body3","numberOfLines","text","VISIBLE_MS","ToastProvider","_ref2","dismissTimeout","state","setState","useState","useSafeAreaInsets","hideTimeout","setTimeout","prev","clearTimeout","Provider","arguments","length","undefined","KeyboardAvoidingView","behavior","Platform","OS","keyboardVerticalOffset","toastPosition","exports","useToast","context","useContext","Error","createStyleSheet","position","height","paddingHorizontal","justifyContent","alignItems","alignSelf","borderRadius","flexDirection","marginRight","maxWidth","_default"],"sources":["index.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { Animated, KeyboardAvoidingView, Platform } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport Icon from '../../components/Icon';\nimport Text from '../../components/Text';\nimport createStyleSheet from '../../styles/createStyleSheet';\nimport useUIKitTheme from '../../theme/useUIKitTheme';\n\ntype ToastType = 'normal' | 'error' | 'success';\ntype Context = { show(text: string, type?: ToastType): void };\n\nconst ToastContext = createContext<Context | null>(null);\n\ntype Props = React.PropsWithChildren<{\n  top?: number;\n  bottom?: number;\n  visible: boolean;\n  type: ToastType;\n  children: string;\n}>;\n\nconst useOpacity = () => {\n  const opacity = useRef(new Animated.Value(0)).current;\n  const transition = (value: number) => {\n    Animated.timing(opacity, { toValue: value, duration: 500, useNativeDriver: true }).start();\n  };\n\n  return {\n    opacity,\n    show: () => transition(1),\n    hide: () => transition(0),\n  };\n};\n\nconst Toast = ({ visible, type, children, top, bottom }: Props) => {\n  const { colors, select, palette } = useUIKitTheme();\n  const { opacity, show, hide } = useOpacity();\n\n  const color = useMemo(() => {\n    if (type === 'error') {\n      return select({ dark: palette.error300, light: palette.error200 });\n    }\n    if (type === 'success') {\n      return select({ dark: palette.secondary300, light: palette.secondary200 });\n    }\n    return 'transparent';\n  }, [type, select]);\n\n  const backgroundColor = useMemo(() => {\n    return select({ light: 'rgba(0,0,0,0.64)', dark: 'rgba(255,255,255,0.64)' });\n  }, [select]);\n\n  useEffect(() => {\n    visible ? show() : hide();\n  }, [visible]);\n\n  return (\n    <Animated.View pointerEvents={'none'} style={[styles.toast, { opacity, top, bottom, backgroundColor }]}>\n      {type !== 'normal' && (\n        <Icon icon={type === 'success' ? 'done' : 'error'} color={color} containerStyle={styles.icon} />\n      )}\n      <Text color={colors.onBackgroundReverse01} body3 numberOfLines={2} style={styles.text}>\n        {children}\n      </Text>\n    </Animated.View>\n  );\n};\n\nconst VISIBLE_MS = 3000;\nexport const ToastProvider = ({\n  children,\n  dismissTimeout = VISIBLE_MS,\n}: React.PropsWithChildren<{ dismissTimeout?: number }>) => {\n  const [state, setState] = useState({ visible: false, type: 'error' as ToastType, text: '' });\n  const { bottom } = useSafeAreaInsets();\n\n  useEffect(() => {\n    if (!state.visible) return;\n\n    const hideTimeout = setTimeout(() => {\n      setState((prev) => ({ ...prev, visible: false }));\n    }, dismissTimeout);\n    return () => clearTimeout(hideTimeout);\n  });\n\n  return (\n    <ToastContext.Provider value={{ show: (text, type = 'normal') => text && setState({ text, type, visible: true }) }}>\n      {children}\n      <KeyboardAvoidingView\n        behavior={Platform.OS === 'ios' ? 'position' : undefined}\n        keyboardVerticalOffset={-bottom}\n        pointerEvents={'none'}\n      >\n        <Toast type={state.type} visible={state.visible} bottom={bottom + styles.toastPosition.bottom}>\n          {state.text}\n        </Toast>\n      </KeyboardAvoidingView>\n    </ToastContext.Provider>\n  );\n};\n\nexport const useToast = () => {\n  const context = useContext(ToastContext);\n  if (!context) throw new Error('ToastContext is not provided, wrap your app with ToastProvider');\n  return context;\n};\n\nconst styles = createStyleSheet({\n  toast: {\n    position: 'absolute',\n    height: 48,\n    paddingHorizontal: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n    alignSelf: 'center',\n    borderRadius: 24,\n    flexDirection: 'row',\n  },\n  icon: {\n    marginRight: 4,\n  },\n  text: {\n    maxWidth: 240,\n    paddingHorizontal: 4,\n  },\n  toastPosition: {\n    bottom: 60,\n  },\n});\n\nexport default Toast;\n"],"mappings":"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"}