{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_FastImageInternal","obj","__esModule","default","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","convertCache","cache","convertSource","Array","isArray","uri","headers","convertDefaultSource","undefined","convertResizeMode","mode","Image_FastImage","_ref","defaultSource","resizeMode","onLoad","onError","style","tintColor","disableFastImage","props","createElement","Image","e","nativeEvent","_default","exports"],"sources":["Image.fastimage.tsx"],"sourcesContent":["import React from 'react';\nimport { Image } from 'react-native';\nimport type { FastImageProps, ResizeMode, Source } from 'react-native-fast-image';\n\nimport FastImageInternal from './FastImageInternal';\nimport type { SendbirdImageComponent, SendbirdImageProps } from './index';\n\nfunction convertCache(\n  cache?: 'default' | 'reload' | 'force-cache' | 'only-if-cached' | undefined,\n): 'immutable' | 'web' | 'cacheOnly' {\n  switch (cache) {\n    case 'force-cache':\n    case 'only-if-cached':\n      return 'cacheOnly';\n    default:\n      return 'immutable';\n  }\n}\n\nfunction convertSource(source: SendbirdImageProps['source']): Source | number {\n  if (Array.isArray(source)) {\n    return convertSource(source[0]);\n  }\n\n  if (typeof source === 'number') {\n    return source;\n  }\n\n  return {\n    uri: source.uri,\n    headers: source.headers,\n    cache: convertCache(source.cache), //'immutable' | 'web' | 'cacheOnly'\n  };\n}\nfunction convertDefaultSource(source?: SendbirdImageProps['defaultSource']): number | undefined {\n  if (typeof source === 'number') {\n    return source;\n  }\n\n  return undefined;\n}\n\nfunction convertResizeMode(mode?: SendbirdImageProps['resizeMode']): ResizeMode | undefined {\n  switch (mode) {\n    case 'center':\n      return 'center';\n    case 'contain':\n      return 'contain';\n    case 'cover':\n      return 'cover';\n    case 'stretch':\n      return 'stretch';\n    default:\n      return undefined;\n  }\n}\n\nconst Image_FastImage: SendbirdImageComponent = ({\n  source,\n  defaultSource,\n  resizeMode,\n  onLoad,\n  onError,\n  style,\n  tintColor,\n  disableFastImage = false,\n  ...props\n}) => {\n  if (disableFastImage) {\n    return (\n      <Image\n        {...props}\n        source={source}\n        style={[style, { tintColor }]}\n        onError={onError && ((e) => onError(e.nativeEvent))}\n        onLoad={onLoad && ((e) => onLoad(e.nativeEvent.source))}\n      />\n    );\n  }\n  return (\n    <FastImageInternal\n      {...props}\n      onLoad={onLoad && ((e) => onLoad(e.nativeEvent))}\n      onError={onError && (() => onError({}))}\n      style={style as FastImageProps['style']}\n      source={convertSource(source)}\n      defaultSource={convertDefaultSource(defaultSource)}\n      resizeMode={convertResizeMode(resizeMode)}\n    />\n  );\n};\n\nexport default Image_FastImage;\n"],"mappings":"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"}