{"version":3,"names":["React","useEffect","useRef","useState","Keyboard","Platform","View","useWindowDimensions","NOOP","Modal","Text","TextInput","createStyleSheet","useHeaderStyle","useUIKitTheme","Button","DialogBox","Prompt","_ref","onDismiss","visible","onHide","autoFocus","title","defaultValue","placeholder","onSubmit","onCancel","submitLabel","cancelLabel","statusBarTranslucent","colors","inputRef","width","height","buttons","text","onPress","setText","setTimeout","_inputRef$current","_inputRef$current2","OS","current","blur","focus","createElement","enableKeyboardAvoid","disableBackgroundClose","onClose","backgroundStyle","alignItems","justifyContent","style","styles","container","Boolean","titleContainer","h1","color","ui","dialog","default","none","numberOfLines","flex","inputContainer","ref","variant","value","onChangeText","paddingLeft","paddingRight","paddingTop","paddingBottom","buttonContainer","map","_ref2","index","key","button","contentColor","highlight","dismiss","marginBottom","paddingVertical","paddingHorizontal","flexDirection","padding","marginLeft"],"sources":["index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Keyboard, Platform, TextInput as RNTextInput, View, useWindowDimensions } from 'react-native';\n\nimport { NOOP } from '@sendbird/uikit-utils';\n\nimport Modal from '../../components/Modal';\nimport Text from '../../components/Text';\nimport TextInput from '../../components/TextInput';\nimport createStyleSheet from '../../styles/createStyleSheet';\nimport useHeaderStyle from '../../styles/useHeaderStyle';\nimport useUIKitTheme from '../../theme/useUIKitTheme';\nimport Button from '../Button';\nimport DialogBox from '../Dialog/DialogBox';\n\nexport type PromptItem = {\n  title: string;\n  placeholder?: string;\n  defaultValue?: string;\n  onSubmit?: (text: string) => void;\n  submitLabel?: string;\n  onCancel?: () => void;\n  cancelLabel?: string;\n};\n\ntype Props = {\n  visible: boolean;\n  onHide: () => void;\n  onDismiss?: () => void;\n  autoFocus?: boolean;\n} & PromptItem;\nconst Prompt = ({\n  onDismiss,\n  visible,\n  onHide,\n  autoFocus = true,\n  title,\n  defaultValue = '',\n  placeholder = 'Enter',\n  onSubmit = NOOP,\n  onCancel = NOOP,\n  submitLabel = 'Submit',\n  cancelLabel = 'Cancel',\n}: Props) => {\n  const { statusBarTranslucent } = useHeaderStyle();\n  const { colors } = useUIKitTheme();\n  const inputRef = useRef<RNTextInput>(null);\n  const { width, height } = useWindowDimensions();\n\n  const buttons = [\n    { text: cancelLabel, onPress: onCancel },\n    { text: submitLabel, onPress: () => onSubmit(text) },\n  ];\n\n  const [text, setText] = useState(defaultValue);\n\n  // FIXME: autoFocus trick with modal\n  // Android\n  // - InputProps.autoFocus is not trigger keyboard appearing.\n  // - InputRef.focus() is trigger keyboard appearing, but position of keyboard selection is always the start of text.\n  // iOS\n  // - InputProps.autoFocus is trigger weird UI behavior on landscape mode.\n  useEffect(() => {\n    if (autoFocus && visible) {\n      setTimeout(() => {\n        if (Platform.OS === 'android') inputRef.current?.blur();\n        inputRef.current?.focus();\n      }, 250);\n    }\n  }, [autoFocus, visible, `${width}-${height}`]);\n\n  return (\n    <Modal\n      enableKeyboardAvoid\n      disableBackgroundClose\n      onClose={onHide}\n      onDismiss={() => {\n        setText('');\n        onDismiss?.();\n      }}\n      statusBarTranslucent={statusBarTranslucent}\n      visible={visible}\n      backgroundStyle={{ alignItems: 'center', justifyContent: 'center' }}\n    >\n      <DialogBox style={styles.container}>\n        {Boolean(title) && (\n          <View style={styles.titleContainer}>\n            <Text h1 color={colors.ui.dialog.default.none.text} numberOfLines={1} style={{ flex: 1 }}>\n              {title}\n            </Text>\n          </View>\n        )}\n\n        <View style={styles.inputContainer}>\n          <TextInput\n            autoFocus={autoFocus && Platform.OS === 'android'}\n            ref={inputRef}\n            placeholder={placeholder}\n            variant={'underline'}\n            value={text}\n            onChangeText={setText}\n            style={{ paddingLeft: 0, paddingRight: 0, paddingTop: 10, paddingBottom: 10 }}\n          />\n        </View>\n\n        <View style={styles.buttonContainer}>\n          {buttons.map(({ text, onPress }, index) => {\n            return (\n              <Button\n                key={text + index}\n                variant={'text'}\n                style={styles.button}\n                contentColor={colors.ui.dialog.default.none.highlight}\n                onPress={() => {\n                  Keyboard.dismiss();\n                  try {\n                    onPress?.();\n                  } finally {\n                    onHide();\n                  }\n                }}\n              >\n                {text}\n              </Button>\n            );\n          })}\n        </View>\n      </DialogBox>\n    </Modal>\n  );\n};\n\nconst styles = createStyleSheet({\n  container: {\n    paddingTop: 8,\n  },\n  titleContainer: {\n    marginBottom: 12,\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  inputContainer: {\n    paddingHorizontal: 24,\n    marginBottom: 12,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: 12,\n  },\n  button: {\n    marginLeft: 8,\n  },\n});\n\nexport default Prompt;\n"],"mappings":"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"}