{"version":3,"names":["React","View","Text","useUIKitTheme","DEFAULT_MAX","DEFAULT_BORDER_WIDTH","DEFAULT_AVATAR_GAP","DEFAULT_AVATAR_SIZE","DEFAULT_REMAINS_MAX","AvatarStack","_ref","children","containerStyle","styles","maxAvatar","size","avatarGap","colors","palette","select","defaultStyles","borderWidth","borderColor","background","remainsTextColor","onBackground02","remainsBackgroundColor","light","background100","dark","background600","avatarStyles","childrenArray","Children","toArray","filter","it","isValidElement","remains","length","shouldRenderRemains","actualSize","actualGap","renderAvatars","slice","map","child","index","cloneElement","left","renderRemainsCount","createElement","style","width","height","borderRadius","alignItems","justifyContent","backgroundColor","color","fontSize","caption4","Math","min","calculateWidth","widthEach","avatarCountOffset","avatarCount","count","flexDirection"],"sources":["AvatarStack.tsx"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport { StyleProp, View, ViewStyle } from 'react-native';\n\nimport Text from '../../components/Text';\nimport useUIKitTheme from '../../theme/useUIKitTheme';\n\nconst DEFAULT_MAX = 3;\nconst DEFAULT_BORDER_WIDTH = 2;\nconst DEFAULT_AVATAR_GAP = -4;\nconst DEFAULT_AVATAR_SIZE = 26;\nconst DEFAULT_REMAINS_MAX = 99;\n\ntype Props = React.PropsWithChildren<{\n  size?: number;\n  containerStyle?: StyleProp<ViewStyle>;\n  maxAvatar?: number;\n  avatarGap?: number;\n  styles?: {\n    borderWidth?: number;\n    borderColor?: string;\n    remainsTextColor?: string;\n    remainsBackgroundColor?: string;\n  };\n}>;\n\nconst AvatarStack = ({\n  children,\n  containerStyle,\n  styles,\n  maxAvatar = DEFAULT_MAX,\n  size = DEFAULT_AVATAR_SIZE,\n  avatarGap = DEFAULT_AVATAR_GAP,\n}: Props) => {\n  const { colors, palette, select } = useUIKitTheme();\n  const defaultStyles = {\n    borderWidth: DEFAULT_BORDER_WIDTH,\n    borderColor: colors.background,\n    remainsTextColor: colors.onBackground02,\n    remainsBackgroundColor: select({ light: palette.background100, dark: palette.background600 }),\n  };\n  const avatarStyles = { ...defaultStyles, ...styles };\n\n  const childrenArray = React.Children.toArray(children).filter((it) => React.isValidElement(it));\n  const remains = childrenArray.length - maxAvatar;\n  const shouldRenderRemains = remains > 0;\n\n  const actualSize = size + avatarStyles.borderWidth * 2;\n  const actualGap = avatarGap - avatarStyles.borderWidth;\n\n  const renderAvatars = () => {\n    return childrenArray.slice(0, maxAvatar).map((child, index) =>\n      React.cloneElement(child as ReactElement, {\n        size: actualSize,\n        containerStyle: {\n          left: actualGap * index,\n          borderWidth: avatarStyles.borderWidth,\n          borderColor: avatarStyles.borderColor,\n        },\n      }),\n    );\n  };\n\n  const renderRemainsCount = () => {\n    if (!shouldRenderRemains) return null;\n    return (\n      <View\n        style={[\n          avatarStyles,\n          {\n            left: actualGap * maxAvatar,\n            width: actualSize,\n            height: actualSize,\n            borderRadius: actualSize / 2,\n            alignItems: 'center',\n            justifyContent: 'center',\n            backgroundColor: avatarStyles.remainsBackgroundColor,\n          },\n        ]}\n      >\n        <Text style={{ color: avatarStyles.remainsTextColor, fontSize: 8 }} caption4>\n          {`+${Math.min(remains, DEFAULT_REMAINS_MAX)}`}\n        </Text>\n      </View>\n    );\n  };\n\n  const calculateWidth = () => {\n    const widthEach = actualSize + actualGap;\n    const avatarCountOffset = shouldRenderRemains ? 1 : 0;\n    const avatarCount = shouldRenderRemains ? maxAvatar : childrenArray.length;\n    const count = avatarCount + avatarCountOffset;\n    return widthEach * count + avatarStyles.borderWidth;\n  };\n\n  return (\n    <View style={[containerStyle, { left: -avatarStyles.borderWidth, flexDirection: 'row', width: calculateWidth() }]}>\n      {renderAvatars()}\n      {renderRemainsCount()}\n    </View>\n  );\n};\n\nexport default AvatarStack;\n"],"mappings":"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"}