{"version":3,"names":["React","View","MAX","AvatarGroup","_ref","children","containerStyle","size","childAmount","Children","count","createElement","style","overflow","width","height","borderRadius","backgroundColor","renderAvatars","_React$Children$map","map","child","index","isValidElement","cloneElement","top","getTopPoint","left","getLeftPoint","getWidthPoint","getHeightPoint","innerLeft","getInnerLeft","innerTop","getInnerTop","position","square","slice","_","total","idx"],"sources":["AvatarGroup.tsx"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport { StyleProp, View, ViewStyle } from 'react-native';\n\nconst MAX = 4;\n\ntype Props = React.PropsWithChildren<{\n  size?: number;\n  containerStyle?: StyleProp<ViewStyle>;\n}>;\nconst AvatarGroup = ({ children, containerStyle, size = 56 }: Props) => {\n  const childAmount = React.Children.count(children);\n\n  if (childAmount === 0) {\n    return (\n      <View\n        style={[\n          containerStyle,\n          {\n            overflow: 'hidden',\n            width: size,\n            height: size,\n            borderRadius: size,\n            backgroundColor: 'rgba(120,120,120,0.2)',\n          },\n        ]}\n      />\n    );\n  }\n\n  const renderAvatars = () => {\n    return (\n      React.Children.map(children, (child, index) => {\n        if (index + 1 > MAX) return child;\n        if (!React.isValidElement(child)) return child;\n\n        if (childAmount === 1) return React.cloneElement(child as ReactElement, { size, containerStyle });\n\n        const top = getTopPoint(index, childAmount) * size;\n        const left = getLeftPoint(index) * size;\n        const width = getWidthPoint(index, childAmount) * size;\n        const height = getHeightPoint(index, childAmount) * size;\n        const innerLeft = -getInnerLeft(index, childAmount) * size;\n        const innerTop = -getInnerTop(childAmount) * size;\n\n        return (\n          <View style={{ overflow: 'hidden', position: 'absolute', top, left, width, height }}>\n            {React.cloneElement(child as ReactElement, {\n              size,\n              square: true,\n              containerStyle: { left: innerLeft, top: innerTop },\n            })}\n          </View>\n        );\n      })?.slice(0, 4) ?? []\n    );\n  };\n\n  return (\n    <View style={[containerStyle, { overflow: 'hidden', width: size, height: size, borderRadius: size }]}>\n      {renderAvatars()}\n    </View>\n  );\n};\n\nconst getHeightPoint = (_: number, total: number) => {\n  if (total === 2) return 1;\n  return 0.5;\n};\nconst getWidthPoint = (idx: number, total: number) => {\n  if (total === 3 && idx === 0) return 1;\n  return 0.5;\n};\nconst getTopPoint = (idx: number, total: number) => {\n  if (total === 2) return 0;\n  if (total === 3 && idx === 0) return -0.025;\n  if (total === 3 && idx !== 0) return 0.525;\n  if (idx === 0 || idx === 1) return -0.025;\n  return 0.525;\n};\nconst getLeftPoint = (idx: number) => {\n  if (idx === 0 || idx === 2) return -0.025;\n  return 0.525;\n};\nconst getInnerLeft = (idx: number, total: number) => {\n  if (total === 3 && idx === 0) return 0;\n  return 0.25;\n};\nconst getInnerTop = (total: number) => {\n  if (total === 2) return 0;\n  return 0.25;\n};\n\nexport default AvatarGroup;\n"],"mappings":"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"}