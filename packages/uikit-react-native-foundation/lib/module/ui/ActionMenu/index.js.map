{"version":3,"names":["React","useState","TouchableOpacity","View","Logger","Modal","Text","createStyleSheet","useHeaderStyle","useUIKitTheme","DialogBox","LoadingSpinner","ActionMenu","_ref","visible","onHide","onError","onDismiss","title","menuItems","statusBarTranslucent","colors","pending","setPending","_onHide","createElement","onClose","backgroundStyle","alignItems","justifyContent","style","styles","h1","color","ui","dialog","default","none","text","numberOfLines","maxWidth","size","highlight","width","marginLeft","buttonContainer","map","item","index","activeOpacity","key","button","disabled","onPress","_item$onPress","call","e","errorHandler","error","subtitle2","destructive","flexDirection","paddingHorizontal","paddingVertical","marginTop","marginBottom"],"sources":["index.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { TouchableOpacity, View } from 'react-native';\n\nimport { Logger } from '@sendbird/uikit-utils';\n\nimport Modal from '../../components/Modal';\nimport Text from '../../components/Text';\nimport createStyleSheet from '../../styles/createStyleSheet';\nimport useHeaderStyle from '../../styles/useHeaderStyle';\nimport useUIKitTheme from '../../theme/useUIKitTheme';\nimport DialogBox from '../Dialog/DialogBox';\nimport LoadingSpinner from '../LoadingSpinner';\n\nexport type ActionMenuItem = {\n  title?: string;\n  menuItems: {\n    title: string;\n    style?: 'destructive';\n    onPress?: (() => Promise<void>) | (() => void);\n    onError?: () => void;\n  }[];\n};\n\ntype Props = {\n  visible: boolean;\n  onHide: () => void;\n  onError?: (error: unknown) => void;\n  onDismiss?: () => void;\n} & ActionMenuItem;\nconst ActionMenu = ({ visible, onHide, onError, onDismiss, title, menuItems }: Props) => {\n  const { statusBarTranslucent } = useHeaderStyle();\n  const { colors } = useUIKitTheme();\n  const [pending, setPending] = useState(false);\n  const _onHide = () => {\n    if (!pending) onHide();\n  };\n\n  return (\n    <Modal\n      onClose={_onHide}\n      onDismiss={onDismiss}\n      statusBarTranslucent={statusBarTranslucent}\n      visible={visible}\n      backgroundStyle={{ alignItems: 'center', justifyContent: 'center' }}\n    >\n      <DialogBox>\n        <View style={styles.title}>\n          <Text\n            h1\n            color={colors.ui.dialog.default.none.text}\n            numberOfLines={1}\n            // style={{ flex: 1 }}\n            style={{ maxWidth: pending ? '86%' : '100%' }}\n          >\n            {title}\n          </Text>\n          {pending && (\n            <LoadingSpinner\n              size={20}\n              color={colors.ui.dialog.default.none.highlight}\n              style={{ width: '10%', marginLeft: '4%' }}\n            />\n          )}\n        </View>\n        <View style={styles.buttonContainer}>\n          {menuItems.map((item, index) => {\n            return (\n              <TouchableOpacity\n                activeOpacity={0.75}\n                key={item.title + index}\n                style={styles.button}\n                disabled={pending}\n                onPress={async () => {\n                  setPending(true);\n                  try {\n                    await item.onPress?.();\n                  } catch (e: unknown) {\n                    const errorHandler = onError ?? item.onError;\n                    errorHandler?.(e);\n                    if (!errorHandler) Logger.error('ActionMenu onPress error', e);\n                  } finally {\n                    onHide();\n                    setPending(false);\n                  }\n                }}\n              >\n                <Text\n                  subtitle2\n                  color={\n                    item.style === 'destructive'\n                      ? colors.ui.dialog.default.none.destructive\n                      : colors.ui.dialog.default.none.text\n                  }\n                  numberOfLines={1}\n                >\n                  {item.title}\n                </Text>\n              </TouchableOpacity>\n            );\n          })}\n        </View>\n      </DialogBox>\n    </Modal>\n  );\n};\n\nconst styles = createStyleSheet({\n  title: {\n    flexDirection: 'row',\n    paddingHorizontal: 24,\n    paddingVertical: 20,\n    alignItems: 'center',\n  },\n  buttonContainer: {\n    marginTop: 4,\n    marginBottom: 8,\n  },\n  button: {\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n  },\n});\n\nexport default ActionMenu;\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,gBAAgB,EAAEC,IAAI,QAAQ,cAAc;AAErD,SAASC,MAAM,QAAQ,uBAAuB;AAE9C,OAAOC,KAAK,MAAM,wBAAwB;AAC1C,OAAOC,IAAI,MAAM,uBAAuB;AACxC,OAAOC,gBAAgB,MAAM,+BAA+B;AAC5D,OAAOC,cAAc,MAAM,6BAA6B;AACxD,OAAOC,aAAa,MAAM,2BAA2B;AACrD,OAAOC,SAAS,MAAM,qBAAqB;AAC3C,OAAOC,cAAc,MAAM,mBAAmB;AAkB9C,MAAMC,UAAU,GAAGC,IAAA,IAAsE;EAAA,IAArE;IAAEC,OAAO;IAAEC,MAAM;IAAEC,OAAO;IAAEC,SAAS;IAAEC,KAAK;IAAEC;EAAiB,CAAC,GAAAN,IAAA;EAClF,MAAM;IAAEO;EAAqB,CAAC,GAAGZ,cAAc,EAAE;EACjD,MAAM;IAAEa;EAAO,CAAC,GAAGZ,aAAa,EAAE;EAClC,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAMuB,OAAO,GAAGA,CAAA,KAAM;IACpB,IAAI,CAACF,OAAO,EAAEP,MAAM,EAAE;EACxB,CAAC;EAED,oBACEf,KAAA,CAAAyB,aAAA,CAACpB,KAAK;IACJqB,OAAO,EAAEF,OAAQ;IACjBP,SAAS,EAAEA,SAAU;IACrBG,oBAAoB,EAAEA,oBAAqB;IAC3CN,OAAO,EAAEA,OAAQ;IACjBa,eAAe,EAAE;MAAEC,UAAU,EAAE,QAAQ;MAAEC,cAAc,EAAE;IAAS;EAAE,gBAEpE7B,KAAA,CAAAyB,aAAA,CAACf,SAAS,qBACRV,KAAA,CAAAyB,aAAA,CAACtB,IAAI;IAAC2B,KAAK,EAAEC,MAAM,CAACb;EAAM,gBACxBlB,KAAA,CAAAyB,aAAA,CAACnB,IAAI;IACH0B,EAAE;IACFC,KAAK,EAAEZ,MAAM,CAACa,EAAE,CAACC,MAAM,CAACC,OAAO,CAACC,IAAI,CAACC,IAAK;IAC1CC,aAAa,EAAE;IACf;IAAA;IACAT,KAAK,EAAE;MAAEU,QAAQ,EAAElB,OAAO,GAAG,KAAK,GAAG;IAAO;EAAE,GAE7CJ,KAAK,CACD,EACNI,OAAO,iBACNtB,KAAA,CAAAyB,aAAA,CAACd,cAAc;IACb8B,IAAI,EAAE,EAAG;IACTR,KAAK,EAAEZ,MAAM,CAACa,EAAE,CAACC,MAAM,CAACC,OAAO,CAACC,IAAI,CAACK,SAAU;IAC/CZ,KAAK,EAAE;MAAEa,KAAK,EAAE,KAAK;MAAEC,UAAU,EAAE;IAAK;EAAE,EAE7C,CACI,eACP5C,KAAA,CAAAyB,aAAA,CAACtB,IAAI;IAAC2B,KAAK,EAAEC,MAAM,CAACc;EAAgB,GACjC1B,SAAS,CAAC2B,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;IAC9B,oBACEhD,KAAA,CAAAyB,aAAA,CAACvB,gBAAgB;MACf+C,aAAa,EAAE,IAAK;MACpBC,GAAG,EAAEH,IAAI,CAAC7B,KAAK,GAAG8B,KAAM;MACxBlB,KAAK,EAAEC,MAAM,CAACoB,MAAO;MACrBC,QAAQ,EAAE9B,OAAQ;MAClB+B,OAAO,EAAE,MAAAA,CAAA,KAAY;QACnB9B,UAAU,CAAC,IAAI,CAAC;QAChB,IAAI;UAAA,IAAA+B,aAAA;UACF,QAAAA,aAAA,GAAMP,IAAI,CAACM,OAAO,cAAAC,aAAA,uBAAZA,aAAA,CAAAC,IAAA,CAAAR,IAAI,CAAY;QACxB,CAAC,CAAC,OAAOS,CAAU,EAAE;UACnB,MAAMC,YAAY,GAAGzC,OAAO,IAAI+B,IAAI,CAAC/B,OAAO;UAC5CyC,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAGD,CAAC,CAAC;UACjB,IAAI,CAACC,YAAY,EAAErD,MAAM,CAACsD,KAAK,CAAC,0BAA0B,EAAEF,CAAC,CAAC;QAChE,CAAC,SAAS;UACRzC,MAAM,EAAE;UACRQ,UAAU,CAAC,KAAK,CAAC;QACnB;MACF;IAAE,gBAEFvB,KAAA,CAAAyB,aAAA,CAACnB,IAAI;MACHqD,SAAS;MACT1B,KAAK,EACHc,IAAI,CAACjB,KAAK,KAAK,aAAa,GACxBT,MAAM,CAACa,EAAE,CAACC,MAAM,CAACC,OAAO,CAACC,IAAI,CAACuB,WAAW,GACzCvC,MAAM,CAACa,EAAE,CAACC,MAAM,CAACC,OAAO,CAACC,IAAI,CAACC,IACnC;MACDC,aAAa,EAAE;IAAE,GAEhBQ,IAAI,CAAC7B,KAAK,CACN,CACU;EAEvB,CAAC,CAAC,CACG,CACG,CACN;AAEZ,CAAC;AAED,MAAMa,MAAM,GAAGxB,gBAAgB,CAAC;EAC9BW,KAAK,EAAE;IACL2C,aAAa,EAAE,KAAK;IACpBC,iBAAiB,EAAE,EAAE;IACrBC,eAAe,EAAE,EAAE;IACnBnC,UAAU,EAAE;EACd,CAAC;EACDiB,eAAe,EAAE;IACfmB,SAAS,EAAE,CAAC;IACZC,YAAY,EAAE;EAChB,CAAC;EACDd,MAAM,EAAE;IACNW,iBAAiB,EAAE,EAAE;IACrBC,eAAe,EAAE;EACnB;AACF,CAAC,CAAC;AAEF,eAAenD,UAAU"}