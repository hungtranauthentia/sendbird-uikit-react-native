{"version":3,"names":["React","createContext","useContext","useEffect","useMemo","useRef","useState","Animated","KeyboardAvoidingView","Platform","useSafeAreaInsets","Icon","Text","createStyleSheet","useUIKitTheme","ToastContext","useOpacity","opacity","Value","current","transition","value","timing","toValue","duration","useNativeDriver","start","show","hide","Toast","_ref","visible","type","children","top","bottom","colors","select","palette","color","dark","error300","light","error200","secondary300","secondary200","backgroundColor","createElement","View","pointerEvents","style","styles","toast","icon","containerStyle","onBackgroundReverse01","body3","numberOfLines","text","VISIBLE_MS","ToastProvider","_ref2","dismissTimeout","state","setState","hideTimeout","setTimeout","prev","clearTimeout","Provider","arguments","length","undefined","behavior","OS","keyboardVerticalOffset","toastPosition","useToast","context","Error","position","height","paddingHorizontal","justifyContent","alignItems","alignSelf","borderRadius","flexDirection","marginRight","maxWidth"],"sources":["index.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { Animated, KeyboardAvoidingView, Platform } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport Icon from '../../components/Icon';\nimport Text from '../../components/Text';\nimport createStyleSheet from '../../styles/createStyleSheet';\nimport useUIKitTheme from '../../theme/useUIKitTheme';\n\ntype ToastType = 'normal' | 'error' | 'success';\ntype Context = { show(text: string, type?: ToastType): void };\n\nconst ToastContext = createContext<Context | null>(null);\n\ntype Props = React.PropsWithChildren<{\n  top?: number;\n  bottom?: number;\n  visible: boolean;\n  type: ToastType;\n  children: string;\n}>;\n\nconst useOpacity = () => {\n  const opacity = useRef(new Animated.Value(0)).current;\n  const transition = (value: number) => {\n    Animated.timing(opacity, { toValue: value, duration: 500, useNativeDriver: true }).start();\n  };\n\n  return {\n    opacity,\n    show: () => transition(1),\n    hide: () => transition(0),\n  };\n};\n\nconst Toast = ({ visible, type, children, top, bottom }: Props) => {\n  const { colors, select, palette } = useUIKitTheme();\n  const { opacity, show, hide } = useOpacity();\n\n  const color = useMemo(() => {\n    if (type === 'error') {\n      return select({ dark: palette.error300, light: palette.error200 });\n    }\n    if (type === 'success') {\n      return select({ dark: palette.secondary300, light: palette.secondary200 });\n    }\n    return 'transparent';\n  }, [type, select]);\n\n  const backgroundColor = useMemo(() => {\n    return select({ light: 'rgba(0,0,0,0.64)', dark: 'rgba(255,255,255,0.64)' });\n  }, [select]);\n\n  useEffect(() => {\n    visible ? show() : hide();\n  }, [visible]);\n\n  return (\n    <Animated.View pointerEvents={'none'} style={[styles.toast, { opacity, top, bottom, backgroundColor }]}>\n      {type !== 'normal' && (\n        <Icon icon={type === 'success' ? 'done' : 'error'} color={color} containerStyle={styles.icon} />\n      )}\n      <Text color={colors.onBackgroundReverse01} body3 numberOfLines={2} style={styles.text}>\n        {children}\n      </Text>\n    </Animated.View>\n  );\n};\n\nconst VISIBLE_MS = 3000;\nexport const ToastProvider = ({\n  children,\n  dismissTimeout = VISIBLE_MS,\n}: React.PropsWithChildren<{ dismissTimeout?: number }>) => {\n  const [state, setState] = useState({ visible: false, type: 'error' as ToastType, text: '' });\n  const { bottom } = useSafeAreaInsets();\n\n  useEffect(() => {\n    if (!state.visible) return;\n\n    const hideTimeout = setTimeout(() => {\n      setState((prev) => ({ ...prev, visible: false }));\n    }, dismissTimeout);\n    return () => clearTimeout(hideTimeout);\n  });\n\n  return (\n    <ToastContext.Provider value={{ show: (text, type = 'normal') => text && setState({ text, type, visible: true }) }}>\n      {children}\n      <KeyboardAvoidingView\n        behavior={Platform.OS === 'ios' ? 'position' : undefined}\n        keyboardVerticalOffset={-bottom}\n        pointerEvents={'none'}\n      >\n        <Toast type={state.type} visible={state.visible} bottom={bottom + styles.toastPosition.bottom}>\n          {state.text}\n        </Toast>\n      </KeyboardAvoidingView>\n    </ToastContext.Provider>\n  );\n};\n\nexport const useToast = () => {\n  const context = useContext(ToastContext);\n  if (!context) throw new Error('ToastContext is not provided, wrap your app with ToastProvider');\n  return context;\n};\n\nconst styles = createStyleSheet({\n  toast: {\n    position: 'absolute',\n    height: 48,\n    paddingHorizontal: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n    alignSelf: 'center',\n    borderRadius: 24,\n    flexDirection: 'row',\n  },\n  icon: {\n    marginRight: 4,\n  },\n  text: {\n    maxWidth: 240,\n    paddingHorizontal: 4,\n  },\n  toastPosition: {\n    bottom: 60,\n  },\n});\n\nexport default Toast;\n"],"mappings":"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"}