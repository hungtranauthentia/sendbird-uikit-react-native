{"version":3,"names":["_react","require","_groupChannel","_uikitUtils","_useUserEventHandler","useTotalUnreadMessageCount","sdk","options","_options$params","_options$params2","handlerId","useUniqHandlerId","unreadMessageCount","setUnreadMessageCount","useState","useAsyncEffect","unreadCount","groupChannel","getTotalUnreadMessageCount","superChannelFilter","SuperChannelFilter","ALL","params","channelCustomTypesFilter","useUserEventHandler","onTotalUnreadMessageCountUpdated","totalCount","truncatedCount","maxCount","exports"],"sources":["useTotalUnreadMessageCount.ts"],"sourcesContent":["import { useState } from 'react';\n\nimport { SuperChannelFilter, TotalUnreadMessageCountParams } from '@sendbird/chat/groupChannel';\nimport type { SendbirdChatSDK } from '@sendbird/uikit-utils';\nimport { truncatedCount, useAsyncEffect, useUniqHandlerId } from '@sendbird/uikit-utils';\n\nimport { useUserEventHandler } from '../handler/useUserEventHandler';\n\ntype Options = {\n  params?: TotalUnreadMessageCountParams;\n  maxCount?: number;\n};\n\nexport const useTotalUnreadMessageCount = (sdk: SendbirdChatSDK, options?: Options) => {\n  const handlerId = useUniqHandlerId('useTotalUnreadMessageCount');\n  const [unreadMessageCount, setUnreadMessageCount] = useState(0);\n\n  useAsyncEffect(async () => {\n    const unreadCount = await sdk.groupChannel.getTotalUnreadMessageCount({\n      superChannelFilter: SuperChannelFilter.ALL,\n      ...options?.params,\n    });\n    setUnreadMessageCount(unreadCount);\n  }, [sdk, options?.params?.superChannelFilter, options?.params?.channelCustomTypesFilter]);\n\n  useUserEventHandler(sdk, handlerId, {\n    onTotalUnreadMessageCountUpdated: (totalCount: number) => setUnreadMessageCount(totalCount),\n  });\n\n  return truncatedCount(unreadMessageCount, options?.maxCount);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,aAAA,GAAAD,OAAA;AAEA,IAAAE,WAAA,GAAAF,OAAA;AAEA,IAAAG,oBAAA,GAAAH,OAAA;AAOO,MAAMI,0BAA0B,GAAGA,CAACC,GAAoB,EAAEC,OAAiB,KAAK;EAAA,IAAAC,eAAA,EAAAC,gBAAA;EACrF,MAAMC,SAAS,GAAG,IAAAC,4BAAgB,EAAC,4BAA4B,CAAC;EAChE,MAAM,CAACC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG,IAAAC,eAAQ,EAAC,CAAC,CAAC;EAE/D,IAAAC,0BAAc,EAAC,YAAY;IACzB,MAAMC,WAAW,GAAG,MAAMV,GAAG,CAACW,YAAY,CAACC,0BAA0B,CAAC;MACpEC,kBAAkB,EAAEC,gCAAkB,CAACC,GAAG;MAC1C,IAAGd,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEe,MAAM;IACpB,CAAC,CAAC;IACFT,qBAAqB,CAACG,WAAW,CAAC;EACpC,CAAC,EAAE,CAACV,GAAG,EAAEC,OAAO,aAAPA,OAAO,wBAAAC,eAAA,GAAPD,OAAO,CAAEe,MAAM,cAAAd,eAAA,uBAAfA,eAAA,CAAiBW,kBAAkB,EAAEZ,OAAO,aAAPA,OAAO,wBAAAE,gBAAA,GAAPF,OAAO,CAAEe,MAAM,cAAAb,gBAAA,uBAAfA,gBAAA,CAAiBc,wBAAwB,CAAC,CAAC;EAEzF,IAAAC,wCAAmB,EAAClB,GAAG,EAAEI,SAAS,EAAE;IAClCe,gCAAgC,EAAGC,UAAkB,IAAKb,qBAAqB,CAACa,UAAU;EAC5F,CAAC,CAAC;EAEF,OAAO,IAAAC,0BAAc,EAACf,kBAAkB,EAAEL,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEqB,QAAQ,CAAC;AAC9D,CAAC;AAACC,OAAA,CAAAxB,0BAAA,GAAAA,0BAAA"}