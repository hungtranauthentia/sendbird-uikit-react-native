{"version":3,"names":["_react","require","_chat","_uikitUtils","useConnectionHandler","sdk","handlerId","hookHandler","handlerRef","useRef","useLayoutEffect","current","useEffect","Logger","info","handler","ConnectionHandler","handlerKeys","Object","keys","forEach","key","_handlerRef$current$k","_handlerRef$current","_len","arguments","length","args","Array","_key","call","addConnectionHandler","removeConnectionHandler","exports"],"sources":["useConnectionHandler.ts"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef } from 'react';\n\nimport { ConnectionHandler } from '@sendbird/chat';\nimport { Logger, SendbirdChatSDK } from '@sendbird/uikit-utils';\n\nexport const useConnectionHandler = (\n  sdk: SendbirdChatSDK,\n  handlerId: string,\n  hookHandler: Partial<ConnectionHandler>,\n) => {\n  const handlerRef = useRef<Partial<ConnectionHandler>>();\n  useLayoutEffect(() => {\n    handlerRef.current = hookHandler;\n  });\n\n  useEffect(() => {\n    Logger.info('[useConnectionHandler]', handlerId);\n\n    const handler = new ConnectionHandler();\n    const handlerKeys = Object.keys(handler) as (keyof typeof handler)[];\n    handlerKeys.forEach((key) => {\n      handler[key] = (...args: unknown[]) => {\n        // @ts-ignore\n        handlerRef.current[key]?.(...args);\n      };\n    });\n\n    sdk.addConnectionHandler(handlerId, handler);\n    return () => sdk.removeConnectionHandler(handlerId);\n  }, [sdk, handlerId]);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,WAAA,GAAAF,OAAA;AAEO,MAAMG,oBAAoB,GAAGA,CAClCC,GAAoB,EACpBC,SAAiB,EACjBC,WAAuC,KACpC;EACH,MAAMC,UAAU,GAAG,IAAAC,aAAM,GAA8B;EACvD,IAAAC,sBAAe,EAAC,MAAM;IACpBF,UAAU,CAACG,OAAO,GAAGJ,WAAW;EAClC,CAAC,CAAC;EAEF,IAAAK,gBAAS,EAAC,MAAM;IACdC,kBAAM,CAACC,IAAI,CAAC,wBAAwB,EAAER,SAAS,CAAC;IAEhD,MAAMS,OAAO,GAAG,IAAIC,uBAAiB,EAAE;IACvC,MAAMC,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACJ,OAAO,CAA6B;IACpEE,WAAW,CAACG,OAAO,CAAEC,GAAG,IAAK;MAC3BN,OAAO,CAACM,GAAG,CAAC,GAAG,YAAwB;QAAA,IAAAC,qBAAA,EAAAC,mBAAA;QAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAApBC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;UAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;QAAA;QACrB;QACA,CAAAP,qBAAA,IAAAC,mBAAA,GAAAf,UAAU,CAACG,OAAO,EAACU,GAAG,CAAC,cAAAC,qBAAA,uBAAvBA,qBAAA,CAAAQ,IAAA,CAAAP,mBAAA,EAA0B,GAAGI,IAAI,CAAC;MACpC,CAAC;IACH,CAAC,CAAC;IAEFtB,GAAG,CAAC0B,oBAAoB,CAACzB,SAAS,EAAES,OAAO,CAAC;IAC5C,OAAO,MAAMV,GAAG,CAAC2B,uBAAuB,CAAC1B,SAAS,CAAC;EACrD,CAAC,EAAE,CAACD,GAAG,EAAEC,SAAS,CAAC,CAAC;AACtB,CAAC;AAAC2B,OAAA,CAAA7B,oBAAA,GAAAA,oBAAA"}