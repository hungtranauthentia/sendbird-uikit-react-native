{"version":3,"names":["_react","require","_chat","_uikitUtils","useUserEventHandler","sdk","handlerId","hookHandler","handlerRef","useRef","useLayoutEffect","current","useEffect","Logger","debug","handler","UserEventHandler","handlerKeys","Object","keys","forEach","key","_handlerRef$current$k","_handlerRef$current","_len","arguments","length","args","Array","_key","call","addUserEventHandler","removeUserEventHandler","exports"],"sources":["useUserEventHandler.ts"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef } from 'react';\n\nimport { UserEventHandler } from '@sendbird/chat';\nimport type { SendbirdChatSDK } from '@sendbird/uikit-utils';\nimport { Logger } from '@sendbird/uikit-utils';\n\nexport const useUserEventHandler = (\n  sdk: SendbirdChatSDK,\n  handlerId: string,\n  hookHandler: Partial<UserEventHandler>,\n) => {\n  const handlerRef = useRef(hookHandler);\n  useLayoutEffect(() => {\n    handlerRef.current = hookHandler;\n  });\n\n  useEffect(() => {\n    Logger.debug('[useUserEventHandler] hook called by', handlerId);\n\n    const handler = new UserEventHandler();\n    const handlerKeys = Object.keys(handler) as (keyof typeof handler)[];\n\n    handlerKeys.forEach((key) => {\n      handler[key] = (...args: unknown[]) => {\n        // @ts-ignore\n        handlerRef.current[key]?.(...args);\n      };\n    });\n\n    sdk.addUserEventHandler(handlerId, handler);\n    return () => sdk.removeUserEventHandler(handlerId);\n  }, [sdk, handlerId]);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,KAAA,GAAAD,OAAA;AAEA,IAAAE,WAAA,GAAAF,OAAA;AAEO,MAAMG,mBAAmB,GAAGA,CACjCC,GAAoB,EACpBC,SAAiB,EACjBC,WAAsC,KACnC;EACH,MAAMC,UAAU,GAAG,IAAAC,aAAM,EAACF,WAAW,CAAC;EACtC,IAAAG,sBAAe,EAAC,MAAM;IACpBF,UAAU,CAACG,OAAO,GAAGJ,WAAW;EAClC,CAAC,CAAC;EAEF,IAAAK,gBAAS,EAAC,MAAM;IACdC,kBAAM,CAACC,KAAK,CAAC,sCAAsC,EAAER,SAAS,CAAC;IAE/D,MAAMS,OAAO,GAAG,IAAIC,sBAAgB,EAAE;IACtC,MAAMC,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACJ,OAAO,CAA6B;IAEpEE,WAAW,CAACG,OAAO,CAAEC,GAAG,IAAK;MAC3BN,OAAO,CAACM,GAAG,CAAC,GAAG,YAAwB;QAAA,IAAAC,qBAAA,EAAAC,mBAAA;QAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAApBC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;UAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;QAAA;QACrB;QACA,CAAAP,qBAAA,IAAAC,mBAAA,GAAAf,UAAU,CAACG,OAAO,EAACU,GAAG,CAAC,cAAAC,qBAAA,uBAAvBA,qBAAA,CAAAQ,IAAA,CAAAP,mBAAA,EAA0B,GAAGI,IAAI,CAAC;MACpC,CAAC;IACH,CAAC,CAAC;IAEFtB,GAAG,CAAC0B,mBAAmB,CAACzB,SAAS,EAAES,OAAO,CAAC;IAC3C,OAAO,MAAMV,GAAG,CAAC2B,sBAAsB,CAAC1B,SAAS,CAAC;EACpD,CAAC,EAAE,CAACD,GAAG,EAAEC,SAAS,CAAC,CAAC;AACtB,CAAC;AAAC2B,OAAA,CAAA7B,mBAAA,GAAAA,mBAAA"}