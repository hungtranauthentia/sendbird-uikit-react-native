{"version":3,"names":["useEffect","useLayoutEffect","useRef","UserEventHandler","Logger","useUserEventHandler","sdk","handlerId","hookHandler","handlerRef","current","debug","handler","handlerKeys","Object","keys","forEach","key","_handlerRef$current$k","_handlerRef$current","_len","arguments","length","args","Array","_key","call","addUserEventHandler","removeUserEventHandler"],"sources":["useUserEventHandler.ts"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef } from 'react';\n\nimport { UserEventHandler } from '@sendbird/chat';\nimport type { SendbirdChatSDK } from '@sendbird/uikit-utils';\nimport { Logger } from '@sendbird/uikit-utils';\n\nexport const useUserEventHandler = (\n  sdk: SendbirdChatSDK,\n  handlerId: string,\n  hookHandler: Partial<UserEventHandler>,\n) => {\n  const handlerRef = useRef(hookHandler);\n  useLayoutEffect(() => {\n    handlerRef.current = hookHandler;\n  });\n\n  useEffect(() => {\n    Logger.debug('[useUserEventHandler] hook called by', handlerId);\n\n    const handler = new UserEventHandler();\n    const handlerKeys = Object.keys(handler) as (keyof typeof handler)[];\n\n    handlerKeys.forEach((key) => {\n      handler[key] = (...args: unknown[]) => {\n        // @ts-ignore\n        handlerRef.current[key]?.(...args);\n      };\n    });\n\n    sdk.addUserEventHandler(handlerId, handler);\n    return () => sdk.removeUserEventHandler(handlerId);\n  }, [sdk, handlerId]);\n};\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,eAAe,EAAEC,MAAM,QAAQ,OAAO;AAE1D,SAASC,gBAAgB,QAAQ,gBAAgB;AAEjD,SAASC,MAAM,QAAQ,uBAAuB;AAE9C,OAAO,MAAMC,mBAAmB,GAAGA,CACjCC,GAAoB,EACpBC,SAAiB,EACjBC,WAAsC,KACnC;EACH,MAAMC,UAAU,GAAGP,MAAM,CAACM,WAAW,CAAC;EACtCP,eAAe,CAAC,MAAM;IACpBQ,UAAU,CAACC,OAAO,GAAGF,WAAW;EAClC,CAAC,CAAC;EAEFR,SAAS,CAAC,MAAM;IACdI,MAAM,CAACO,KAAK,CAAC,sCAAsC,EAAEJ,SAAS,CAAC;IAE/D,MAAMK,OAAO,GAAG,IAAIT,gBAAgB,EAAE;IACtC,MAAMU,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACH,OAAO,CAA6B;IAEpEC,WAAW,CAACG,OAAO,CAAEC,GAAG,IAAK;MAC3BL,OAAO,CAACK,GAAG,CAAC,GAAG,YAAwB;QAAA,IAAAC,qBAAA,EAAAC,mBAAA;QAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAApBC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;UAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;QAAA;QACrB;QACA,CAAAP,qBAAA,IAAAC,mBAAA,GAAAV,UAAU,CAACC,OAAO,EAACO,GAAG,CAAC,cAAAC,qBAAA,uBAAvBA,qBAAA,CAAAQ,IAAA,CAAAP,mBAAA,EAA0B,GAAGI,IAAI,CAAC;MACpC,CAAC;IACH,CAAC,CAAC;IAEFjB,GAAG,CAACqB,mBAAmB,CAACpB,SAAS,EAAEK,OAAO,CAAC;IAC3C,OAAO,MAAMN,GAAG,CAACsB,sBAAsB,CAACrB,SAAS,CAAC;EACpD,CAAC,EAAE,CAACD,GAAG,EAAEC,SAAS,CAAC,CAAC;AACtB,CAAC"}