{"version":3,"names":["useEffect","useLayoutEffect","useRef","ConnectionHandler","Logger","useConnectionHandler","sdk","handlerId","hookHandler","handlerRef","current","info","handler","handlerKeys","Object","keys","forEach","key","_handlerRef$current$k","_handlerRef$current","_len","arguments","length","args","Array","_key","call","addConnectionHandler","removeConnectionHandler"],"sources":["useConnectionHandler.ts"],"sourcesContent":["import { useEffect, useLayoutEffect, useRef } from 'react';\n\nimport { ConnectionHandler } from '@sendbird/chat';\nimport { Logger, SendbirdChatSDK } from '@sendbird/uikit-utils';\n\nexport const useConnectionHandler = (\n  sdk: SendbirdChatSDK,\n  handlerId: string,\n  hookHandler: Partial<ConnectionHandler>,\n) => {\n  const handlerRef = useRef<Partial<ConnectionHandler>>();\n  useLayoutEffect(() => {\n    handlerRef.current = hookHandler;\n  });\n\n  useEffect(() => {\n    Logger.info('[useConnectionHandler]', handlerId);\n\n    const handler = new ConnectionHandler();\n    const handlerKeys = Object.keys(handler) as (keyof typeof handler)[];\n    handlerKeys.forEach((key) => {\n      handler[key] = (...args: unknown[]) => {\n        // @ts-ignore\n        handlerRef.current[key]?.(...args);\n      };\n    });\n\n    sdk.addConnectionHandler(handlerId, handler);\n    return () => sdk.removeConnectionHandler(handlerId);\n  }, [sdk, handlerId]);\n};\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,eAAe,EAAEC,MAAM,QAAQ,OAAO;AAE1D,SAASC,iBAAiB,QAAQ,gBAAgB;AAClD,SAASC,MAAM,QAAyB,uBAAuB;AAE/D,OAAO,MAAMC,oBAAoB,GAAGA,CAClCC,GAAoB,EACpBC,SAAiB,EACjBC,WAAuC,KACpC;EACH,MAAMC,UAAU,GAAGP,MAAM,EAA8B;EACvDD,eAAe,CAAC,MAAM;IACpBQ,UAAU,CAACC,OAAO,GAAGF,WAAW;EAClC,CAAC,CAAC;EAEFR,SAAS,CAAC,MAAM;IACdI,MAAM,CAACO,IAAI,CAAC,wBAAwB,EAAEJ,SAAS,CAAC;IAEhD,MAAMK,OAAO,GAAG,IAAIT,iBAAiB,EAAE;IACvC,MAAMU,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACH,OAAO,CAA6B;IACpEC,WAAW,CAACG,OAAO,CAAEC,GAAG,IAAK;MAC3BL,OAAO,CAACK,GAAG,CAAC,GAAG,YAAwB;QAAA,IAAAC,qBAAA,EAAAC,mBAAA;QAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAApBC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;UAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;QAAA;QACrB;QACA,CAAAP,qBAAA,IAAAC,mBAAA,GAAAV,UAAU,CAACC,OAAO,EAACO,GAAG,CAAC,cAAAC,qBAAA,uBAAvBA,qBAAA,CAAAQ,IAAA,CAAAP,mBAAA,EAA0B,GAAGI,IAAI,CAAC;MACpC,CAAC;IACH,CAAC,CAAC;IAEFjB,GAAG,CAACqB,oBAAoB,CAACpB,SAAS,EAAEK,OAAO,CAAC;IAC5C,OAAO,MAAMN,GAAG,CAACsB,uBAAuB,CAACrB,SAAS,CAAC;EACrD,CAAC,EAAE,CAACD,GAAG,EAAEC,SAAS,CAAC,CAAC;AACtB,CAAC"}