{"version":3,"names":["_chat","require","_createMockChannel","_createMockMessage","_createMockUser","dataListFactory","type","arguments","length","undefined","dataLength","sdk","Array","fill","map","createMockMessage","createMockChannel","channelType","ChannelType","OPEN","GROUP","createMockUser","createMockQuery","params","context","data","limit","cursor","loading","isLoading","hasNext","startIdx","endIdx","next","jest","fn","slice","exports"],"sources":["createMockQuery.ts"],"sourcesContent":["// @ts-nocheck\nimport { ChannelType } from '@sendbird/chat';\n\nimport type { GetMockParams } from '../types';\nimport { createMockChannel } from './createMockChannel';\nimport { createMockMessage } from './createMockMessage';\nimport type { MockSendbirdChatSDK } from './createMockSendbirdSDK';\nimport { createMockUser } from './createMockUser';\n\ntype QueryType = 'message' | 'user' | 'openChannel' | 'groupChannel';\ntype Params = GetMockParams<{ type: QueryType; dataLength?: number; limit?: number }>;\n\nconst dataListFactory = (type: QueryType = 'message', dataLength = 100, sdk?: MockSendbirdChatSDK) => {\n  return Array(dataLength)\n    .fill(0)\n    .map(() => {\n      switch (type) {\n        case 'message':\n          return createMockMessage({ sdk });\n        case 'openChannel':\n          return createMockChannel({ sdk, channelType: ChannelType.OPEN });\n        case 'groupChannel':\n          return createMockChannel({ sdk, channelType: ChannelType.GROUP });\n        case 'user':\n          return createMockUser({ sdk });\n      }\n    });\n};\n\nexport const createMockQuery = <T>(params: Params) => {\n  const context = {\n    data: dataListFactory(params.type, params.dataLength, params.sdk) as T[],\n    limit: params.limit || 10,\n    cursor: 0,\n    loading: false,\n  };\n\n  return {\n    get context() {\n      return context;\n    },\n    get limit() {\n      return context.limit;\n    },\n    get isLoading() {\n      return context.loading;\n    },\n    get hasNext() {\n      const startIdx = context.cursor * context.limit;\n      const endIdx = startIdx + context.limit;\n\n      return endIdx < context.data.length;\n    },\n    next: jest.fn(async () => {\n      context.loading = true;\n\n      const startIdx = context.cursor * context.limit;\n      const endIdx = startIdx + context.limit;\n\n      context.cursor += 1;\n      context.loading = false;\n\n      return context.data.slice(startIdx, endIdx);\n    }),\n  };\n};\n"],"mappings":";;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AAGA,IAAAC,kBAAA,GAAAD,OAAA;AACA,IAAAE,kBAAA,GAAAF,OAAA;AAEA,IAAAG,eAAA,GAAAH,OAAA;AAPA;;AAYA,MAAMI,eAAe,GAAG,SAAAA,CAAA,EAA8E;EAAA,IAA7EC,IAAe,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,SAAS;EAAA,IAAEG,UAAU,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,GAAG;EAAA,IAAEI,GAAyB,GAAAJ,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAC/F,OAAOG,KAAK,CAACF,UAAU,CAAC,CACrBG,IAAI,CAAC,CAAC,CAAC,CACPC,GAAG,CAAC,MAAM;IACT,QAAQR,IAAI;MACV,KAAK,SAAS;QACZ,OAAO,IAAAS,oCAAiB,EAAC;UAAEJ;QAAI,CAAC,CAAC;MACnC,KAAK,aAAa;QAChB,OAAO,IAAAK,oCAAiB,EAAC;UAAEL,GAAG;UAAEM,WAAW,EAAEC,iBAAW,CAACC;QAAK,CAAC,CAAC;MAClE,KAAK,cAAc;QACjB,OAAO,IAAAH,oCAAiB,EAAC;UAAEL,GAAG;UAAEM,WAAW,EAAEC,iBAAW,CAACE;QAAM,CAAC,CAAC;MACnE,KAAK,MAAM;QACT,OAAO,IAAAC,8BAAc,EAAC;UAAEV;QAAI,CAAC,CAAC;IAAC;EAErC,CAAC,CAAC;AACN,CAAC;AAEM,MAAMW,eAAe,GAAOC,MAAc,IAAK;EACpD,MAAMC,OAAO,GAAG;IACdC,IAAI,EAAEpB,eAAe,CAACkB,MAAM,CAACjB,IAAI,EAAEiB,MAAM,CAACb,UAAU,EAAEa,MAAM,CAACZ,GAAG,CAAQ;IACxEe,KAAK,EAAEH,MAAM,CAACG,KAAK,IAAI,EAAE;IACzBC,MAAM,EAAE,CAAC;IACTC,OAAO,EAAE;EACX,CAAC;EAED,OAAO;IACL,IAAIJ,OAAOA,CAAA,EAAG;MACZ,OAAOA,OAAO;IAChB,CAAC;IACD,IAAIE,KAAKA,CAAA,EAAG;MACV,OAAOF,OAAO,CAACE,KAAK;IACtB,CAAC;IACD,IAAIG,SAASA,CAAA,EAAG;MACd,OAAOL,OAAO,CAACI,OAAO;IACxB,CAAC;IACD,IAAIE,OAAOA,CAAA,EAAG;MACZ,MAAMC,QAAQ,GAAGP,OAAO,CAACG,MAAM,GAAGH,OAAO,CAACE,KAAK;MAC/C,MAAMM,MAAM,GAAGD,QAAQ,GAAGP,OAAO,CAACE,KAAK;MAEvC,OAAOM,MAAM,GAAGR,OAAO,CAACC,IAAI,CAACjB,MAAM;IACrC,CAAC;IACDyB,IAAI,EAAEC,IAAI,CAACC,EAAE,CAAC,YAAY;MACxBX,OAAO,CAACI,OAAO,GAAG,IAAI;MAEtB,MAAMG,QAAQ,GAAGP,OAAO,CAACG,MAAM,GAAGH,OAAO,CAACE,KAAK;MAC/C,MAAMM,MAAM,GAAGD,QAAQ,GAAGP,OAAO,CAACE,KAAK;MAEvCF,OAAO,CAACG,MAAM,IAAI,CAAC;MACnBH,OAAO,CAACI,OAAO,GAAG,KAAK;MAEvB,OAAOJ,OAAO,CAACC,IAAI,CAACW,KAAK,CAACL,QAAQ,EAAEC,MAAM,CAAC;IAC7C,CAAC;EACH,CAAC;AACH,CAAC;AAACK,OAAA,CAAAf,eAAA,GAAAA,eAAA"}