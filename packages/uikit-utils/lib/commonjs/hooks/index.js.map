{"version":3,"names":["_react","require","idPool","useUniqId","key","useState","exports","useUniqHandlerId","name","id","useForceUpdate","updater","useCallback","prev","useAsyncEffect","asyncEffect","deps","useEffect","createAsyncEffectCallback","useAsyncLayoutEffect","useLayoutEffect","useIIFE","callback","iife","destructor","Promise","awaitedDestructor","useIsMountedRef","isMounted","useRef","current","useIsFirstMount","isFirstMount","useFreshCallback","ref","arguments","useDebounceEffect","action","delay","length","undefined","timeoutRef","setTimeout","clearTimeout","usePartialState","initialState","useReducer","state","useRefTracker","target"],"sources":["index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { DependencyList } from 'react';\nimport { useCallback, useEffect, useLayoutEffect, useReducer, useRef, useState } from 'react';\n\ntype Destructor = () => void;\ntype AsyncEffectCallback = () => void | Destructor | Promise<void> | Promise<Destructor>;\n\nconst idPool: { [key: string]: number } = {};\nexport const useUniqId = (key: string) => {\n  return useState(() => {\n    if (!idPool[key]) idPool[key] = 1;\n    return idPool[key]++;\n  })[0];\n};\n\nexport const useUniqHandlerId = (name: string) => {\n  const id = useUniqId(name);\n  return `${name}_${id}`;\n};\n\nexport const useForceUpdate = () => {\n  const [, updater] = useState(0);\n  return useCallback(() => updater((prev) => prev + 1), []);\n};\n\nexport const useAsyncEffect = (asyncEffect: AsyncEffectCallback, deps?: DependencyList) => {\n  useEffect(createAsyncEffectCallback(asyncEffect), deps);\n};\nexport const useAsyncLayoutEffect = (asyncEffect: AsyncEffectCallback, deps?: DependencyList) => {\n  useLayoutEffect(createAsyncEffectCallback(asyncEffect), deps);\n};\nexport const useIIFE = <T>(callback: () => T) => {\n  return iife(callback);\n};\nconst iife = <T extends (...args: any[]) => any>(callback: T): ReturnType<T> => callback();\nconst createAsyncEffectCallback = (asyncEffect: AsyncEffectCallback) => () => {\n  const destructor = iife(asyncEffect);\n  return () => {\n    if (!destructor) return;\n\n    if (destructor instanceof Promise) {\n      iife(async () => {\n        const awaitedDestructor = await destructor;\n        if (awaitedDestructor) awaitedDestructor();\n      });\n    } else {\n      iife(destructor);\n    }\n  };\n};\n\nexport const useIsMountedRef = () => {\n  const isMounted = useRef(true);\n\n  useEffect(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  return isMounted;\n};\n\nexport const useIsFirstMount = () => {\n  const isFirstMount = useRef(true);\n\n  if (isFirstMount.current) {\n    isFirstMount.current = false;\n    return true;\n  }\n\n  return isFirstMount.current;\n};\n\nexport const useFreshCallback = <T extends Function>(callback: T): T => {\n  const ref = useRef<T>(callback);\n  ref.current = callback;\n  return useCallback(((...args: any[]) => ref.current(...args)) as unknown as T, []);\n};\n\nexport const useDebounceEffect = (action: () => void, delay: number, deps: DependencyList = []) => {\n  const timeoutRef = useRef<NodeJS.Timeout>();\n\n  useEffect(() => {\n    timeoutRef.current = setTimeout(async () => {\n      try {\n        await action();\n      } finally {\n        timeoutRef.current = undefined;\n      }\n    }, delay);\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = undefined;\n      }\n    };\n  }, [delay, ...deps]);\n};\n\nexport const usePartialState = <S>(initialState: S) => {\n  return useReducer((prev: S, state: Partial<S>) => ({ ...prev, ...state }), initialState);\n};\n\nexport const useRefTracker = <T>(target: T) => {\n  const ref = useRef(target);\n\n  useLayoutEffect(() => {\n    ref.current = target;\n  });\n\n  return ref;\n};\n"],"mappings":"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"}