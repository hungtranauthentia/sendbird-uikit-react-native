{"version":3,"names":["_bufferedRequest","require","isDifferentChannel","a","b","url","getGroupChannelChatAvailableState","channel","isOperator","myRole","frozen","isFrozen","muted","myMutedState","disabled","exports","getOpenChannelChatAvailableState","userId","getMyMutedInfo","isMuted","confirmAndMarkAsRead","channels","filter","it","isGroupChannel","unreadMessageCount","forEach","BufferedRequest","markAsRead","push","confirmAndMarkAsDelivered","markAsDelivered","isDefaultCoverImage","coverUrl","startsWith","getMembersExcludeMe","currentUserId","members","m","getGroupChannels","c","getOpenChannels","isOpenChannel","getChannelUniqId","getDefaultGroupChannelCreateParams","params","createParams","name","isDistinct","invitedUserIds","operatorUserIds"],"sources":["channel.ts"],"sourcesContent":["import { BufferedRequest } from '../shared/bufferedRequest';\nimport type {\n  SendbirdBaseChannel,\n  SendbirdChannel,\n  SendbirdGroupChannel,\n  SendbirdGroupChannelCreateParams,\n  SendbirdOpenChannel,\n} from '../types';\n\n/**\n * Diff utils for channel\n * @param {SendbirdBaseChannel} [a]\n * @param {SendbirdBaseChannel} [b]\n * @returns {boolean}\n * */\nexport function isDifferentChannel<T extends SendbirdBaseChannel>(a?: T, b?: T): boolean {\n  if (!a || !b) return true;\n  return a.url !== b.url;\n}\n\nexport const getGroupChannelChatAvailableState = (channel: SendbirdGroupChannel) => {\n  const isOperator = channel.myRole === 'operator';\n  const frozen = channel.isFrozen && !isOperator;\n  const muted = channel.myMutedState === 'muted';\n  const disabled = frozen || muted;\n  return { disabled, frozen, muted };\n};\n\nexport const getOpenChannelChatAvailableState = async (channel: SendbirdOpenChannel, userId: string) => {\n  const isOperator = channel.isOperator(userId);\n  const frozen = channel.isFrozen && !isOperator;\n  const muted = (await channel.getMyMutedInfo()).isMuted;\n  const disabled = frozen || muted;\n  return { disabled, frozen, muted };\n};\n\nexport const confirmAndMarkAsRead = async (channels: SendbirdBaseChannel[]) => {\n  channels\n    .filter((it): it is SendbirdGroupChannel => it.isGroupChannel() && it.unreadMessageCount > 0)\n    .forEach((it) => BufferedRequest.markAsRead.push(() => it.markAsRead(), it.url));\n};\n\nexport const confirmAndMarkAsDelivered = async (channels: SendbirdBaseChannel[]) => {\n  channels\n    .filter((it): it is SendbirdGroupChannel => it.isGroupChannel() && it.unreadMessageCount > 0)\n    .forEach((it) => BufferedRequest.markAsDelivered.push(() => it.markAsDelivered(), it.url));\n};\n\nexport function isDefaultCoverImage(coverUrl: string) {\n  return coverUrl === '' || coverUrl.startsWith('https://static.sendbird.com/sample/cover');\n}\n\nexport function getMembersExcludeMe(channel: SendbirdGroupChannel, currentUserId?: string) {\n  return channel.members.filter((m) => m.userId !== currentUserId);\n}\n\nexport function getGroupChannels(channels: SendbirdChannel[]): SendbirdGroupChannel[] {\n  return channels.filter((c): c is SendbirdGroupChannel => c.isGroupChannel());\n}\n\nexport function getOpenChannels(channels: SendbirdChannel[]): SendbirdOpenChannel[] {\n  return channels.filter((c): c is SendbirdOpenChannel => c.isOpenChannel());\n}\n\nexport function getChannelUniqId(channel: SendbirdChannel) {\n  return channel.url;\n}\n\nexport function getDefaultGroupChannelCreateParams(params: {\n  invitedUserIds: string[];\n  currentUserId?: string;\n}): SendbirdGroupChannelCreateParams {\n  const createParams: SendbirdGroupChannelCreateParams = {\n    name: '',\n    coverUrl: '',\n    isDistinct: false,\n    invitedUserIds: params.invitedUserIds,\n  };\n\n  if (params.currentUserId) createParams.operatorUserIds = [params.currentUserId];\n\n  return createParams;\n}\n"],"mappings":"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"}