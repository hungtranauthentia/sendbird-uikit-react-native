{"version":3,"names":["getFileExtension","getFileExtensionFromMime","getFileExtensionFromUri","getMimeFromFileExtension","normalizeFileName","normalizeFile","_ref","uri","size","name","type","filename","String","Date","now","filetype","extension","isNotMimeType","str","indexOf"],"sources":["normalizeFile.ts"],"sourcesContent":["import type { PartialNullable } from '@sendbird/uikit-utils';\nimport {\n  getFileExtension,\n  getFileExtensionFromMime,\n  getFileExtensionFromUri,\n  getMimeFromFileExtension,\n  normalizeFileName,\n} from '@sendbird/uikit-utils';\n\nimport type { FilePickerResponse, FileType } from '../platform/types';\n\nconst normalizeFile = async ({ uri, size, name, type }: PartialNullable<FileType>): Promise<FilePickerResponse> => {\n  // URI is required property\n  if (!uri) return null;\n\n  let filename = name || String(Date.now());\n  let filetype = type || '';\n\n  const extension =\n    getFileExtension(filename) || getFileExtensionFromMime(filetype) || (await getFileExtensionFromUri(uri));\n\n  if (extension) {\n    filename = normalizeFileName(filename, extension);\n    if (!filetype || isNotMimeType(filetype)) {\n      filetype = getMimeFromFileExtension(extension);\n    }\n  }\n\n  return { uri, name: filename, type: filetype, size: size ?? 0 };\n};\n\nfunction isNotMimeType(str: string) {\n  return str.indexOf('/') === -1;\n}\n\nexport default normalizeFile;\n"],"mappings":"AACA,SACEA,gBAAgB,EAChBC,wBAAwB,EACxBC,uBAAuB,EACvBC,wBAAwB,EACxBC,iBAAiB,QACZ,uBAAuB;AAI9B,MAAMC,aAAa,GAAG,MAAAC,IAAA,IAA6F;EAAA,IAAtF;IAAEC,GAAG;IAAEC,IAAI;IAAEC,IAAI;IAAEC;EAAgC,CAAC,GAAAJ,IAAA;EAC/E;EACA,IAAI,CAACC,GAAG,EAAE,OAAO,IAAI;EAErB,IAAII,QAAQ,GAAGF,IAAI,IAAIG,MAAM,CAACC,IAAI,CAACC,GAAG,EAAE,CAAC;EACzC,IAAIC,QAAQ,GAAGL,IAAI,IAAI,EAAE;EAEzB,MAAMM,SAAS,GACbhB,gBAAgB,CAACW,QAAQ,CAAC,IAAIV,wBAAwB,CAACc,QAAQ,CAAC,KAAK,MAAMb,uBAAuB,CAACK,GAAG,CAAC,CAAC;EAE1G,IAAIS,SAAS,EAAE;IACbL,QAAQ,GAAGP,iBAAiB,CAACO,QAAQ,EAAEK,SAAS,CAAC;IACjD,IAAI,CAACD,QAAQ,IAAIE,aAAa,CAACF,QAAQ,CAAC,EAAE;MACxCA,QAAQ,GAAGZ,wBAAwB,CAACa,SAAS,CAAC;IAChD;EACF;EAEA,OAAO;IAAET,GAAG;IAAEE,IAAI,EAAEE,QAAQ;IAAED,IAAI,EAAEK,QAAQ;IAAEP,IAAI,EAAEA,IAAI,IAAI;EAAE,CAAC;AACjE,CAAC;AAED,SAASS,aAAaA,CAACC,GAAW,EAAE;EAClC,OAAOA,GAAG,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAChC;AAEA,eAAed,aAAa"}