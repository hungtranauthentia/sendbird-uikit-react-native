{"version":3,"names":["useEffect","useState","Keyboard","LayoutAnimation","Platform","useSafeAreaInsets","NOOP","isLayoutAnimationConfigured","configureNextLayoutAnimation","event","config","create","duration","easing","Properties","scaleY","onEnd","configureNext","showEvent","hideEvent","select","android","default","useKeyboardStatus","keyboardStatus","setKeyboardStatus","visible","height","bottomSpace","bottom","bottomInset","subscriptions","addListener","endCoordinates","ios","nextLayoutAnimation","forEach","it","remove"],"sources":["useKeyboardStatus.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Keyboard, KeyboardEvent, KeyboardEventName, LayoutAnimation, Platform } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { NOOP } from '@sendbird/uikit-utils';\n\ntype KeyboardEvents = {\n  showEvent: KeyboardEventName;\n  hideEvent: KeyboardEventName;\n};\n\nlet isLayoutAnimationConfigured = false;\n\nconst configureNextLayoutAnimation = (event: KeyboardEvent) => {\n  if (isLayoutAnimationConfigured) return;\n  const config = LayoutAnimation.create(event.duration, event.easing, LayoutAnimation.Properties.scaleY);\n  isLayoutAnimationConfigured = true;\n  const onEnd = () => (isLayoutAnimationConfigured = false);\n  LayoutAnimation.configureNext(config, onEnd, onEnd);\n};\n\nconst { showEvent, hideEvent } = Platform.select<KeyboardEvents>({\n  android: { showEvent: 'keyboardDidShow', hideEvent: 'keyboardDidHide' },\n  default: { showEvent: 'keyboardWillShow', hideEvent: 'keyboardWillHide' },\n});\n\nconst useKeyboardStatus = () => {\n  const [keyboardStatus, setKeyboardStatus] = useState({ visible: false, height: 0, bottomSpace: 0 });\n  const { bottom: bottomInset } = useSafeAreaInsets();\n\n  useEffect(() => {\n    const subscriptions = [\n      Keyboard.addListener(showEvent, (event) => {\n        const height = event.endCoordinates.height;\n        const bottomSpace = Platform.select({ ios: height - bottomInset, default: 0 });\n        const nextLayoutAnimation = Platform.select({ ios: configureNextLayoutAnimation, default: NOOP });\n\n        nextLayoutAnimation(event);\n        setKeyboardStatus({ visible: true, height, bottomSpace });\n      }),\n\n      Keyboard.addListener(hideEvent, () => {\n        const height = 0;\n        const bottomSpace = Platform.select({ default: height });\n        // const nextLayoutAnimation = Platform.select({ ios: configureNextLayoutAnimation, default: NOOP });\n\n        // nextLayoutAnimation(event);\n        setKeyboardStatus({ visible: false, height, bottomSpace });\n      }),\n    ];\n    return () => {\n      subscriptions.forEach((it) => it.remove());\n    };\n  }, []);\n\n  return keyboardStatus;\n};\n\nexport default useKeyboardStatus;\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,QAAQ,EAAoCC,eAAe,EAAEC,QAAQ,QAAQ,cAAc;AACpG,SAASC,iBAAiB,QAAQ,gCAAgC;AAElE,SAASC,IAAI,QAAQ,uBAAuB;AAO5C,IAAIC,2BAA2B,GAAG,KAAK;AAEvC,MAAMC,4BAA4B,GAAIC,KAAoB,IAAK;EAC7D,IAAIF,2BAA2B,EAAE;EACjC,MAAMG,MAAM,GAAGP,eAAe,CAACQ,MAAM,CAACF,KAAK,CAACG,QAAQ,EAAEH,KAAK,CAACI,MAAM,EAAEV,eAAe,CAACW,UAAU,CAACC,MAAM,CAAC;EACtGR,2BAA2B,GAAG,IAAI;EAClC,MAAMS,KAAK,GAAGA,CAAA,KAAOT,2BAA2B,GAAG,KAAM;EACzDJ,eAAe,CAACc,aAAa,CAACP,MAAM,EAAEM,KAAK,EAAEA,KAAK,CAAC;AACrD,CAAC;AAED,MAAM;EAAEE,SAAS;EAAEC;AAAU,CAAC,GAAGf,QAAQ,CAACgB,MAAM,CAAiB;EAC/DC,OAAO,EAAE;IAAEH,SAAS,EAAE,iBAAiB;IAAEC,SAAS,EAAE;EAAkB,CAAC;EACvEG,OAAO,EAAE;IAAEJ,SAAS,EAAE,kBAAkB;IAAEC,SAAS,EAAE;EAAmB;AAC1E,CAAC,CAAC;AAEF,MAAMI,iBAAiB,GAAGA,CAAA,KAAM;EAC9B,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGxB,QAAQ,CAAC;IAAEyB,OAAO,EAAE,KAAK;IAAEC,MAAM,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAE,CAAC,CAAC;EACnG,MAAM;IAAEC,MAAM,EAAEC;EAAY,CAAC,GAAGzB,iBAAiB,EAAE;EAEnDL,SAAS,CAAC,MAAM;IACd,MAAM+B,aAAa,GAAG,CACpB7B,QAAQ,CAAC8B,WAAW,CAACd,SAAS,EAAGT,KAAK,IAAK;MACzC,MAAMkB,MAAM,GAAGlB,KAAK,CAACwB,cAAc,CAACN,MAAM;MAC1C,MAAMC,WAAW,GAAGxB,QAAQ,CAACgB,MAAM,CAAC;QAAEc,GAAG,EAAEP,MAAM,GAAGG,WAAW;QAAER,OAAO,EAAE;MAAE,CAAC,CAAC;MAC9E,MAAMa,mBAAmB,GAAG/B,QAAQ,CAACgB,MAAM,CAAC;QAAEc,GAAG,EAAE1B,4BAA4B;QAAEc,OAAO,EAAEhB;MAAK,CAAC,CAAC;MAEjG6B,mBAAmB,CAAC1B,KAAK,CAAC;MAC1BgB,iBAAiB,CAAC;QAAEC,OAAO,EAAE,IAAI;QAAEC,MAAM;QAAEC;MAAY,CAAC,CAAC;IAC3D,CAAC,CAAC,EAEF1B,QAAQ,CAAC8B,WAAW,CAACb,SAAS,EAAE,MAAM;MACpC,MAAMQ,MAAM,GAAG,CAAC;MAChB,MAAMC,WAAW,GAAGxB,QAAQ,CAACgB,MAAM,CAAC;QAAEE,OAAO,EAAEK;MAAO,CAAC,CAAC;MACxD;;MAEA;MACAF,iBAAiB,CAAC;QAAEC,OAAO,EAAE,KAAK;QAAEC,MAAM;QAAEC;MAAY,CAAC,CAAC;IAC5D,CAAC,CAAC,CACH;IACD,OAAO,MAAM;MACXG,aAAa,CAACK,OAAO,CAAEC,EAAE,IAAKA,EAAE,CAACC,MAAM,EAAE,CAAC;IAC5C,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOd,cAAc;AACvB,CAAC;AAED,eAAeD,iBAAiB"}