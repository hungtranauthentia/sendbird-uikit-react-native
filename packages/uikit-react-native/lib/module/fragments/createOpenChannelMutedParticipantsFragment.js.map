{"version":3,"names":["React","useChannelHandler","useUserList","useActionMenu","NOOP","ifThenOr","isDifferentChannel","useFreshCallback","useUniqHandlerId","StatusComposition","UserActionBar","createOpenChannelMutedParticipantsModule","useLocalization","useSendbirdChat","createOpenChannelMutedParticipantsFragment","initModule","OpenChannelMutedParticipantsModule","_ref","onPressHeaderLeft","channel","renderUser","queryCreator","createMutedUserListQuery","limit","handlerId","STRINGS","sdk","currentUser","openMenu","users","deleteUser","upsertUser","loading","refresh","error","next","onUserMuted","eventChannel","user","onUserUnmuted","userId","_renderUser","props","isUserOperator","isOperator","createElement","muted","uri","profileUrl","label","LABELS","USER_BAR_OPERATOR","name","nickname","USER_NO_NAME","USER_BAR_ME_POSTFIX","disabled","onPressActionMenu","title","menuItems","UNMUTE","onPress","unmuteUser","then","Provider","Header","LoadingComponent","StatusLoading","Boolean","ErrorComponent","StatusError","onPressRetry","List","mutedParticipants","onLoadNext","ListEmptyComponent","StatusEmpty"],"sources":["createOpenChannelMutedParticipantsFragment.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useChannelHandler, useUserList } from '@sendbird/uikit-chat-hooks';\nimport { useActionMenu } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, ifThenOr, isDifferentChannel, useFreshCallback, useUniqHandlerId } from '@sendbird/uikit-utils';\n\nimport StatusComposition from '../components/StatusComposition';\nimport UserActionBar from '../components/UserActionBar';\nimport { createOpenChannelMutedParticipantsModule } from '../domain/openChannelMutedParticipants';\nimport type {\n  OpenChannelMutedParticipantsFragment,\n  OpenChannelMutedParticipantsModule,\n} from '../domain/openChannelMutedParticipants/types';\nimport { useLocalization, useSendbirdChat } from '../hooks/useContext';\n\nconst createOpenChannelMutedParticipantsFragment = (\n  initModule?: Partial<OpenChannelMutedParticipantsModule>,\n): OpenChannelMutedParticipantsFragment => {\n  const OpenChannelMutedParticipantsModule = createOpenChannelMutedParticipantsModule(initModule);\n\n  return ({\n    onPressHeaderLeft = NOOP,\n    channel,\n    renderUser,\n    queryCreator = () => channel.createMutedUserListQuery({ limit: 20 }),\n  }) => {\n    const handlerId = useUniqHandlerId('OpenChannelMutedParticipants');\n\n    const { STRINGS } = useLocalization();\n    const { sdk, currentUser } = useSendbirdChat();\n    const { openMenu } = useActionMenu();\n\n    const { users, deleteUser, upsertUser, loading, refresh, error, next } = useUserList(sdk, { queryCreator });\n\n    useChannelHandler(\n      sdk,\n      handlerId,\n      {\n        onUserMuted(eventChannel, user) {\n          if (isDifferentChannel(eventChannel, channel)) return;\n          upsertUser(user);\n        },\n        onUserUnmuted(eventChannel, user) {\n          if (isDifferentChannel(eventChannel, channel)) return;\n          deleteUser(user.userId);\n        },\n      },\n      'open',\n    );\n\n    const _renderUser: NonNullable<typeof renderUser> = useFreshCallback((props) => {\n      if (renderUser) return renderUser(props);\n\n      const { user } = props;\n      const isUserOperator = channel.isOperator(user.userId);\n\n      return (\n        <UserActionBar\n          muted\n          uri={user.profileUrl}\n          label={ifThenOr(isUserOperator, STRINGS.LABELS.USER_BAR_OPERATOR, '')}\n          name={\n            (user.nickname || STRINGS.LABELS.USER_NO_NAME) +\n            (user.userId === currentUser?.userId ? STRINGS.LABELS.USER_BAR_ME_POSTFIX : '')\n          }\n          disabled={user.userId === currentUser?.userId}\n          onPressActionMenu={() => {\n            openMenu({\n              title: user.nickname || STRINGS.LABELS.USER_NO_NAME,\n              menuItems: [\n                {\n                  title: STRINGS.LABELS.UNMUTE,\n                  onPress: () => channel.unmuteUser(user).then(() => deleteUser(user.userId)),\n                },\n              ],\n            });\n          }}\n        />\n      );\n    });\n\n    return (\n      <OpenChannelMutedParticipantsModule.Provider channel={channel}>\n        <OpenChannelMutedParticipantsModule.Header onPressHeaderLeft={onPressHeaderLeft} />\n        <StatusComposition\n          loading={loading}\n          LoadingComponent={<OpenChannelMutedParticipantsModule.StatusLoading />}\n          error={Boolean(error)}\n          ErrorComponent={<OpenChannelMutedParticipantsModule.StatusError onPressRetry={refresh} />}\n        >\n          <OpenChannelMutedParticipantsModule.List\n            renderUser={_renderUser}\n            mutedParticipants={users}\n            onLoadNext={next}\n            ListEmptyComponent={<OpenChannelMutedParticipantsModule.StatusEmpty />}\n          />\n        </StatusComposition>\n      </OpenChannelMutedParticipantsModule.Provider>\n    );\n  };\n};\n\nexport default createOpenChannelMutedParticipantsFragment;\n"],"mappings":"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"}