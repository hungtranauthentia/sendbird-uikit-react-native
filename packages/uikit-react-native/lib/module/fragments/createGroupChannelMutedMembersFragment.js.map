{"version":3,"names":["React","useChannelHandler","useUserList","useActionMenu","NOOP","isDifferentChannel","useFreshCallback","useUniqHandlerId","StatusComposition","UserActionBar","createGroupChannelMutedMembersModule","useLocalization","useSendbirdChat","createGroupChannelMutedMembersFragment","initModule","GroupChannelMutedMembersModule","_ref","onPressHeaderLeft","channel","renderUser","queryCreator","createMutedUserListQuery","limit","handlerId","STRINGS","sdk","currentUser","openMenu","users","deleteUser","upsertUser","loading","refresh","error","next","onUserMuted","eventChannel","user","onUserUnmuted","userId","onUserLeft","onUserBanned","_renderUser","props","createElement","muted","uri","profileUrl","name","nickname","LABELS","USER_NO_NAME","USER_BAR_ME_POSTFIX","disabled","onPressActionMenu","title","menuItems","UNMUTE","onPress","unmuteUser","then","Provider","Header","LoadingComponent","StatusLoading","Boolean","ErrorComponent","StatusError","onPressRetry","List","mutedMembers","onLoadNext","ListEmptyComponent","StatusEmpty"],"sources":["createGroupChannelMutedMembersFragment.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useChannelHandler, useUserList } from '@sendbird/uikit-chat-hooks';\nimport { useActionMenu } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, isDifferentChannel, useFreshCallback, useUniqHandlerId } from '@sendbird/uikit-utils';\n\nimport StatusComposition from '../components/StatusComposition';\nimport UserActionBar from '../components/UserActionBar';\nimport { createGroupChannelMutedMembersModule } from '../domain/groupChannelMutedMembers';\nimport type {\n  GroupChannelMutedMembersFragment,\n  GroupChannelMutedMembersModule,\n} from '../domain/groupChannelMutedMembers/types';\nimport { useLocalization, useSendbirdChat } from '../hooks/useContext';\n\nconst createGroupChannelMutedMembersFragment = (\n  initModule?: Partial<GroupChannelMutedMembersModule>,\n): GroupChannelMutedMembersFragment => {\n  const GroupChannelMutedMembersModule = createGroupChannelMutedMembersModule(initModule);\n\n  return ({\n    onPressHeaderLeft = NOOP,\n    channel,\n    renderUser,\n    queryCreator = () => channel.createMutedUserListQuery({ limit: 20 }),\n  }) => {\n    const handlerId = useUniqHandlerId('GroupChannelMutedMembersFragment');\n\n    const { STRINGS } = useLocalization();\n    const { sdk, currentUser } = useSendbirdChat();\n    const { openMenu } = useActionMenu();\n\n    const { users, deleteUser, upsertUser, loading, refresh, error, next } = useUserList(sdk, { queryCreator });\n\n    useChannelHandler(sdk, handlerId, {\n      onUserMuted(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        upsertUser(user);\n      },\n      onUserUnmuted(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n      onUserLeft(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n      onUserBanned(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n    });\n\n    const _renderUser: NonNullable<typeof renderUser> = useFreshCallback((props) => {\n      if (renderUser) return renderUser(props);\n\n      const { user } = props;\n      return (\n        <UserActionBar\n          muted\n          uri={user.profileUrl}\n          name={\n            (user.nickname || STRINGS.LABELS.USER_NO_NAME) +\n            (user.userId === currentUser?.userId ? STRINGS.LABELS.USER_BAR_ME_POSTFIX : '')\n          }\n          disabled={user.userId === currentUser?.userId}\n          onPressActionMenu={() => {\n            openMenu({\n              title: user.nickname || STRINGS.LABELS.USER_NO_NAME,\n              menuItems: [\n                {\n                  title: STRINGS.LABELS.UNMUTE,\n                  onPress: () => channel.unmuteUser(user).then(() => deleteUser(user.userId)),\n                },\n              ],\n            });\n          }}\n        />\n      );\n    });\n\n    return (\n      <GroupChannelMutedMembersModule.Provider channel={channel}>\n        <GroupChannelMutedMembersModule.Header onPressHeaderLeft={onPressHeaderLeft} />\n        <StatusComposition\n          loading={loading}\n          LoadingComponent={<GroupChannelMutedMembersModule.StatusLoading />}\n          error={Boolean(error)}\n          ErrorComponent={<GroupChannelMutedMembersModule.StatusError onPressRetry={refresh} />}\n        >\n          <GroupChannelMutedMembersModule.List\n            mutedMembers={users}\n            onLoadNext={next}\n            renderUser={_renderUser}\n            ListEmptyComponent={<GroupChannelMutedMembersModule.StatusEmpty />}\n          />\n        </StatusComposition>\n      </GroupChannelMutedMembersModule.Provider>\n    );\n  };\n};\n\nexport default createGroupChannelMutedMembersFragment;\n"],"mappings":"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"}