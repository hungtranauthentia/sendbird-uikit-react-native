{"version":3,"names":["React","TouchableOpacity","View","Icon","ImageWithPlaceholder","Text","VideoThumbnail","createStyleSheet","useUIKitTheme","getFileIconFromMessageType","getMessageType","getThumbnailUriFromFileMessage","useLocalization","usePlatformService","MessageToReplyPreview","_ref","messageToReply","setMessageToReply","colors","select","palette","mediaService","STRINGS","getFileIconAsImage","url","createElement","source","uri","style","styles","previewImage","getFileIconAsVideoThumbnail","iconSize","fetchThumbnailFromVideoSource","getVideoThumbnail","timeMills","getFileIconAsSymbol","icon","size","color","onBackground02","containerStyle","fileIcon","backgroundColor","light","background100","dark","background500","getFileIcon","isFileMessage","messageType","messageToReplyContainer","borderColor","onBackground04","flex","flexDirection","numberOfLines","fontSize","fontWeight","marginBottom","LABELS","CHANNEL_INPUT_REPLY_PREVIEW_TITLE","sender","onBackground03","CHANNEL_INPUT_REPLY_PREVIEW_BODY","onPress","undefined","onBackground01","closeIcon","width","height","borderRadius","marginTop","marginRight","overflow","paddingLeft","paddingRight","paddingTop","paddingBottom","alignItems","borderTopWidth","marginLeft","padding"],"sources":["MessageToReplyPreview.tsx"],"sourcesContent":["import React from 'react';\nimport { TouchableOpacity, View } from 'react-native';\n\nimport {\n  Icon,\n  ImageWithPlaceholder,\n  Text,\n  VideoThumbnail,\n  createStyleSheet,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport {\n  FileIcon,\n  SendbirdBaseMessage,\n  SendbirdFileMessage,\n  SendbirdUserMessage,\n  getFileIconFromMessageType,\n  getMessageType,\n  getThumbnailUriFromFileMessage,\n} from '@sendbird/uikit-utils';\n\nimport { useLocalization, usePlatformService } from '../../hooks/useContext';\n\nexport type MessageToReplyPreviewProps = {\n  messageToReply?: SendbirdFileMessage | SendbirdUserMessage;\n  setMessageToReply?: (message?: undefined | SendbirdFileMessage | SendbirdUserMessage) => void;\n};\n\nexport const MessageToReplyPreview = ({ messageToReply, setMessageToReply }: MessageToReplyPreviewProps) => {\n  const { colors, select, palette } = useUIKitTheme();\n  const { mediaService } = usePlatformService();\n  const { STRINGS } = useLocalization();\n\n  const getFileIconAsImage = (url: string) => {\n    return <ImageWithPlaceholder source={{ uri: url }} style={styles.previewImage} />;\n  };\n\n  const getFileIconAsVideoThumbnail = (url: string) => {\n    return (\n      <VideoThumbnail\n        style={styles.previewImage}\n        iconSize={0}\n        source={url}\n        fetchThumbnailFromVideoSource={(uri) => mediaService.getVideoThumbnail({ url: uri, timeMills: 1000 })}\n      />\n    );\n  };\n\n  const getFileIconAsSymbol = (icon: FileIcon) => {\n    return (\n      <Icon\n        icon={icon}\n        size={20}\n        color={colors.onBackground02}\n        containerStyle={[\n          styles.fileIcon,\n          {\n            backgroundColor: select({ light: palette.background100, dark: palette.background500 }),\n          },\n        ]}\n      />\n    );\n  };\n\n  const getFileIcon = (messageToReply: SendbirdBaseMessage) => {\n    if (messageToReply?.isFileMessage()) {\n      const messageType = getMessageType(messageToReply);\n      switch (messageType) {\n        case 'file.image':\n          return getFileIconAsImage(getThumbnailUriFromFileMessage(messageToReply));\n        case 'file.video':\n          return getFileIconAsVideoThumbnail(getThumbnailUriFromFileMessage(messageToReply));\n        case 'file.voice':\n          return null;\n        default:\n          return getFileIconAsSymbol(getFileIconFromMessageType(messageType));\n      }\n    }\n    return null;\n  };\n\n  if (!messageToReply) return null;\n\n  return (\n    <View style={[styles.messageToReplyContainer, { borderColor: colors.onBackground04 }]}>\n      <View style={{ flex: 1, flexDirection: 'row' }}>\n        {getFileIcon(messageToReply)}\n        <View style={{ flex: 1, flexDirection: 'column' }}>\n          <Text numberOfLines={1} style={{ fontSize: 13, fontWeight: '900', marginBottom: 4 }}>\n            {STRINGS.LABELS.CHANNEL_INPUT_REPLY_PREVIEW_TITLE(messageToReply.sender)}\n          </Text>\n          <Text numberOfLines={1} style={{ fontSize: 13, color: colors.onBackground03 }}>\n            {STRINGS.LABELS.CHANNEL_INPUT_REPLY_PREVIEW_BODY(messageToReply)}\n          </Text>\n        </View>\n      </View>\n      <TouchableOpacity onPress={() => setMessageToReply?.(undefined)}>\n        <Icon icon={'close'} size={24} color={colors.onBackground01} containerStyle={styles.closeIcon} />\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst styles = createStyleSheet({\n  previewImage: {\n    width: 36,\n    height: 36,\n    borderRadius: 10,\n    marginTop: 2,\n    marginRight: 10,\n    overflow: 'hidden',\n  },\n  messageToReplyContainer: {\n    flexDirection: 'row',\n    paddingLeft: 18,\n    paddingRight: 16,\n    paddingTop: 10,\n    paddingBottom: 8,\n    alignItems: 'center',\n    borderTopWidth: 1,\n  },\n  fileIcon: {\n    width: 36,\n    height: 36,\n    borderRadius: 10,\n    marginRight: 10,\n    marginTop: 2,\n  },\n  closeIcon: {\n    marginLeft: 4,\n    padding: 4,\n  },\n});\n"],"mappings":"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"}