{"version":3,"names":["React","FlatList","Pressable","View","useWindowDimensions","useSafeAreaInsets","Image","Modal","createStyleSheet","useUIKitTheme","UNKNOWN_USER_ID","NUM_COLUMN","ReactionListBottomSheet","_ref","visible","onClose","onDismiss","reactionCtx","chatCtx","width","bottom","left","right","colors","currentUser","emojiManager","channel","message","color","ui","reaction","default","createElement","type","Boolean","backgroundStyle","styles","modal","style","container","paddingBottom","backgroundColor","dialog","none","background","paddingLeft","paddingHorizontal","paddingRight","data","allEmoji","numColumns","keyExtractor","item","key","contentContainerStyle","flatlist","ItemSeparatorComponent","height","renderItem","_ref2","_message$reactions","_message$reactions$fi","url","reactedUserIds","reactions","find","it","userIds","idx","indexOf","userId","reacted","emojiItem","onPress","deleteReaction","addReaction","_ref3","pressed","button","selected","enabled","source","uri","emoji","overflow","borderTopLeftRadius","borderTopRightRadius","paddingTop","flexDirection","alignItems","justifyContent","padding","borderRadius"],"sources":["ReactionListBottomSheet.tsx"],"sourcesContent":["import React from 'react';\nimport { FlatList, Pressable, View, useWindowDimensions } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { Image, Modal, createStyleSheet, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\n\nimport { UNKNOWN_USER_ID } from '../../constants';\nimport type { ReactionBottomSheetProps } from './index';\n\nconst NUM_COLUMN = 6;\nconst ReactionListBottomSheet = ({ visible, onClose, onDismiss, reactionCtx, chatCtx }: ReactionBottomSheetProps) => {\n  const { width } = useWindowDimensions();\n  const { bottom, left, right } = useSafeAreaInsets();\n  const { colors } = useUIKitTheme();\n\n  const { currentUser, emojiManager } = chatCtx;\n  const { channel, message } = reactionCtx;\n  const color = colors.ui.reaction.default;\n\n  return (\n    <Modal\n      type={'slide'}\n      visible={Boolean(visible && channel && message)}\n      onClose={onClose}\n      onDismiss={onDismiss}\n      backgroundStyle={styles.modal}\n    >\n      <View\n        style={[\n          styles.container,\n          {\n            width,\n            paddingBottom: bottom,\n            backgroundColor: colors.ui.dialog.default.none.background,\n            paddingLeft: left + styles.container.paddingHorizontal,\n            paddingRight: right + styles.container.paddingHorizontal,\n          },\n        ]}\n      >\n        <FlatList\n          data={emojiManager.allEmoji}\n          numColumns={NUM_COLUMN}\n          keyExtractor={(item) => item.key}\n          contentContainerStyle={styles.flatlist}\n          ItemSeparatorComponent={() => <View style={{ height: 16 }} />}\n          renderItem={({ item: { key, url } }) => {\n            const reactedUserIds = message?.reactions?.find((it) => it.key === key)?.userIds ?? [];\n\n            const idx = reactedUserIds.indexOf(currentUser?.userId ?? UNKNOWN_USER_ID);\n            const reacted = idx > -1;\n\n            return (\n              <View style={styles.emojiItem}>\n                <Pressable\n                  key={key}\n                  onPress={() => {\n                    if (message && channel) {\n                      if (reacted) channel.deleteReaction(message, key);\n                      else channel.addReaction(message, key);\n                    }\n                    onClose();\n                  }}\n                  style={({ pressed }) => [\n                    styles.button,\n                    { backgroundColor: reacted || pressed ? color.selected.background : color.enabled.background },\n                  ]}\n                >\n                  <Image source={{ uri: url }} style={styles.emoji} />\n                </Pressable>\n              </View>\n            );\n          }}\n        />\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = createStyleSheet({\n  container: {\n    overflow: 'hidden',\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    paddingTop: 16,\n    paddingHorizontal: 18,\n    flexDirection: 'row',\n  },\n  modal: {\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n  },\n  flatlist: {\n    width: '100%',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n  },\n  emojiItem: {\n    width: `${100 / NUM_COLUMN}%`,\n    alignItems: 'center',\n  },\n  button: {\n    width: 44,\n    height: 44,\n    padding: 4,\n    borderRadius: 8,\n  },\n  emoji: {\n    width: '100%',\n    height: '100%',\n  },\n});\n\nexport default ReactionListBottomSheet;\n"],"mappings":"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"}