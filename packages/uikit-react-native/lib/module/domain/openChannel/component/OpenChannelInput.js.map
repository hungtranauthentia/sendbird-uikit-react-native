{"version":3,"names":["React","useCallback","useContext","useEffect","useState","useChannelHandler","getOpenChannelChatAvailableState","useUniqHandlerId","ChannelInput","UNKNOWN_USER_ID","useSendbirdChat","OpenChannelContexts","OpenChannelInput","_ref","inputDisabled","props","sdk","currentUser","channel","messageToEdit","setMessageToEdit","keyboardAvoidOffset","Fragment","chatAvailableState","setChatAvailableState","frozen","muted","disabled","updateChatAvailableState","baseChannel","isOpenChannel","userId","then","handlerId","onChannelFrozen","onChannelUnfrozen","onUserMuted","onUserUnmuted","onOperatorUpdated","createElement","_extends","inputMuted","inputFrozen","memo"],"sources":["OpenChannelInput.tsx"],"sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from 'react';\n\nimport { useChannelHandler } from '@sendbird/uikit-chat-hooks';\nimport { SendbirdBaseChannel, getOpenChannelChatAvailableState, useUniqHandlerId } from '@sendbird/uikit-utils';\n\nimport ChannelInput from '../../../components/ChannelInput';\nimport { UNKNOWN_USER_ID } from '../../../constants';\nimport { useSendbirdChat } from '../../../hooks/useContext';\nimport { OpenChannelContexts } from '../module/moduleContext';\nimport type { OpenChannelProps } from '../types';\n\nconst OpenChannelInput = ({ inputDisabled = false, ...props }: OpenChannelProps['Input']) => {\n  const { sdk, currentUser } = useSendbirdChat();\n\n  const {\n    channel,\n    messageToEdit,\n    setMessageToEdit,\n    keyboardAvoidOffset = 0,\n  } = useContext(OpenChannelContexts.Fragment);\n\n  const [chatAvailableState, setChatAvailableState] = useState({ frozen: false, muted: false, disabled: false });\n\n  const updateChatAvailableState = useCallback(\n    (baseChannel: SendbirdBaseChannel) => {\n      if (baseChannel.isOpenChannel()) {\n        const userId = currentUser?.userId ?? UNKNOWN_USER_ID;\n        getOpenChannelChatAvailableState(baseChannel, userId).then(setChatAvailableState);\n      }\n    },\n    [currentUser?.userId],\n  );\n\n  useEffect(() => {\n    updateChatAvailableState(channel);\n  }, [channel, updateChatAvailableState]);\n\n  const handlerId = useUniqHandlerId('OpenChannelInput');\n  useChannelHandler(\n    sdk,\n    handlerId,\n    {\n      onChannelFrozen(channel) {\n        updateChatAvailableState(channel);\n      },\n      onChannelUnfrozen(channel) {\n        updateChatAvailableState(channel);\n      },\n      onUserMuted(channel) {\n        updateChatAvailableState(channel);\n      },\n      onUserUnmuted(channel) {\n        updateChatAvailableState(channel);\n      },\n      onOperatorUpdated(channel) {\n        updateChatAvailableState(channel);\n      },\n    },\n    'open',\n  );\n\n  return (\n    <ChannelInput\n      channel={channel}\n      messageToEdit={messageToEdit}\n      setMessageToEdit={setMessageToEdit}\n      keyboardAvoidOffset={keyboardAvoidOffset}\n      inputMuted={chatAvailableState.muted}\n      inputFrozen={chatAvailableState.frozen}\n      inputDisabled={chatAvailableState.disabled ? true : inputDisabled}\n      {...props}\n    />\n  );\n};\n\nexport default React.memo(OpenChannelInput);\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3E,SAASC,iBAAiB,QAAQ,4BAA4B;AAC9D,SAA8BC,gCAAgC,EAAEC,gBAAgB,QAAQ,uBAAuB;AAE/G,OAAOC,YAAY,MAAM,kCAAkC;AAC3D,SAASC,eAAe,QAAQ,oBAAoB;AACpD,SAASC,eAAe,QAAQ,2BAA2B;AAC3D,SAASC,mBAAmB,QAAQ,yBAAyB;AAG7D,MAAMC,gBAAgB,GAAGC,IAAA,IAAoE;EAAA,IAAnE;IAAEC,aAAa,GAAG,KAAK;IAAE,GAAGC;EAAiC,CAAC,GAAAF,IAAA;EACtF,MAAM;IAAEG,GAAG;IAAEC;EAAY,CAAC,GAAGP,eAAe,EAAE;EAE9C,MAAM;IACJQ,OAAO;IACPC,aAAa;IACbC,gBAAgB;IAChBC,mBAAmB,GAAG;EACxB,CAAC,GAAGnB,UAAU,CAACS,mBAAmB,CAACW,QAAQ,CAAC;EAE5C,MAAM,CAACC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGpB,QAAQ,CAAC;IAAEqB,MAAM,EAAE,KAAK;IAAEC,KAAK,EAAE,KAAK;IAAEC,QAAQ,EAAE;EAAM,CAAC,CAAC;EAE9G,MAAMC,wBAAwB,GAAG3B,WAAW,CACzC4B,WAAgC,IAAK;IACpC,IAAIA,WAAW,CAACC,aAAa,EAAE,EAAE;MAC/B,MAAMC,MAAM,GAAG,CAAAd,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEc,MAAM,KAAItB,eAAe;MACrDH,gCAAgC,CAACuB,WAAW,EAAEE,MAAM,CAAC,CAACC,IAAI,CAACR,qBAAqB,CAAC;IACnF;EACF,CAAC,EACD,CAACP,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEc,MAAM,CAAC,CACtB;EAED5B,SAAS,CAAC,MAAM;IACdyB,wBAAwB,CAACV,OAAO,CAAC;EACnC,CAAC,EAAE,CAACA,OAAO,EAAEU,wBAAwB,CAAC,CAAC;EAEvC,MAAMK,SAAS,GAAG1B,gBAAgB,CAAC,kBAAkB,CAAC;EACtDF,iBAAiB,CACfW,GAAG,EACHiB,SAAS,EACT;IACEC,eAAeA,CAAChB,OAAO,EAAE;MACvBU,wBAAwB,CAACV,OAAO,CAAC;IACnC,CAAC;IACDiB,iBAAiBA,CAACjB,OAAO,EAAE;MACzBU,wBAAwB,CAACV,OAAO,CAAC;IACnC,CAAC;IACDkB,WAAWA,CAAClB,OAAO,EAAE;MACnBU,wBAAwB,CAACV,OAAO,CAAC;IACnC,CAAC;IACDmB,aAAaA,CAACnB,OAAO,EAAE;MACrBU,wBAAwB,CAACV,OAAO,CAAC;IACnC,CAAC;IACDoB,iBAAiBA,CAACpB,OAAO,EAAE;MACzBU,wBAAwB,CAACV,OAAO,CAAC;IACnC;EACF,CAAC,EACD,MAAM,CACP;EAED,oBACElB,KAAA,CAAAuC,aAAA,CAAC/B,YAAY,EAAAgC,QAAA;IACXtB,OAAO,EAAEA,OAAQ;IACjBC,aAAa,EAAEA,aAAc;IAC7BC,gBAAgB,EAAEA,gBAAiB;IACnCC,mBAAmB,EAAEA,mBAAoB;IACzCoB,UAAU,EAAElB,kBAAkB,CAACG,KAAM;IACrCgB,WAAW,EAAEnB,kBAAkB,CAACE,MAAO;IACvCX,aAAa,EAAES,kBAAkB,CAACI,QAAQ,GAAG,IAAI,GAAGb;EAAc,GAC9DC,KAAK,EACT;AAEN,CAAC;AAED,4BAAef,KAAK,CAAC2C,IAAI,CAAC/B,gBAAgB,CAAC"}