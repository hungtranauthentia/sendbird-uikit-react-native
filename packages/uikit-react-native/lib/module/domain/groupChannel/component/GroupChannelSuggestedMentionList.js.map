{"version":3,"names":["React","useContext","Pressable","ScrollView","View","useWindowDimensions","useSafeAreaInsets","Avatar","Divider","Icon","Text","createStyleSheet","useHeaderStyle","useUIKitTheme","conditionChaining","useLocalization","useSendbirdChat","useKeyboardStatus","useMentionSuggestion","GroupChannelContexts","GroupChannelSuggestedMentionList","_ref","text","selection","inputHeight","bottomInset","onPressToMention","mentionedUsers","width","screenWidth","height","screenHeight","channel","Fragment","sdk","mentionManager","STRINGS","colors","topInset","left","right","keyboard","members","reset","searchStringRange","searchLimited","isLandscape","isShortened","visible","canRenderMembers","length","maxHeight","styles","suggestion","renderLimitGuide","createElement","style","borderTopColor","onBackground04","icon","size","containerStyle","marginRight","color","onBackground02","body3","GROUP_CHANNEL","MENTION_LIMITED","config","mentionLimit","renderMembers","map","member","onPress","key","userId","userContainer","uri","profileUrl","userAvatar","userInfo","body2","onBackground01","numberOfLines","userNickname","nickname","LABELS","USER_NO_NAME","onBackground03","position","bottom","pointerEvents","container","bounces","keyboardDismissMode","keyboardShouldPersistTaps","scrollView","backgroundColor","background","bottomSpace","borderTopWidth","contentContainerStyle","paddingLeft","paddingRight","top","flexDirection","alignItems","justifyContent","flex","flexShrink","lineHeight","textAlignVertical","minWidth","paddingHorizontal"],"sources":["GroupChannelSuggestedMentionList.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { Pressable, ScrollView, View, useWindowDimensions } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport {\n  Avatar,\n  Divider,\n  Icon,\n  Text,\n  createStyleSheet,\n  useHeaderStyle,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport { conditionChaining } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport useKeyboardStatus from '../../../hooks/useKeyboardStatus';\nimport useMentionSuggestion from '../../../hooks/useMentionSuggestion';\nimport { GroupChannelContexts } from '../module/moduleContext';\nimport type { GroupChannelProps } from '../types';\n\nconst GroupChannelSuggestedMentionList = ({\n  text,\n  selection,\n  inputHeight,\n  bottomInset,\n  onPressToMention,\n  mentionedUsers,\n}: GroupChannelProps['SuggestedMentionList']) => {\n  const { width: screenWidth, height: screenHeight } = useWindowDimensions();\n  const { channel } = useContext(GroupChannelContexts.Fragment);\n  const { sdk, mentionManager } = useSendbirdChat();\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n  const { topInset } = useHeaderStyle();\n  const { left, right } = useSafeAreaInsets();\n\n  const keyboard = useKeyboardStatus();\n\n  const { members, reset, searchStringRange, searchLimited } = useMentionSuggestion({\n    sdk,\n    text,\n    selection,\n    channel,\n    mentionedUsers,\n  });\n\n  const isLandscape = screenWidth > screenHeight;\n  const isShortened = isLandscape && keyboard.visible;\n  const canRenderMembers = members.length > 0;\n  const maxHeight = isShortened ? screenHeight - (topInset + inputHeight + keyboard.height) : styles.suggestion.height;\n\n  const renderLimitGuide = () => {\n    return (\n      <View style={[styles.searchLimited, { borderTopColor: colors.onBackground04 }]}>\n        <Icon icon={'info'} size={20} containerStyle={{ marginRight: 4 }} color={colors.onBackground02} />\n        <Text body3 color={colors.onBackground02}>\n          {STRINGS.GROUP_CHANNEL.MENTION_LIMITED(mentionManager.config.mentionLimit)}\n        </Text>\n      </View>\n    );\n  };\n\n  const renderMembers = () => {\n    return (\n      <View>\n        {members.map((member) => {\n          return (\n            <Pressable\n              onPress={() => {\n                onPressToMention(member, searchStringRange);\n                reset();\n              }}\n              key={member.userId}\n              style={styles.userContainer}\n            >\n              <Avatar size={28} uri={member.profileUrl} containerStyle={styles.userAvatar} />\n              <View style={styles.userInfo}>\n                <Text body2 color={colors.onBackground01} numberOfLines={1} style={styles.userNickname}>\n                  {member.nickname || STRINGS.LABELS.USER_NO_NAME}\n                </Text>\n                <Text body3 color={colors.onBackground03} numberOfLines={1} style={styles.userId}>\n                  {member.userId}\n                </Text>\n                <Divider style={{ position: 'absolute', bottom: 0 }} />\n              </View>\n            </Pressable>\n          );\n        })}\n      </View>\n    );\n  };\n\n  return (\n    <Pressable\n      onPress={reset}\n      pointerEvents={canRenderMembers ? 'auto' : 'none'}\n      style={[styles.container, { bottom: inputHeight + bottomInset }]}\n    >\n      <ScrollView\n        bounces={false}\n        keyboardDismissMode={'none'}\n        keyboardShouldPersistTaps={'always'}\n        style={[\n          styles.scrollView,\n          {\n            maxHeight,\n            backgroundColor: colors.background,\n            bottom: keyboard.bottomSpace,\n          },\n          canRenderMembers && {\n            borderTopWidth: 1,\n            borderTopColor: colors.onBackground04,\n          },\n        ]}\n        contentContainerStyle={{ paddingLeft: left, paddingRight: right }}\n      >\n        {conditionChaining([searchLimited, canRenderMembers], [renderLimitGuide(), renderMembers(), null])}\n      </ScrollView>\n    </Pressable>\n  );\n};\n\nconst styles = createStyleSheet({\n  suggestion: {\n    height: 196,\n  },\n  container: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    left: 0,\n  },\n  scrollView: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n  },\n  userContainer: {\n    paddingLeft: 16,\n    flexDirection: 'row',\n    height: 44,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  userAvatar: {\n    marginRight: 16,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    flex: 1,\n  },\n  userNickname: {\n    flexShrink: 1,\n    lineHeight: 44,\n    textAlignVertical: 'center',\n    marginRight: 6,\n  },\n  userId: {\n    lineHeight: 44,\n    textAlignVertical: 'center',\n    minWidth: 32,\n    flexShrink: 1,\n    marginRight: 16,\n  },\n  searchLimited: {\n    borderTopWidth: 1,\n    paddingHorizontal: 16,\n    height: 44,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n});\nexport default GroupChannelSuggestedMentionList;\n"],"mappings":"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"}