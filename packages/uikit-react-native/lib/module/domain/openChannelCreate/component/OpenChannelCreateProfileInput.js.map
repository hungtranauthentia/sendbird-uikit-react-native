{"version":3,"names":["React","Avatar","Box","PressBox","TextInput","createStyleSheet","useBottomSheet","useToast","useUIKitTheme","Icon","ifThenOr","useSafeAreaPadding","useLocalization","usePlatformService","SBUError","SBUUtils","OpenChannelCreateProfileInput","_ref","channelName","channelCoverFile","onChangeChannelName","onChangeChannelCoverFile","toast","openSheet","palette","colors","typography","safeArea","STRINGS","fileService","onPressPhotoButton","sheetItems","title","OPEN_CHANNEL_CREATE","DIALOG_IMAGE_MENU_CAMERA","onPress","mediaFile","openCamera","mediaType","onOpenFailure","error","code","CODE","ERR_PERMISSIONS_DENIED","alert","DIALOG","ALERT_PERMISSIONS_TITLE","message","ALERT_PERMISSIONS_MESSAGE","LABELS","PERMISSION_CAMERA","PERMISSION_APP_NAME","buttons","text","ALERT_PERMISSIONS_OK","openSettings","show","TOAST","OPEN_CAMERA_ERROR","DIALOG_IMAGE_MENU_PHOTO_LIBRARY","mediaFiles","openMediaLibrary","selectionLimit","PERMISSION_DEVICE_STORAGE","OPEN_PHOTO_LIBRARY_ERROR","unshift","DIALOG_IMAGE_MENU_REMOVE","titleColor","undefined","createElement","flexDirection","paddingVertical","paddingLeft","paddingRight","style","styles","coverButton","activeOpacity","Boolean","size","uri","icon","borderBottomColor","onBackground04","inputContainer","placeholder","PLACEHOLDER","subtitle1","input","backgroundColor","transparent","value","onChangeText","length","removeButtonContainer","color","onBackground03","marginRight","flex","alignItems","borderBottomWidth","paddingTop","paddingBottom","justifyContent","marginLeft"],"sources":["OpenChannelCreateProfileInput.tsx"],"sourcesContent":["import React from 'react';\n\nimport {\n  Avatar,\n  BottomSheetItem,\n  Box,\n  PressBox,\n  TextInput,\n  createStyleSheet,\n  useBottomSheet,\n  useToast,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport Icon from '@sendbird/uikit-react-native-foundation/src/components/Icon';\nimport { ifThenOr, useSafeAreaPadding } from '@sendbird/uikit-utils';\n\nimport { useLocalization, usePlatformService } from '../../../hooks/useContext';\nimport SBUError from '../../../libs/SBUError';\nimport SBUUtils from '../../../libs/SBUUtils';\nimport type { OpenChannelCreateProps } from '../types';\n\nconst OpenChannelCreateProfileInput = ({\n  channelName,\n  channelCoverFile,\n  onChangeChannelName,\n  onChangeChannelCoverFile,\n}: OpenChannelCreateProps['ProfileInput']) => {\n  const toast = useToast();\n  const { openSheet } = useBottomSheet();\n  const { palette, colors, typography } = useUIKitTheme();\n  const safeArea = useSafeAreaPadding(['left', 'right']);\n\n  const { STRINGS } = useLocalization();\n  const { fileService } = usePlatformService();\n\n  const onPressPhotoButton = () => {\n    const sheetItems: BottomSheetItem['sheetItems'] = [\n      {\n        title: STRINGS.OPEN_CHANNEL_CREATE.DIALOG_IMAGE_MENU_CAMERA,\n        onPress: async () => {\n          const mediaFile = await fileService.openCamera({\n            mediaType: 'photo',\n            onOpenFailure: (error) => {\n              if (error.code === SBUError.CODE.ERR_PERMISSIONS_DENIED) {\n                alert({\n                  title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n                  message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n                    STRINGS.LABELS.PERMISSION_CAMERA,\n                    STRINGS.LABELS.PERMISSION_APP_NAME,\n                  ),\n                  buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n                });\n              } else {\n                toast.show(STRINGS.TOAST.OPEN_CAMERA_ERROR, 'error');\n              }\n            },\n          });\n\n          if (mediaFile) onChangeChannelCoverFile(mediaFile);\n        },\n      },\n      {\n        title: STRINGS.OPEN_CHANNEL_CREATE.DIALOG_IMAGE_MENU_PHOTO_LIBRARY,\n        onPress: async () => {\n          const mediaFiles = await fileService.openMediaLibrary({\n            selectionLimit: 1,\n            mediaType: 'photo',\n            onOpenFailure: (error) => {\n              if (error.code === SBUError.CODE.ERR_PERMISSIONS_DENIED) {\n                alert({\n                  title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n                  message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n                    STRINGS.LABELS.PERMISSION_DEVICE_STORAGE,\n                    STRINGS.LABELS.PERMISSION_APP_NAME,\n                  ),\n                  buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n                });\n              } else {\n                toast.show(STRINGS.TOAST.OPEN_PHOTO_LIBRARY_ERROR, 'error');\n              }\n            },\n          });\n          if (mediaFiles?.[0]) onChangeChannelCoverFile(mediaFiles[0]);\n        },\n      },\n    ];\n\n    if (channelCoverFile) {\n      sheetItems.unshift({\n        title: STRINGS.OPEN_CHANNEL_CREATE.DIALOG_IMAGE_MENU_REMOVE,\n        titleColor: colors.error,\n        onPress: () => {\n          onChangeChannelCoverFile(undefined);\n        },\n      });\n    }\n\n    openSheet({ sheetItems });\n  };\n\n  return (\n    <Box\n      flexDirection={'row'}\n      paddingVertical={16}\n      paddingLeft={16 + safeArea.paddingLeft}\n      paddingRight={16 + safeArea.paddingRight}\n    >\n      <PressBox onPress={onPressPhotoButton} style={styles.coverButton} activeOpacity={0.8}>\n        {ifThenOr(\n          Boolean(channelCoverFile),\n          <Avatar size={72} uri={channelCoverFile?.uri} />,\n          <Avatar.Icon size={72} icon={'camera'} />,\n        )}\n      </PressBox>\n      <Box borderBottomColor={colors.onBackground04} style={styles.inputContainer}>\n        <TextInput\n          placeholder={STRINGS.OPEN_CHANNEL_CREATE.PLACEHOLDER}\n          style={[typography.subtitle1, styles.input, { backgroundColor: palette.transparent }]}\n          value={channelName}\n          onChangeText={onChangeChannelName}\n        />\n\n        {channelName.length > 0 && (\n          <PressBox onPress={() => onChangeChannelName('')} style={styles.removeButtonContainer}>\n            <Icon color={colors.onBackground03} size={22} icon={'remove'} />\n          </PressBox>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nconst styles = createStyleSheet({\n  coverButton: {\n    marginRight: 20,\n  },\n  inputContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderBottomWidth: 1,\n  },\n  input: {\n    flex: 1,\n    paddingLeft: 0,\n    paddingRight: 0,\n    paddingTop: 0,\n    paddingBottom: 0,\n  },\n  removeButtonContainer: {\n    alignItems: 'flex-end',\n    justifyContent: 'center',\n    marginLeft: 8,\n  },\n});\n\nexport default OpenChannelCreateProfileInput;\n"],"mappings":"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"}