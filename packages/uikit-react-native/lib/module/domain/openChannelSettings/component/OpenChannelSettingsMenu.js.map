{"version":3,"names":["React","useContext","View","useChannelHandler","Icon","MenuBar","useAlert","useUIKitTheme","isDifferentChannel","useForceUpdate","useUniqHandlerId","UNKNOWN_USER_ID","useLocalization","useSendbirdChat","OpenChannelSettingsContexts","OpenChannelSettingsMenu","_ref","onPressMenuModeration","onPressMenuParticipants","onPressMenuDeleteChannel","menuItemsCreator","menu","currentUser","sdk","channel","Fragment","STRINGS","colors","alert","forceUpdate","handlerId","onChannelUpdated","eventChannel","onChannelChanged","onChannelParticipantCountChanged","menuItems","icon","visible","isOperator","userId","name","OPEN_CHANNEL_SETTINGS","MENU_MODERATION","onPress","actionItem","createElement","color","onBackground01","MENU_PARTICIPANTS","actionLabel","String","participantCount","iconColor","error","MENU_DELETE_CHANNEL","title","DIALOG_CHANNEL_DELETE_CONFIRM_TITLE","buttons","text","DIALOG_CHANNEL_DELETE_CONFIRM_CANCEL","DIALOG_CHANNEL_DELETE_CONFIRM_OK","style","delete","then","map","key","disabled","iconBackgroundColor"],"sources":["OpenChannelSettingsMenu.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { View } from 'react-native';\n\nimport { useChannelHandler } from '@sendbird/uikit-chat-hooks';\nimport type { MenuBarProps } from '@sendbird/uikit-react-native-foundation';\nimport { Icon, MenuBar, useAlert, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport { SendbirdBaseChannel, isDifferentChannel, useForceUpdate, useUniqHandlerId } from '@sendbird/uikit-utils';\n\nimport { UNKNOWN_USER_ID } from '../../../constants';\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport { OpenChannelSettingsContexts } from '../module/moduleContext';\nimport type { OpenChannelSettingsProps } from '../types';\n\nconst OpenChannelSettingsMenu = ({\n  onPressMenuModeration,\n  onPressMenuParticipants,\n  onPressMenuDeleteChannel,\n  menuItemsCreator = (menu) => menu,\n}: OpenChannelSettingsProps['Menu']) => {\n  const { currentUser, sdk } = useSendbirdChat();\n  const { channel } = useContext(OpenChannelSettingsContexts.Fragment);\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n  const { alert } = useAlert();\n\n  const forceUpdate = useForceUpdate();\n  const handlerId = useUniqHandlerId('OpenChannelSettingsMenu');\n\n  const onChannelUpdated = (eventChannel: SendbirdBaseChannel) => {\n    if (isDifferentChannel(channel, eventChannel)) return;\n    forceUpdate();\n  };\n\n  useChannelHandler(\n    sdk,\n    handlerId,\n    {\n      onChannelChanged: onChannelUpdated,\n      onChannelParticipantCountChanged: onChannelUpdated,\n    },\n    'open',\n  );\n\n  const menuItems: MenuBarProps[] = menuItemsCreator([\n    {\n      icon: 'moderation',\n      visible: channel.isOperator(currentUser?.userId ?? UNKNOWN_USER_ID),\n      name: STRINGS.OPEN_CHANNEL_SETTINGS.MENU_MODERATION,\n      onPress: () => onPressMenuModeration(),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n    {\n      icon: 'members',\n      name: STRINGS.OPEN_CHANNEL_SETTINGS.MENU_PARTICIPANTS,\n      onPress: () => onPressMenuParticipants(),\n      actionLabel: String(channel.participantCount),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n    {\n      icon: 'leave',\n      iconColor: colors.error,\n      name: STRINGS.OPEN_CHANNEL_SETTINGS.MENU_DELETE_CHANNEL,\n      onPress: () => {\n        alert({\n          title: STRINGS.OPEN_CHANNEL_SETTINGS.DIALOG_CHANNEL_DELETE_CONFIRM_TITLE,\n          buttons: [\n            {\n              text: STRINGS.OPEN_CHANNEL_SETTINGS.DIALOG_CHANNEL_DELETE_CONFIRM_CANCEL,\n            },\n            {\n              text: STRINGS.OPEN_CHANNEL_SETTINGS.DIALOG_CHANNEL_DELETE_CONFIRM_OK,\n              style: 'destructive',\n              onPress: () => {\n                channel.delete().then(() => onPressMenuDeleteChannel());\n              },\n            },\n          ],\n        });\n      },\n    },\n  ]);\n\n  return (\n    <View>\n      {menuItems.map((menu) => {\n        return (\n          <MenuBar\n            key={menu.name}\n            onPress={menu.onPress}\n            name={menu.name}\n            disabled={menu.disabled}\n            visible={menu.visible}\n            icon={menu.icon}\n            iconColor={menu.iconColor}\n            iconBackgroundColor={menu.iconBackgroundColor}\n            actionLabel={menu.actionLabel}\n            actionItem={menu.actionItem}\n          />\n        );\n      })}\n    </View>\n  );\n};\n\nexport default OpenChannelSettingsMenu;\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,SAASC,IAAI,QAAQ,cAAc;AAEnC,SAASC,iBAAiB,QAAQ,4BAA4B;AAE9D,SAASC,IAAI,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,aAAa,QAAQ,yCAAyC;AAChG,SAA8BC,kBAAkB,EAAEC,cAAc,EAAEC,gBAAgB,QAAQ,uBAAuB;AAEjH,SAASC,eAAe,QAAQ,oBAAoB;AACpD,SAASC,eAAe,EAAEC,eAAe,QAAQ,2BAA2B;AAC5E,SAASC,2BAA2B,QAAQ,yBAAyB;AAGrE,MAAMC,uBAAuB,GAAGC,IAAA,IAKQ;EAAA,IALP;IAC/BC,qBAAqB;IACrBC,uBAAuB;IACvBC,wBAAwB;IACxBC,gBAAgB,GAAIC,IAAI,IAAKA;EACG,CAAC,GAAAL,IAAA;EACjC,MAAM;IAAEM,WAAW;IAAEC;EAAI,CAAC,GAAGV,eAAe,EAAE;EAC9C,MAAM;IAAEW;EAAQ,CAAC,GAAGvB,UAAU,CAACa,2BAA2B,CAACW,QAAQ,CAAC;EACpE,MAAM;IAAEC;EAAQ,CAAC,GAAGd,eAAe,EAAE;EACrC,MAAM;IAAEe;EAAO,CAAC,GAAGpB,aAAa,EAAE;EAClC,MAAM;IAAEqB;EAAM,CAAC,GAAGtB,QAAQ,EAAE;EAE5B,MAAMuB,WAAW,GAAGpB,cAAc,EAAE;EACpC,MAAMqB,SAAS,GAAGpB,gBAAgB,CAAC,yBAAyB,CAAC;EAE7D,MAAMqB,gBAAgB,GAAIC,YAAiC,IAAK;IAC9D,IAAIxB,kBAAkB,CAACgB,OAAO,EAAEQ,YAAY,CAAC,EAAE;IAC/CH,WAAW,EAAE;EACf,CAAC;EAED1B,iBAAiB,CACfoB,GAAG,EACHO,SAAS,EACT;IACEG,gBAAgB,EAAEF,gBAAgB;IAClCG,gCAAgC,EAAEH;EACpC,CAAC,EACD,MAAM,CACP;EAED,MAAMI,SAAyB,GAAGf,gBAAgB,CAAC,CACjD;IACEgB,IAAI,EAAE,YAAY;IAClBC,OAAO,EAAEb,OAAO,CAACc,UAAU,CAAC,CAAAhB,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEiB,MAAM,KAAI5B,eAAe,CAAC;IACnE6B,IAAI,EAAEd,OAAO,CAACe,qBAAqB,CAACC,eAAe;IACnDC,OAAO,EAAEA,CAAA,KAAM1B,qBAAqB,EAAE;IACtC2B,UAAU,eAAE5C,KAAA,CAAA6C,aAAA,CAACzC,IAAI;MAACgC,IAAI,EAAE,eAAgB;MAACU,KAAK,EAAEnB,MAAM,CAACoB;IAAe;EACxE,CAAC,EACD;IACEX,IAAI,EAAE,SAAS;IACfI,IAAI,EAAEd,OAAO,CAACe,qBAAqB,CAACO,iBAAiB;IACrDL,OAAO,EAAEA,CAAA,KAAMzB,uBAAuB,EAAE;IACxC+B,WAAW,EAAEC,MAAM,CAAC1B,OAAO,CAAC2B,gBAAgB,CAAC;IAC7CP,UAAU,eAAE5C,KAAA,CAAA6C,aAAA,CAACzC,IAAI;MAACgC,IAAI,EAAE,eAAgB;MAACU,KAAK,EAAEnB,MAAM,CAACoB;IAAe;EACxE,CAAC,EACD;IACEX,IAAI,EAAE,OAAO;IACbgB,SAAS,EAAEzB,MAAM,CAAC0B,KAAK;IACvBb,IAAI,EAAEd,OAAO,CAACe,qBAAqB,CAACa,mBAAmB;IACvDX,OAAO,EAAEA,CAAA,KAAM;MACbf,KAAK,CAAC;QACJ2B,KAAK,EAAE7B,OAAO,CAACe,qBAAqB,CAACe,mCAAmC;QACxEC,OAAO,EAAE,CACP;UACEC,IAAI,EAAEhC,OAAO,CAACe,qBAAqB,CAACkB;QACtC,CAAC,EACD;UACED,IAAI,EAAEhC,OAAO,CAACe,qBAAqB,CAACmB,gCAAgC;UACpEC,KAAK,EAAE,aAAa;UACpBlB,OAAO,EAAEA,CAAA,KAAM;YACbnB,OAAO,CAACsC,MAAM,EAAE,CAACC,IAAI,CAAC,MAAM5C,wBAAwB,EAAE,CAAC;UACzD;QACF,CAAC;MAEL,CAAC,CAAC;IACJ;EACF,CAAC,CACF,CAAC;EAEF,oBACEnB,KAAA,CAAA6C,aAAA,CAAC3C,IAAI,QACFiC,SAAS,CAAC6B,GAAG,CAAE3C,IAAI,IAAK;IACvB,oBACErB,KAAA,CAAA6C,aAAA,CAACxC,OAAO;MACN4D,GAAG,EAAE5C,IAAI,CAACmB,IAAK;MACfG,OAAO,EAAEtB,IAAI,CAACsB,OAAQ;MACtBH,IAAI,EAAEnB,IAAI,CAACmB,IAAK;MAChB0B,QAAQ,EAAE7C,IAAI,CAAC6C,QAAS;MACxB7B,OAAO,EAAEhB,IAAI,CAACgB,OAAQ;MACtBD,IAAI,EAAEf,IAAI,CAACe,IAAK;MAChBgB,SAAS,EAAE/B,IAAI,CAAC+B,SAAU;MAC1Be,mBAAmB,EAAE9C,IAAI,CAAC8C,mBAAoB;MAC9ClB,WAAW,EAAE5B,IAAI,CAAC4B,WAAY;MAC9BL,UAAU,EAAEvB,IAAI,CAACuB;IAAW,EAC5B;EAEN,CAAC,CAAC,CACG;AAEX,CAAC;AAED,eAAe7B,uBAAuB"}