{"version":3,"names":["React","useLayoutEffect","useMemo","useRef","useState","Platform","SafeAreaProvider","SendbirdChat","DeviceOsPlatform","SendbirdPlatform","SendbirdProduct","GroupChannelModule","OpenChannelModule","DialogProvider","Header","HeaderStyleProvider","LightUIKitTheme","ToastProvider","UIKitThemeProvider","UIKitConfigProvider","NOOP","useIsFirstMount","LocalizationContext","LocalizationProvider","PlatformServiceProvider","ReactionProvider","SendbirdChatProvider","UserProfileProvider","EmojiManager","ImageCompressionConfig","InternalLocalCacheStorage","MentionConfig","MentionManager","VoiceMessageConfig","StringSetEn","SBUDynamicModule","VERSION","InternalErrorBoundaryContainer","NetInfo","get","SendbirdUIKit","Object","freeze","PLATFORM","OS","toLowerCase","DEFAULT","AUTO_PUSH_TOKEN_REGISTRATION","USE_USER_ID_FOR_NICKNAME","IMAGE_COMPRESSION","chatOmitKeys","sanitizeChatOptions","chatOptions","opts","forEach","key","SendbirdUIKitContainer","props","children","appId","uikitOptions","platformServices","localization","styles","errorBoundary","toast","userProfile","reaction","localCacheStorage","Error","defaultStringSet","stringSet","isFirstMount","unsubscribes","internalStorage","sdkInstance","setSdkInstance","sendbird","initializeSendbird","current","chatSDK","imageCompressionConfig","voiceMessageConfig","mentionConfig","useConfigInstance","emojiManager","mentionManager","u","renderChildren","disabled","createElement","storage","localConfigs","common","groupChannel","channel","enableReactionsSupergroup","undefined","channelList","groupChannelList","setting","groupChannelSettings","openChannel","enableAutoPushTokenRegistration","enableUseUserIdForNickname","enableImageCompression","fileService","file","notificationService","notification","clipboardService","clipboard","mediaService","media","playerService","player","recorderService","recorder","theme","HeaderComponent","defaultTitleAlign","defaultHeaderTitleAlign","statusBarTranslucent","dismissTimeout","_extends","Consumer","value","STRINGS","defaultLabels","alert","ok","DIALOG","ALERT_DEFAULT_OK","prompt","PROMPT_DEFAULT_OK","cancel","PROMPT_DEFAULT_CANCEL","placeholder","PROMPT_DEFAULT_PLACEHOLDER","options","onInitialized","chatInitParams","init","newInstance","modules","localCacheEnabled","useAsyncStorageStore","platform","getDeviceOSPlatform","deviceOSInfo","version","String","Version","customData","platform_version","getReactNativeVersion","uikitExtension","product","UIKIT_CHAT","REACT_NATIVE","addSendbirdExtensions","addExtension","addEventListener","_chatSDK$setOnlineLis","_chatSDK","_chatSDK$setOfflineLi","_chatSDK2","listener","callback","callbackType","callCount","unsubscribe","state","online","Boolean","isConnected","isInternetReachable","push","setOnlineListener","call","onOnline","setOfflineListener","onOffline","ANDROID","IOS","WEB","WINDOWS","major","minor","patch","constants","reactNativeVersion","_ref","_voiceMessage$recorde3","_voiceMessage$recorde4","imageCompression","userMention","voiceMessage","mentionLimit","MENTION_LIMIT","suggestionLimit","SUGGESTION_LIMIT","debounceMills","DEBOUNCE_MILLS","delimiter","DELIMITER","trigger","TRIGGER","compressionRate","COMPRESSION_RATE","width","height","_voiceMessage$recorde","_voiceMessage$recorde2","minDuration","RECORDER","MIN_DURATION","maxDuration","MAX_DURATION"],"sources":["SendbirdUIKitContainer.tsx"],"sourcesContent":["import React, { useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { Platform } from 'react-native';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\n\nimport SendbirdChat, { DeviceOsPlatform, SendbirdChatParams, SendbirdPlatform, SendbirdProduct } from '@sendbird/chat';\nimport { GroupChannelModule } from '@sendbird/chat/groupChannel';\nimport { OpenChannelModule } from '@sendbird/chat/openChannel';\nimport type { HeaderStyleContextType, UIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport {\n  DialogProvider,\n  Header,\n  HeaderStyleProvider,\n  LightUIKitTheme,\n  ToastProvider,\n  UIKitThemeProvider,\n} from '@sendbird/uikit-react-native-foundation';\nimport { SBUConfig, UIKitConfigProvider } from '@sendbird/uikit-tools';\nimport type {\n  PartialDeep,\n  SendbirdChatSDK,\n  SendbirdGroupChannel,\n  SendbirdGroupChannelCreateParams,\n  SendbirdMember,\n  SendbirdUser,\n} from '@sendbird/uikit-utils';\nimport { NOOP, useIsFirstMount } from '@sendbird/uikit-utils';\n\nimport { LocalizationContext, LocalizationProvider } from '../contexts/LocalizationCtx';\nimport { PlatformServiceProvider } from '../contexts/PlatformServiceCtx';\nimport { ReactionProvider } from '../contexts/ReactionCtx';\nimport type { ChatRelatedFeaturesInUIKit } from '../contexts/SendbirdChatCtx';\nimport { SendbirdChatProvider } from '../contexts/SendbirdChatCtx';\nimport { UserProfileProvider } from '../contexts/UserProfileCtx';\nimport EmojiManager from '../libs/EmojiManager';\nimport type { ImageCompressionConfigInterface } from '../libs/ImageCompressionConfig';\nimport ImageCompressionConfig from '../libs/ImageCompressionConfig';\nimport InternalLocalCacheStorage from '../libs/InternalLocalCacheStorage';\nimport MentionConfig, { MentionConfigInterface } from '../libs/MentionConfig';\nimport MentionManager from '../libs/MentionManager';\nimport VoiceMessageConfig, { VoiceMessageConfigInterface } from '../libs/VoiceMessageConfig';\nimport StringSetEn from '../localization/StringSet.en';\nimport type { StringSet } from '../localization/StringSet.type';\nimport SBUDynamicModule from '../platform/dynamicModule';\nimport type {\n  ClipboardServiceInterface,\n  FileServiceInterface,\n  MediaServiceInterface,\n  NotificationServiceInterface,\n  PlayerServiceInterface,\n  RecorderServiceInterface,\n} from '../platform/types';\nimport type { ErrorBoundaryProps, LocalCacheStorage } from '../types';\nimport VERSION from '../version';\nimport InternalErrorBoundaryContainer from './InternalErrorBoundaryContainer';\n\nconst NetInfo = SBUDynamicModule.get('@react-native-community/netinfo', 'warn');\nexport const SendbirdUIKit = Object.freeze({\n  VERSION,\n  PLATFORM: Platform.OS.toLowerCase(),\n  DEFAULT: {\n    AUTO_PUSH_TOKEN_REGISTRATION: true,\n    USE_USER_ID_FOR_NICKNAME: false,\n    IMAGE_COMPRESSION: true,\n  },\n});\n\ntype UnimplementedFeatures = 'threadReplySelectType' | 'replyType' | 'enableReactionsSupergroup';\nexport type ChatOmittedInitParams = Omit<\n  SendbirdChatParams<[GroupChannelModule, OpenChannelModule]>,\n  (typeof chatOmitKeys)[number]\n>;\n\nconst chatOmitKeys = [\n  'appId',\n  'newInstance',\n  'modules',\n  'debugMode',\n  'appVersion',\n  'localCacheEnabled',\n  'useAsyncStorageStore',\n] as const;\nfunction sanitizeChatOptions<T extends Record<string, unknown>>(chatOptions: T): T {\n  const opts = { ...chatOptions };\n  chatOmitKeys.forEach((key) => delete opts[key]);\n  return opts;\n}\n\nexport type SendbirdUIKitContainerProps = React.PropsWithChildren<{\n  appId: string;\n  platformServices: {\n    file: FileServiceInterface;\n    notification: NotificationServiceInterface;\n    clipboard: ClipboardServiceInterface;\n    media: MediaServiceInterface;\n    player: PlayerServiceInterface;\n    recorder: RecorderServiceInterface;\n  };\n  chatOptions: {\n    localCacheStorage: LocalCacheStorage;\n    onInitialized?: (sdkInstance: SendbirdChatSDK) => SendbirdChatSDK;\n  } & Partial<ChatOmittedInitParams> &\n    Partial<ChatRelatedFeaturesInUIKit>;\n  uikitOptions?: PartialDeep<{\n    common: SBUConfig['common'];\n    groupChannel: Omit<SBUConfig['groupChannel']['channel'], UnimplementedFeatures> & {\n      replyType: Extract<SBUConfig['groupChannel']['channel']['replyType'], 'none' | 'quote_reply'>;\n      /**\n       * @deprecated Currently, this feature is turned off by default. If you wish to use this feature, contact us: {@link https://dashboard.sendbird.com/settings/contact_us?category=feedback_and_feature_requests&product=UIKit}\n       */\n      enableReactionsSupergroup: never;\n    };\n    groupChannelList: SBUConfig['groupChannel']['channelList'];\n    groupChannelSettings: SBUConfig['groupChannel']['setting'];\n    openChannel: SBUConfig['openChannel']['channel'];\n  }>;\n  localization?: {\n    stringSet?: StringSet;\n  };\n  styles?: {\n    theme?: UIKitTheme;\n    statusBarTranslucent?: boolean;\n    defaultHeaderTitleAlign?: 'left' | 'center';\n    defaultHeaderHeight?: number;\n    HeaderComponent?: HeaderStyleContextType['HeaderComponent'];\n  };\n  errorBoundary?: {\n    disabled?: boolean;\n    onError?: (props: ErrorBoundaryProps) => void;\n    ErrorInfoComponent?: (props: ErrorBoundaryProps) => React.ReactNode;\n  };\n  toast?: {\n    dismissTimeout?: number;\n  };\n  userProfile?: {\n    onCreateChannel: (channel: SendbirdGroupChannel) => void;\n    onBeforeCreateChannel?: (\n      channelParams: SendbirdGroupChannelCreateParams,\n      users: SendbirdUser[] | SendbirdMember[],\n    ) => SendbirdGroupChannelCreateParams | Promise<SendbirdGroupChannelCreateParams>;\n  };\n  reaction?: {\n    onPressUserProfile?: (user: SendbirdUser | SendbirdMember) => void;\n  };\n  userMention?: Pick<Partial<MentionConfigInterface>, 'mentionLimit' | 'suggestionLimit' | 'debounceMills'>;\n  imageCompression?: Partial<ImageCompressionConfigInterface>;\n  voiceMessage?: PartialDeep<VoiceMessageConfigInterface>;\n}>;\n\nconst SendbirdUIKitContainer = (props: SendbirdUIKitContainerProps) => {\n  const {\n    children,\n    appId,\n    chatOptions,\n    uikitOptions,\n    platformServices,\n    localization,\n    styles,\n    errorBoundary,\n    toast,\n    userProfile,\n    reaction,\n  } = props;\n\n  if (!chatOptions.localCacheStorage) {\n    throw new Error('SendbirdUIKitContainer: chatOptions.localCacheStorage is required');\n  }\n\n  const defaultStringSet = localization?.stringSet ?? StringSetEn;\n\n  const isFirstMount = useIsFirstMount();\n  const unsubscribes = useRef<Array<() => void>>([]);\n\n  const [internalStorage] = useState(() => new InternalLocalCacheStorage(chatOptions.localCacheStorage));\n  const [sdkInstance, setSdkInstance] = useState<SendbirdChatSDK>(() => {\n    const sendbird = initializeSendbird(appId, { internalStorage, ...sanitizeChatOptions(chatOptions) });\n    unsubscribes.current = sendbird.unsubscribes;\n    return sendbird.chatSDK;\n  });\n\n  const { imageCompressionConfig, voiceMessageConfig, mentionConfig } = useConfigInstance(props);\n  const emojiManager = useMemo(() => new EmojiManager(internalStorage), [internalStorage]);\n  const mentionManager = useMemo(() => new MentionManager(mentionConfig), [mentionConfig]);\n\n  useLayoutEffect(() => {\n    if (!isFirstMount) {\n      const sendbird = initializeSendbird(appId, { internalStorage, ...sanitizeChatOptions(chatOptions) });\n      setSdkInstance(sendbird.chatSDK);\n      unsubscribes.current = sendbird.unsubscribes;\n    }\n\n    return () => {\n      unsubscribes.current.forEach((u) => {\n        try {\n          u();\n        } catch {}\n      });\n    };\n  }, [appId, internalStorage]);\n\n  const renderChildren = () => {\n    if (errorBoundary?.disabled) {\n      return children;\n    } else {\n      return <InternalErrorBoundaryContainer {...errorBoundary}>{children}</InternalErrorBoundaryContainer>;\n    }\n  };\n\n  return (\n    <SafeAreaProvider>\n      <UIKitConfigProvider\n        storage={internalStorage}\n        localConfigs={{\n          common: uikitOptions?.common,\n          groupChannel: {\n            channel: { ...uikitOptions?.groupChannel, enableReactionsSupergroup: undefined },\n            channelList: uikitOptions?.groupChannelList,\n            setting: uikitOptions?.groupChannelSettings,\n          },\n          openChannel: {\n            channel: uikitOptions?.openChannel,\n          },\n        }}\n      >\n        <SendbirdChatProvider\n          sdkInstance={sdkInstance}\n          emojiManager={emojiManager}\n          mentionManager={mentionManager}\n          imageCompressionConfig={imageCompressionConfig}\n          voiceMessageConfig={voiceMessageConfig}\n          enableAutoPushTokenRegistration={\n            chatOptions.enableAutoPushTokenRegistration ?? SendbirdUIKit.DEFAULT.AUTO_PUSH_TOKEN_REGISTRATION\n          }\n          enableUseUserIdForNickname={\n            chatOptions.enableUseUserIdForNickname ?? SendbirdUIKit.DEFAULT.USE_USER_ID_FOR_NICKNAME\n          }\n          enableImageCompression={chatOptions.enableImageCompression ?? SendbirdUIKit.DEFAULT.IMAGE_COMPRESSION}\n        >\n          <LocalizationProvider stringSet={defaultStringSet}>\n            <PlatformServiceProvider\n              fileService={platformServices.file}\n              notificationService={platformServices.notification}\n              clipboardService={platformServices.clipboard}\n              mediaService={platformServices.media}\n              playerService={platformServices.player}\n              recorderService={platformServices.recorder}\n              voiceMessageConfig={voiceMessageConfig}\n            >\n              <UIKitThemeProvider theme={styles?.theme ?? LightUIKitTheme}>\n                <HeaderStyleProvider\n                  HeaderComponent={styles?.HeaderComponent ?? Header}\n                  defaultTitleAlign={styles?.defaultHeaderTitleAlign ?? 'left'}\n                  statusBarTranslucent={styles?.statusBarTranslucent ?? true}\n                >\n                  <ToastProvider dismissTimeout={toast?.dismissTimeout}>\n                    <UserProfileProvider {...userProfile} statusBarTranslucent={styles?.statusBarTranslucent ?? true}>\n                      <ReactionProvider {...reaction}>\n                        <LocalizationContext.Consumer>\n                          {(value) => {\n                            const STRINGS = value?.STRINGS || defaultStringSet;\n                            return (\n                              <DialogProvider\n                                defaultLabels={{\n                                  alert: { ok: STRINGS.DIALOG.ALERT_DEFAULT_OK },\n                                  prompt: {\n                                    ok: STRINGS.DIALOG.PROMPT_DEFAULT_OK,\n                                    cancel: STRINGS.DIALOG.PROMPT_DEFAULT_CANCEL,\n                                    placeholder: STRINGS.DIALOG.PROMPT_DEFAULT_PLACEHOLDER,\n                                  },\n                                }}\n                              >\n                                {renderChildren()}\n                              </DialogProvider>\n                            );\n                          }}\n                        </LocalizationContext.Consumer>\n                      </ReactionProvider>\n                    </UserProfileProvider>\n                  </ToastProvider>\n                </HeaderStyleProvider>\n              </UIKitThemeProvider>\n            </PlatformServiceProvider>\n          </LocalizationProvider>\n        </SendbirdChatProvider>\n      </UIKitConfigProvider>\n    </SafeAreaProvider>\n  );\n};\n\ninterface InitOptions extends ChatOmittedInitParams {\n  internalStorage: InternalLocalCacheStorage;\n  onInitialized?: (sdk: SendbirdChatSDK) => SendbirdChatSDK;\n}\nconst initializeSendbird = (appId: string, options: InitOptions) => {\n  let chatSDK: SendbirdChatSDK;\n  const unsubscribes: Array<() => void> = [];\n  const { internalStorage, onInitialized, ...chatInitParams } = options;\n\n  chatSDK = SendbirdChat.init({\n    ...chatInitParams,\n    appId,\n    newInstance: true,\n    modules: [new GroupChannelModule(), new OpenChannelModule()],\n    localCacheEnabled: true,\n    useAsyncStorageStore: internalStorage as never,\n  });\n\n  if (onInitialized) {\n    chatSDK = onInitialized(chatSDK);\n  }\n\n  const platform = getDeviceOSPlatform();\n  if (SendbirdUIKit.VERSION && platform) {\n    const deviceOSInfo = { platform, version: String(Platform.Version) };\n    const customData = { platform_version: getReactNativeVersion() };\n    const uikitExtension = {\n      product: SendbirdProduct.UIKIT_CHAT,\n      version: SendbirdUIKit.VERSION,\n      platform: SendbirdPlatform.REACT_NATIVE,\n    };\n\n    chatSDK.addSendbirdExtensions([uikitExtension], deviceOSInfo, customData);\n    chatSDK.addExtension('sb_uikit', SendbirdUIKit.VERSION);\n  }\n\n  if (SendbirdUIKit.PLATFORM) {\n    chatSDK.addExtension('device-os-platform', SendbirdUIKit.PLATFORM);\n  }\n\n  if (NetInfo?.addEventListener) {\n    try {\n      // NOTE: For removing buggy behavior of NetInfo.addEventListener\n      //  When you first add an event listener, it is assumed that the initialization of the internal event detector is done simultaneously.\n      //  In other words, when you call the first event listener two events are triggered immediately\n      //   - the one that is called when adding the event listener\n      //   - and the internal initialization event\n      NetInfo.addEventListener(NOOP)();\n    } catch {}\n\n    const listener = (callback: () => void, callbackType: 'online' | 'offline') => {\n      let callCount = 0;\n      const unsubscribe = NetInfo.addEventListener((state) => {\n        const online = Boolean(state.isConnected) || Boolean(state.isInternetReachable);\n\n        // NOTE: When NetInfo.addEventListener is called\n        //  the event is immediately triggered regardless of whether the event actually occurred.\n        //  This is why it filters the first event.\n        if (callCount === 0) {\n          callCount++;\n          return;\n        }\n\n        if (online && callbackType === 'online') callback();\n        if (!online && callbackType === 'offline') callback();\n      });\n      unsubscribes.push(unsubscribe);\n      return unsubscribe;\n    };\n    chatSDK.setOnlineListener?.((onOnline) => listener(onOnline, 'online'));\n    chatSDK.setOfflineListener?.((onOffline) => listener(onOffline, 'offline'));\n  }\n  return { chatSDK, unsubscribes };\n};\n\nfunction getDeviceOSPlatform() {\n  switch (Platform.OS) {\n    case 'android':\n      return DeviceOsPlatform.ANDROID;\n    case 'ios':\n      return DeviceOsPlatform.IOS;\n    case 'web':\n      return DeviceOsPlatform.WEB;\n    case 'windows':\n      return DeviceOsPlatform.WINDOWS;\n    default:\n      return undefined;\n  }\n}\n\nfunction getReactNativeVersion() {\n  const { major, minor, patch } = Platform.constants.reactNativeVersion;\n  return `${major}.${minor}.${patch}`;\n}\n\nconst useConfigInstance = ({ imageCompression, userMention, voiceMessage }: SendbirdUIKitContainerProps) => {\n  const mentionConfig = useMemo(() => {\n    return new MentionConfig({\n      mentionLimit: userMention?.mentionLimit || MentionConfig.DEFAULT.MENTION_LIMIT,\n      suggestionLimit: userMention?.suggestionLimit || MentionConfig.DEFAULT.SUGGESTION_LIMIT,\n      debounceMills: userMention?.debounceMills ?? MentionConfig.DEFAULT.DEBOUNCE_MILLS,\n      delimiter: MentionConfig.DEFAULT.DELIMITER,\n      trigger: MentionConfig.DEFAULT.TRIGGER,\n    });\n  }, [userMention?.mentionLimit, userMention?.suggestionLimit, userMention?.debounceMills]);\n\n  const imageCompressionConfig = useMemo(() => {\n    return new ImageCompressionConfig({\n      compressionRate: imageCompression?.compressionRate || ImageCompressionConfig.DEFAULT.COMPRESSION_RATE,\n      width: imageCompression?.width,\n      height: imageCompression?.height,\n    });\n  }, [imageCompression?.compressionRate, imageCompression?.width, imageCompression?.height]);\n\n  const voiceMessageConfig = useMemo(() => {\n    return new VoiceMessageConfig({\n      recorder: {\n        minDuration: voiceMessage?.recorder?.minDuration ?? VoiceMessageConfig.DEFAULT.RECORDER.MIN_DURATION,\n        maxDuration: voiceMessage?.recorder?.maxDuration ?? VoiceMessageConfig.DEFAULT.RECORDER.MAX_DURATION,\n      },\n    });\n  }, [voiceMessage?.recorder?.minDuration, voiceMessage?.recorder?.maxDuration]);\n\n  return {\n    mentionConfig,\n    imageCompressionConfig,\n    voiceMessageConfig,\n  };\n};\n\nexport default SendbirdUIKitContainer;\n"],"mappings":"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"}