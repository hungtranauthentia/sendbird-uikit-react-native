{"version":3,"names":["React","useEffect","useAppState","PlatformServiceContext","createContext","PlatformServiceProvider","_ref","children","voiceMessageConfig","services","recorderService","options","minDuration","recorder","maxDuration","state","Promise","allSettled","playerService","reset","createElement","Provider","value"],"sources":["PlatformServiceCtx.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nimport { useAppState } from '@sendbird/uikit-utils';\n\nimport VoiceMessageConfig from '../libs/VoiceMessageConfig';\nimport type {\n  ClipboardServiceInterface,\n  FileServiceInterface,\n  MediaServiceInterface,\n  NotificationServiceInterface,\n  PlayerServiceInterface,\n  RecorderServiceInterface,\n} from '../platform/types';\n\nexport type PlatformServiceContextType = {\n  fileService: FileServiceInterface;\n  clipboardService: ClipboardServiceInterface;\n  notificationService: NotificationServiceInterface;\n  mediaService: MediaServiceInterface;\n  recorderService: RecorderServiceInterface;\n  playerService: PlayerServiceInterface;\n};\ntype Props = React.PropsWithChildren<PlatformServiceContextType & { voiceMessageConfig: VoiceMessageConfig }>;\n\nexport const PlatformServiceContext = React.createContext<PlatformServiceContextType | null>(null);\nexport const PlatformServiceProvider = ({ children, voiceMessageConfig, ...services }: Props) => {\n  useEffect(() => {\n    services.recorderService.options.minDuration = voiceMessageConfig.recorder.minDuration;\n    services.recorderService.options.maxDuration = voiceMessageConfig.recorder.maxDuration;\n  }, [voiceMessageConfig]);\n\n  useAppState('change', (state) => {\n    if (state !== 'active') {\n      Promise.allSettled([services.playerService.reset(), services.recorderService.reset()]);\n    }\n  });\n\n  return <PlatformServiceContext.Provider value={services}>{children}</PlatformServiceContext.Provider>;\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAExC,SAASC,WAAW,QAAQ,uBAAuB;AAsBnD,OAAO,MAAMC,sBAAsB,gBAAGH,KAAK,CAACI,aAAa,CAAoC,IAAI,CAAC;AAClG,OAAO,MAAMC,uBAAuB,GAAGC,IAAA,IAA0D;EAAA,IAAzD;IAAEC,QAAQ;IAAEC,kBAAkB;IAAE,GAAGC;EAAgB,CAAC,GAAAH,IAAA;EAC1FL,SAAS,CAAC,MAAM;IACdQ,QAAQ,CAACC,eAAe,CAACC,OAAO,CAACC,WAAW,GAAGJ,kBAAkB,CAACK,QAAQ,CAACD,WAAW;IACtFH,QAAQ,CAACC,eAAe,CAACC,OAAO,CAACG,WAAW,GAAGN,kBAAkB,CAACK,QAAQ,CAACC,WAAW;EACxF,CAAC,EAAE,CAACN,kBAAkB,CAAC,CAAC;EAExBN,WAAW,CAAC,QAAQ,EAAGa,KAAK,IAAK;IAC/B,IAAIA,KAAK,KAAK,QAAQ,EAAE;MACtBC,OAAO,CAACC,UAAU,CAAC,CAACR,QAAQ,CAACS,aAAa,CAACC,KAAK,EAAE,EAAEV,QAAQ,CAACC,eAAe,CAACS,KAAK,EAAE,CAAC,CAAC;IACxF;EACF,CAAC,CAAC;EAEF,oBAAOnB,KAAA,CAAAoB,aAAA,CAACjB,sBAAsB,CAACkB,QAAQ;IAACC,KAAK,EAAEb;EAAS,GAAEF,QAAQ,CAAmC;AACvG,CAAC"}