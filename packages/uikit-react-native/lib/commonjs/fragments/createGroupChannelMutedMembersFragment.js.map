{"version":3,"names":["_react","_interopRequireDefault","require","_uikitChatHooks","_uikitReactNativeFoundation","_uikitUtils","_StatusComposition","_UserActionBar","_groupChannelMutedMembers","_useContext","obj","__esModule","default","createGroupChannelMutedMembersFragment","initModule","GroupChannelMutedMembersModule","createGroupChannelMutedMembersModule","_ref","onPressHeaderLeft","NOOP","channel","renderUser","queryCreator","createMutedUserListQuery","limit","handlerId","useUniqHandlerId","STRINGS","useLocalization","sdk","currentUser","useSendbirdChat","openMenu","useActionMenu","users","deleteUser","upsertUser","loading","refresh","error","next","useUserList","useChannelHandler","onUserMuted","eventChannel","user","isDifferentChannel","onUserUnmuted","userId","onUserLeft","onUserBanned","_renderUser","useFreshCallback","props","createElement","muted","uri","profileUrl","name","nickname","LABELS","USER_NO_NAME","USER_BAR_ME_POSTFIX","disabled","onPressActionMenu","title","menuItems","UNMUTE","onPress","unmuteUser","then","Provider","Header","LoadingComponent","StatusLoading","Boolean","ErrorComponent","StatusError","onPressRetry","List","mutedMembers","onLoadNext","ListEmptyComponent","StatusEmpty","_default","exports"],"sources":["createGroupChannelMutedMembersFragment.tsx"],"sourcesContent":["import React from 'react';\n\nimport { useChannelHandler, useUserList } from '@sendbird/uikit-chat-hooks';\nimport { useActionMenu } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, isDifferentChannel, useFreshCallback, useUniqHandlerId } from '@sendbird/uikit-utils';\n\nimport StatusComposition from '../components/StatusComposition';\nimport UserActionBar from '../components/UserActionBar';\nimport { createGroupChannelMutedMembersModule } from '../domain/groupChannelMutedMembers';\nimport type {\n  GroupChannelMutedMembersFragment,\n  GroupChannelMutedMembersModule,\n} from '../domain/groupChannelMutedMembers/types';\nimport { useLocalization, useSendbirdChat } from '../hooks/useContext';\n\nconst createGroupChannelMutedMembersFragment = (\n  initModule?: Partial<GroupChannelMutedMembersModule>,\n): GroupChannelMutedMembersFragment => {\n  const GroupChannelMutedMembersModule = createGroupChannelMutedMembersModule(initModule);\n\n  return ({\n    onPressHeaderLeft = NOOP,\n    channel,\n    renderUser,\n    queryCreator = () => channel.createMutedUserListQuery({ limit: 20 }),\n  }) => {\n    const handlerId = useUniqHandlerId('GroupChannelMutedMembersFragment');\n\n    const { STRINGS } = useLocalization();\n    const { sdk, currentUser } = useSendbirdChat();\n    const { openMenu } = useActionMenu();\n\n    const { users, deleteUser, upsertUser, loading, refresh, error, next } = useUserList(sdk, { queryCreator });\n\n    useChannelHandler(sdk, handlerId, {\n      onUserMuted(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        upsertUser(user);\n      },\n      onUserUnmuted(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n      onUserLeft(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n      onUserBanned(eventChannel, user) {\n        if (isDifferentChannel(eventChannel, channel)) return;\n        deleteUser(user.userId);\n      },\n    });\n\n    const _renderUser: NonNullable<typeof renderUser> = useFreshCallback((props) => {\n      if (renderUser) return renderUser(props);\n\n      const { user } = props;\n      return (\n        <UserActionBar\n          muted\n          uri={user.profileUrl}\n          name={\n            (user.nickname || STRINGS.LABELS.USER_NO_NAME) +\n            (user.userId === currentUser?.userId ? STRINGS.LABELS.USER_BAR_ME_POSTFIX : '')\n          }\n          disabled={user.userId === currentUser?.userId}\n          onPressActionMenu={() => {\n            openMenu({\n              title: user.nickname || STRINGS.LABELS.USER_NO_NAME,\n              menuItems: [\n                {\n                  title: STRINGS.LABELS.UNMUTE,\n                  onPress: () => channel.unmuteUser(user).then(() => deleteUser(user.userId)),\n                },\n              ],\n            });\n          }}\n        />\n      );\n    });\n\n    return (\n      <GroupChannelMutedMembersModule.Provider channel={channel}>\n        <GroupChannelMutedMembersModule.Header onPressHeaderLeft={onPressHeaderLeft} />\n        <StatusComposition\n          loading={loading}\n          LoadingComponent={<GroupChannelMutedMembersModule.StatusLoading />}\n          error={Boolean(error)}\n          ErrorComponent={<GroupChannelMutedMembersModule.StatusError onPressRetry={refresh} />}\n        >\n          <GroupChannelMutedMembersModule.List\n            mutedMembers={users}\n            onLoadNext={next}\n            renderUser={_renderUser}\n            ListEmptyComponent={<GroupChannelMutedMembersModule.StatusEmpty />}\n          />\n        </StatusComposition>\n      </GroupChannelMutedMembersModule.Provider>\n    );\n  };\n};\n\nexport default createGroupChannelMutedMembersFragment;\n"],"mappings":"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"}