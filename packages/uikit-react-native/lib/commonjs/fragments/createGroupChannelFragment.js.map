{"version":3,"names":["_react","_interopRequireWildcard","require","_groupChannel","_message","_uikitReactNativeFoundation","_uikitTools","_uikitUtils","_GroupChannelMessageRenderer","_NewMessagesButton","_interopRequireDefault","_ScrollToBottomButton","_StatusComposition","_createGroupChannelModule","_useContext","_pubsub","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","createGroupChannelFragment","initModule","GroupChannelModule","createGroupChannelModule","_ref","searchItem","renderNewMessagesButton","props","createElement","renderScrollToBottomButton","renderMessage","enableMessageGrouping","enableTypingIndicator","onPressHeaderLeft","NOOP","onPressHeaderRight","onPressMediaMessage","onChannelDeleted","onBeforeSendUserMessage","PASS","onBeforeSendFileMessage","onBeforeUpdateUserMessage","onBeforeUpdateFileMessage","channel","keyboardAvoidOffset","sortComparator","messageComparator","flatListProps","messageListQueryParams","collectionCreator","playerService","recorderService","usePlatformService","sdk","currentUser","sbOptions","useSendbirdChat","internalSearchItem","setInternalSearchItem","useState","navigateFromMessageSearch","useCallback","Boolean","groupChannelPubSub","pubsub","scrolledAwayFromBottom","setScrolledAwayFromBottom","scrolledAwayFromBottomRef","useRefTracker","replyType","useIIFE","uikit","groupChannel","ReplyType","NONE","ONLY_REPLY_TO_CHANNEL","loading","messages","newMessages","resetNewMessages","loadNext","loadPrevious","hasNext","sendFileMessage","sendUserMessage","updateFileMessage","updateUserMessage","resendMessage","deleteMessage","resetWithStartingPoint","useGroupChannelMessages","shouldCountNewMessages","current","onMessagesReceived","publish","type","data","onMessagesUpdated","onCurrentUserBanned","getCollectionCreator","markAsRead","confirmAndMarkAsRead","startingPoint","onBlurFragment","Promise","allSettled","reset","_onPressHeaderLeft","useFreshCallback","_onPressHeaderRight","_onPressMediaMessage","message","uri","useEffect","renderItem","content","Box","isFirstItem","GroupChannelTypingIndicatorBubble","memoizedFlatListProps","useMemo","ListEmptyComponent","StatusEmpty","contentContainerStyle","flexGrow","onResetMessageList","Number","MAX_SAFE_INTEGER","onResetMessageListWithStartingPoint","onUpdateSearchItem","undefined","onPending","onSent","onPressSendUserMessage","params","processedParams","onPressSendFileMessage","onPressUpdateUserMessage","messageId","onPressUpdateFileMessage","onScrolledAwayFromBottom","value","Provider","Header","shouldHideRight","LoadingComponent","StatusLoading","MessageList","currentUserId","userId","onTopReached","onBottomReached","onResendFailedMessage","onDeleteMessage","Input","SuggestedMentionList","shouldRenderInput","isBroadcast","myRole","deprecatedCreatorProp","defaultParams","createMessageCollection","filter","MessageFilter","_default","exports"],"sources":["createGroupChannelFragment.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { MessageCollection, MessageFilter } from '@sendbird/chat/groupChannel';\nimport { ReplyType } from '@sendbird/chat/message';\nimport { Box } from '@sendbird/uikit-react-native-foundation';\nimport { useGroupChannelMessages } from '@sendbird/uikit-tools';\nimport type { SendbirdFileMessage, SendbirdGroupChannel, SendbirdUserMessage } from '@sendbird/uikit-utils';\nimport {\n  NOOP,\n  PASS,\n  confirmAndMarkAsRead,\n  messageComparator,\n  useFreshCallback,\n  useIIFE,\n  useRefTracker,\n} from '@sendbird/uikit-utils';\n\nimport GroupChannelMessageRenderer, {\n  GroupChannelTypingIndicatorBubble,\n} from '../components/GroupChannelMessageRenderer';\nimport NewMessagesButton from '../components/NewMessagesButton';\nimport ScrollToBottomButton from '../components/ScrollToBottomButton';\nimport StatusComposition from '../components/StatusComposition';\nimport createGroupChannelModule from '../domain/groupChannel/module/createGroupChannelModule';\nimport type {\n  GroupChannelFragment,\n  GroupChannelModule,\n  GroupChannelProps,\n  GroupChannelPubSubContextPayload,\n} from '../domain/groupChannel/types';\nimport { usePlatformService, useSendbirdChat } from '../hooks/useContext';\nimport pubsub from '../utils/pubsub';\n\nconst createGroupChannelFragment = (initModule?: Partial<GroupChannelModule>): GroupChannelFragment => {\n  const GroupChannelModule = createGroupChannelModule(initModule);\n\n  return ({\n    searchItem,\n    renderNewMessagesButton = (props) => <NewMessagesButton {...props} />,\n    renderScrollToBottomButton = (props) => <ScrollToBottomButton {...props} />,\n    renderMessage,\n    enableMessageGrouping = true,\n    enableTypingIndicator,\n    onPressHeaderLeft = NOOP,\n    onPressHeaderRight = NOOP,\n    onPressMediaMessage = NOOP,\n    onChannelDeleted = NOOP,\n    onBeforeSendUserMessage = PASS,\n    onBeforeSendFileMessage = PASS,\n    onBeforeUpdateUserMessage = PASS,\n    onBeforeUpdateFileMessage = PASS,\n    channel,\n    keyboardAvoidOffset,\n    sortComparator = messageComparator,\n    flatListProps,\n    messageListQueryParams,\n    collectionCreator,\n  }) => {\n    const { playerService, recorderService } = usePlatformService();\n    const { sdk, currentUser, sbOptions } = useSendbirdChat();\n\n    const [internalSearchItem, setInternalSearchItem] = useState(searchItem);\n    const navigateFromMessageSearch = useCallback(() => Boolean(searchItem), []);\n\n    const [groupChannelPubSub] = useState(() => pubsub<GroupChannelPubSubContextPayload>());\n    const [scrolledAwayFromBottom, setScrolledAwayFromBottom] = useState(false);\n    const scrolledAwayFromBottomRef = useRefTracker(scrolledAwayFromBottom);\n\n    const replyType = useIIFE(() => {\n      if (sbOptions.uikit.groupChannel.channel.replyType === 'none') return ReplyType.NONE;\n      else return ReplyType.ONLY_REPLY_TO_CHANNEL;\n    });\n\n    const {\n      loading,\n      messages,\n      newMessages,\n      resetNewMessages,\n      loadNext,\n      loadPrevious,\n      hasNext,\n      sendFileMessage,\n      sendUserMessage,\n      updateFileMessage,\n      updateUserMessage,\n      resendMessage,\n      deleteMessage,\n      resetWithStartingPoint,\n    } = useGroupChannelMessages(sdk, channel, {\n      shouldCountNewMessages: () => scrolledAwayFromBottomRef.current,\n      onMessagesReceived(messages) {\n        groupChannelPubSub.publish({ type: 'MESSAGES_RECEIVED', data: { messages } });\n      },\n      onMessagesUpdated(messages) {\n        groupChannelPubSub.publish({ type: 'MESSAGES_UPDATED', data: { messages } });\n      },\n      onChannelDeleted,\n      onCurrentUserBanned: onChannelDeleted,\n      collectionCreator: getCollectionCreator(channel, messageListQueryParams, collectionCreator),\n      sortComparator,\n      markAsRead: confirmAndMarkAsRead,\n      replyType,\n      startingPoint: internalSearchItem?.startingPoint,\n    });\n\n    const onBlurFragment = () => {\n      return Promise.allSettled([playerService.reset(), recorderService.reset()]);\n    };\n    const _onPressHeaderLeft = useFreshCallback(async () => {\n      await onBlurFragment();\n      onPressHeaderLeft();\n    });\n    const _onPressHeaderRight = useFreshCallback(async () => {\n      await onBlurFragment();\n      onPressHeaderRight();\n    });\n    const _onPressMediaMessage: NonNullable<GroupChannelProps['MessageList']['onPressMediaMessage']> = useFreshCallback(\n      async (message, deleteMessage, uri) => {\n        await onBlurFragment();\n        onPressMediaMessage(message, deleteMessage, uri);\n      },\n    );\n\n    useEffect(() => {\n      return () => {\n        onBlurFragment();\n      };\n    }, []);\n\n    const renderItem: GroupChannelProps['MessageList']['renderMessage'] = useFreshCallback((props) => {\n      const content = renderMessage ? renderMessage(props) : <GroupChannelMessageRenderer {...props} />;\n      return (\n        <Box>\n          {content}\n          {props.isFirstItem && !hasNext() && <GroupChannelTypingIndicatorBubble />}\n        </Box>\n      );\n    });\n\n    const memoizedFlatListProps = useMemo(\n      () => ({\n        ListEmptyComponent: <GroupChannelModule.StatusEmpty />,\n        contentContainerStyle: { flexGrow: 1 },\n        ...flatListProps,\n      }),\n      [flatListProps],\n    );\n\n    const onResetMessageList = useCallback(async () => {\n      return await resetWithStartingPoint(Number.MAX_SAFE_INTEGER);\n    }, []);\n\n    const onResetMessageListWithStartingPoint = useCallback(async (startingPoint: number) => {\n      return await resetWithStartingPoint(startingPoint);\n    }, []);\n\n    // Changing the search item will trigger the focus animation on messages.\n    const onUpdateSearchItem: GroupChannelProps['MessageList']['onUpdateSearchItem'] = useCallback((searchItem) => {\n      // Clean up for animation trigger with useEffect\n      setInternalSearchItem(undefined);\n      setInternalSearchItem(searchItem);\n    }, []);\n\n    const onPending = (message: SendbirdFileMessage | SendbirdUserMessage) => {\n      groupChannelPubSub.publish({ type: 'MESSAGE_SENT_PENDING', data: { message } });\n    };\n\n    const onSent = (message: SendbirdFileMessage | SendbirdUserMessage) => {\n      groupChannelPubSub.publish({ type: 'MESSAGE_SENT_SUCCESS', data: { message } });\n    };\n\n    const onPressSendUserMessage: GroupChannelProps['Input']['onPressSendUserMessage'] = useFreshCallback(\n      async (params) => {\n        const processedParams = await onBeforeSendUserMessage(params);\n        const message = await sendUserMessage(processedParams, onPending);\n        onSent(message);\n      },\n    );\n    const onPressSendFileMessage: GroupChannelProps['Input']['onPressSendFileMessage'] = useFreshCallback(\n      async (params) => {\n        const processedParams = await onBeforeSendFileMessage(params);\n        const message = await sendFileMessage(processedParams, onPending);\n        onSent(message);\n      },\n    );\n    const onPressUpdateUserMessage: GroupChannelProps['Input']['onPressUpdateUserMessage'] = useFreshCallback(\n      async (message, params) => {\n        const processedParams = await onBeforeUpdateUserMessage(params);\n        await updateUserMessage(message.messageId, processedParams);\n      },\n    );\n    const onPressUpdateFileMessage: GroupChannelProps['Input']['onPressUpdateFileMessage'] = useFreshCallback(\n      async (message, params) => {\n        const processedParams = await onBeforeUpdateFileMessage(params);\n        await updateFileMessage(message.messageId, processedParams);\n      },\n    );\n    const onScrolledAwayFromBottom = useFreshCallback((value: boolean) => {\n      if (!value) resetNewMessages();\n      setScrolledAwayFromBottom(value);\n    });\n\n    return (\n      <GroupChannelModule.Provider\n        channel={channel}\n        groupChannelPubSub={groupChannelPubSub}\n        enableTypingIndicator={enableTypingIndicator ?? sbOptions.uikit.groupChannel.channel.enableTypingIndicator}\n        keyboardAvoidOffset={keyboardAvoidOffset}\n        messages={messages}\n        onUpdateSearchItem={onUpdateSearchItem}\n      >\n        <GroupChannelModule.Header\n          shouldHideRight={navigateFromMessageSearch}\n          onPressHeaderLeft={_onPressHeaderLeft}\n          onPressHeaderRight={_onPressHeaderRight}\n        />\n        <StatusComposition loading={loading} LoadingComponent={<GroupChannelModule.StatusLoading />}>\n          <GroupChannelModule.MessageList\n            channel={channel}\n            searchItem={internalSearchItem}\n            onResetMessageList={onResetMessageList}\n            onResetMessageListWithStartingPoint={onResetMessageListWithStartingPoint}\n            onUpdateSearchItem={onUpdateSearchItem}\n            enableMessageGrouping={enableMessageGrouping}\n            currentUserId={currentUser?.userId}\n            renderMessage={renderItem}\n            messages={messages}\n            newMessages={newMessages}\n            onTopReached={loadPrevious}\n            onBottomReached={loadNext}\n            hasNext={hasNext}\n            scrolledAwayFromBottom={scrolledAwayFromBottom}\n            onScrolledAwayFromBottom={onScrolledAwayFromBottom}\n            renderNewMessagesButton={renderNewMessagesButton}\n            renderScrollToBottomButton={renderScrollToBottomButton}\n            onResendFailedMessage={resendMessage}\n            onDeleteMessage={deleteMessage}\n            onPressMediaMessage={_onPressMediaMessage}\n            flatListProps={memoizedFlatListProps}\n          />\n          <GroupChannelModule.Input\n            SuggestedMentionList={GroupChannelModule.SuggestedMentionList}\n            shouldRenderInput={shouldRenderInput(channel)}\n            onPressSendUserMessage={onPressSendUserMessage}\n            onPressSendFileMessage={onPressSendFileMessage}\n            onPressUpdateUserMessage={onPressUpdateUserMessage}\n            onPressUpdateFileMessage={onPressUpdateFileMessage}\n          />\n        </StatusComposition>\n      </GroupChannelModule.Provider>\n    );\n  };\n};\n\nfunction shouldRenderInput(channel: SendbirdGroupChannel) {\n  if (channel.isBroadcast) {\n    return channel.myRole === 'operator';\n  }\n\n  return true;\n}\n\nfunction getCollectionCreator(\n  channel: SendbirdGroupChannel,\n  messageListQueryParams?: GroupChannelProps['Fragment']['messageListQueryParams'],\n  deprecatedCreatorProp?: () => MessageCollection,\n) {\n  if (!messageListQueryParams && deprecatedCreatorProp) return deprecatedCreatorProp;\n\n  return (defaultParams: GroupChannelProps['Fragment']['messageListQueryParams']) => {\n    const params = { ...defaultParams, ...messageListQueryParams };\n    return channel.createMessageCollection({\n      ...params,\n      filter: new MessageFilter(params),\n    });\n  };\n}\n\nexport default createGroupChannelFragment;\n"],"mappings":"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"}