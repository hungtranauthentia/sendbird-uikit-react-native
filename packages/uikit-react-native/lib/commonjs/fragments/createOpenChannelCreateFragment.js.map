{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_uikitReactNativeFoundation","_uikitUtils","_openChannelCreate","_useContext","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","createOpenChannelCreateFragment","initModule","OpenChannelCreateModule","createOpenChannelCreateModule","_ref","onPressHeaderLeft","NOOP","onBeforeCreateChannel","PASS","onCreateChannel","sdk","currentUser","useSendbirdChat","palette","useUIKitTheme","loading","setLoading","useState","channelName","setChannelName","channelCoverFile","setChannelCoverFile","undefined","shouldActivateHeaderRight","Boolean","trim","onPressHeaderRight","params","name","operatorUserIds","userId","coverUrlOrImage","processedParams","channel","openChannel","createChannel","createElement","Provider","Header","ProfileInput","onChangeChannelName","onChangeChannelCoverFile","Box","backgroundColor","transparent","style","StyleSheet","absoluteFill","alignItems","justifyContent","StatusLoading","_default","exports"],"sources":["createOpenChannelCreateFragment.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { StyleSheet } from 'react-native';\n\nimport { Box, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, PASS, SendbirdOpenChannelCreateParams } from '@sendbird/uikit-utils';\n\nimport { createOpenChannelCreateModule } from '../domain/openChannelCreate';\nimport type { OpenChannelCreateFragment, OpenChannelCreateModule } from '../domain/openChannelCreate/types';\nimport { useSendbirdChat } from '../hooks/useContext';\nimport type { FileType } from '../platform/types';\n\nconst createOpenChannelCreateFragment = (initModule?: Partial<OpenChannelCreateModule>): OpenChannelCreateFragment => {\n  const OpenChannelCreateModule = createOpenChannelCreateModule(initModule);\n\n  return ({ onPressHeaderLeft = NOOP, onBeforeCreateChannel = PASS, onCreateChannel }) => {\n    const { sdk, currentUser } = useSendbirdChat();\n    const { palette } = useUIKitTheme();\n\n    const [loading, setLoading] = useState(false);\n    const [channelName, setChannelName] = useState('');\n    const [channelCoverFile, setChannelCoverFile] = useState<FileType | undefined>(undefined);\n\n    const shouldActivateHeaderRight = () => {\n      return Boolean(currentUser) && channelName.trim() !== '';\n    };\n\n    const onPressHeaderRight = async () => {\n      if (currentUser) {\n        try {\n          setLoading(true);\n          const params: SendbirdOpenChannelCreateParams = {\n            name: channelName,\n            operatorUserIds: [currentUser.userId],\n          };\n\n          if (channelCoverFile) params.coverUrlOrImage = channelCoverFile;\n\n          const processedParams = await onBeforeCreateChannel(params);\n          const channel = await sdk.openChannel.createChannel(processedParams);\n\n          setLoading(false);\n          onCreateChannel(channel);\n        } catch {\n          setLoading(false);\n        }\n      }\n    };\n\n    return (\n      <OpenChannelCreateModule.Provider>\n        <OpenChannelCreateModule.Header\n          onPressHeaderLeft={onPressHeaderLeft}\n          onPressHeaderRight={onPressHeaderRight}\n          shouldActivateHeaderRight={shouldActivateHeaderRight}\n        />\n        <OpenChannelCreateModule.ProfileInput\n          channelName={channelName}\n          onChangeChannelName={setChannelName}\n          channelCoverFile={channelCoverFile}\n          onChangeChannelCoverFile={setChannelCoverFile}\n        />\n        {loading && (\n          <Box\n            backgroundColor={palette.transparent}\n            style={StyleSheet.absoluteFill}\n            alignItems={'center'}\n            justifyContent={'center'}\n          >\n            <OpenChannelCreateModule.StatusLoading />\n          </Box>\n        )}\n      </OpenChannelCreateModule.Provider>\n    );\n  };\n};\n\nexport default createOpenChannelCreateFragment;\n"],"mappings":"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"}