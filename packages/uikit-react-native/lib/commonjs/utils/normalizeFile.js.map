{"version":3,"names":["_uikitUtils","require","normalizeFile","_ref","uri","size","name","type","filename","String","Date","now","filetype","extension","getFileExtension","getFileExtensionFromMime","getFileExtensionFromUri","normalizeFileName","isNotMimeType","getMimeFromFileExtension","str","indexOf","_default","exports","default"],"sources":["normalizeFile.ts"],"sourcesContent":["import type { PartialNullable } from '@sendbird/uikit-utils';\nimport {\n  getFileExtension,\n  getFileExtensionFromMime,\n  getFileExtensionFromUri,\n  getMimeFromFileExtension,\n  normalizeFileName,\n} from '@sendbird/uikit-utils';\n\nimport type { FilePickerResponse, FileType } from '../platform/types';\n\nconst normalizeFile = async ({ uri, size, name, type }: PartialNullable<FileType>): Promise<FilePickerResponse> => {\n  // URI is required property\n  if (!uri) return null;\n\n  let filename = name || String(Date.now());\n  let filetype = type || '';\n\n  const extension =\n    getFileExtension(filename) || getFileExtensionFromMime(filetype) || (await getFileExtensionFromUri(uri));\n\n  if (extension) {\n    filename = normalizeFileName(filename, extension);\n    if (!filetype || isNotMimeType(filetype)) {\n      filetype = getMimeFromFileExtension(extension);\n    }\n  }\n\n  return { uri, name: filename, type: filetype, size: size ?? 0 };\n};\n\nfunction isNotMimeType(str: string) {\n  return str.indexOf('/') === -1;\n}\n\nexport default normalizeFile;\n"],"mappings":";;;;;;AACA,IAAAA,WAAA,GAAAC,OAAA;AAUA,MAAMC,aAAa,GAAG,MAAAC,IAAA,IAA6F;EAAA,IAAtF;IAAEC,GAAG;IAAEC,IAAI;IAAEC,IAAI;IAAEC;EAAgC,CAAC,GAAAJ,IAAA;EAC/E;EACA,IAAI,CAACC,GAAG,EAAE,OAAO,IAAI;EAErB,IAAII,QAAQ,GAAGF,IAAI,IAAIG,MAAM,CAACC,IAAI,CAACC,GAAG,EAAE,CAAC;EACzC,IAAIC,QAAQ,GAAGL,IAAI,IAAI,EAAE;EAEzB,MAAMM,SAAS,GACb,IAAAC,4BAAgB,EAACN,QAAQ,CAAC,IAAI,IAAAO,oCAAwB,EAACH,QAAQ,CAAC,KAAK,MAAM,IAAAI,mCAAuB,EAACZ,GAAG,CAAC,CAAC;EAE1G,IAAIS,SAAS,EAAE;IACbL,QAAQ,GAAG,IAAAS,6BAAiB,EAACT,QAAQ,EAAEK,SAAS,CAAC;IACjD,IAAI,CAACD,QAAQ,IAAIM,aAAa,CAACN,QAAQ,CAAC,EAAE;MACxCA,QAAQ,GAAG,IAAAO,oCAAwB,EAACN,SAAS,CAAC;IAChD;EACF;EAEA,OAAO;IAAET,GAAG;IAAEE,IAAI,EAAEE,QAAQ;IAAED,IAAI,EAAEK,QAAQ;IAAEP,IAAI,EAAEA,IAAI,IAAI;EAAE,CAAC;AACjE,CAAC;AAED,SAASa,aAAaA,CAACE,GAAW,EAAE;EAClC,OAAOA,GAAG,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAChC;AAAC,IAAAC,QAAA,GAEcpB,aAAa;AAAAqB,OAAA,CAAAC,OAAA,GAAAF,QAAA"}