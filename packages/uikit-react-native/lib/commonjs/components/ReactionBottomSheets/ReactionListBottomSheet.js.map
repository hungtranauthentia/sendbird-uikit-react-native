{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_reactNativeSafeAreaContext","_uikitReactNativeFoundation","_constants","obj","__esModule","default","NUM_COLUMN","ReactionListBottomSheet","_ref","visible","onClose","onDismiss","reactionCtx","chatCtx","width","useWindowDimensions","bottom","left","right","useSafeAreaInsets","colors","useUIKitTheme","currentUser","emojiManager","channel","message","color","ui","reaction","createElement","Modal","type","Boolean","backgroundStyle","styles","modal","View","style","container","paddingBottom","backgroundColor","dialog","none","background","paddingLeft","paddingHorizontal","paddingRight","FlatList","data","allEmoji","numColumns","keyExtractor","item","key","contentContainerStyle","flatlist","ItemSeparatorComponent","height","renderItem","_ref2","_message$reactions","_message$reactions$fi","url","reactedUserIds","reactions","find","it","userIds","idx","indexOf","userId","UNKNOWN_USER_ID","reacted","emojiItem","Pressable","onPress","deleteReaction","addReaction","_ref3","pressed","button","selected","enabled","Image","source","uri","emoji","createStyleSheet","overflow","borderTopLeftRadius","borderTopRightRadius","paddingTop","flexDirection","alignItems","justifyContent","padding","borderRadius","_default","exports"],"sources":["ReactionListBottomSheet.tsx"],"sourcesContent":["import React from 'react';\nimport { FlatList, Pressable, View, useWindowDimensions } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { Image, Modal, createStyleSheet, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\n\nimport { UNKNOWN_USER_ID } from '../../constants';\nimport type { ReactionBottomSheetProps } from './index';\n\nconst NUM_COLUMN = 6;\nconst ReactionListBottomSheet = ({ visible, onClose, onDismiss, reactionCtx, chatCtx }: ReactionBottomSheetProps) => {\n  const { width } = useWindowDimensions();\n  const { bottom, left, right } = useSafeAreaInsets();\n  const { colors } = useUIKitTheme();\n\n  const { currentUser, emojiManager } = chatCtx;\n  const { channel, message } = reactionCtx;\n  const color = colors.ui.reaction.default;\n\n  return (\n    <Modal\n      type={'slide'}\n      visible={Boolean(visible && channel && message)}\n      onClose={onClose}\n      onDismiss={onDismiss}\n      backgroundStyle={styles.modal}\n    >\n      <View\n        style={[\n          styles.container,\n          {\n            width,\n            paddingBottom: bottom,\n            backgroundColor: colors.ui.dialog.default.none.background,\n            paddingLeft: left + styles.container.paddingHorizontal,\n            paddingRight: right + styles.container.paddingHorizontal,\n          },\n        ]}\n      >\n        <FlatList\n          data={emojiManager.allEmoji}\n          numColumns={NUM_COLUMN}\n          keyExtractor={(item) => item.key}\n          contentContainerStyle={styles.flatlist}\n          ItemSeparatorComponent={() => <View style={{ height: 16 }} />}\n          renderItem={({ item: { key, url } }) => {\n            const reactedUserIds = message?.reactions?.find((it) => it.key === key)?.userIds ?? [];\n\n            const idx = reactedUserIds.indexOf(currentUser?.userId ?? UNKNOWN_USER_ID);\n            const reacted = idx > -1;\n\n            return (\n              <View style={styles.emojiItem}>\n                <Pressable\n                  key={key}\n                  onPress={() => {\n                    if (message && channel) {\n                      if (reacted) channel.deleteReaction(message, key);\n                      else channel.addReaction(message, key);\n                    }\n                    onClose();\n                  }}\n                  style={({ pressed }) => [\n                    styles.button,\n                    { backgroundColor: reacted || pressed ? color.selected.background : color.enabled.background },\n                  ]}\n                >\n                  <Image source={{ uri: url }} style={styles.emoji} />\n                </Pressable>\n              </View>\n            );\n          }}\n        />\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = createStyleSheet({\n  container: {\n    overflow: 'hidden',\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    paddingTop: 16,\n    paddingHorizontal: 18,\n    flexDirection: 'row',\n  },\n  modal: {\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n  },\n  flatlist: {\n    width: '100%',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n  },\n  emojiItem: {\n    width: `${100 / NUM_COLUMN}%`,\n    alignItems: 'center',\n  },\n  button: {\n    width: 44,\n    height: 44,\n    padding: 4,\n    borderRadius: 8,\n  },\n  emoji: {\n    width: '100%',\n    height: '100%',\n  },\n});\n\nexport default ReactionListBottomSheet;\n"],"mappings":"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"}