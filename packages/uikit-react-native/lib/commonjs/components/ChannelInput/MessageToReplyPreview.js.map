{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_uikitReactNativeFoundation","_uikitUtils","_useContext","obj","__esModule","default","MessageToReplyPreview","_ref","messageToReply","setMessageToReply","colors","select","palette","useUIKitTheme","mediaService","usePlatformService","STRINGS","useLocalization","getFileIconAsImage","url","createElement","ImageWithPlaceholder","source","uri","style","styles","previewImage","getFileIconAsVideoThumbnail","VideoThumbnail","iconSize","fetchThumbnailFromVideoSource","getVideoThumbnail","timeMills","getFileIconAsSymbol","icon","Icon","size","color","onBackground02","containerStyle","fileIcon","backgroundColor","light","background100","dark","background500","getFileIcon","isFileMessage","messageType","getMessageType","getThumbnailUriFromFileMessage","getFileIconFromMessageType","View","messageToReplyContainer","borderColor","onBackground04","flex","flexDirection","Text","numberOfLines","fontSize","fontWeight","marginBottom","LABELS","CHANNEL_INPUT_REPLY_PREVIEW_TITLE","sender","onBackground03","CHANNEL_INPUT_REPLY_PREVIEW_BODY","TouchableOpacity","onPress","undefined","onBackground01","closeIcon","exports","createStyleSheet","width","height","borderRadius","marginTop","marginRight","overflow","paddingLeft","paddingRight","paddingTop","paddingBottom","alignItems","borderTopWidth","marginLeft","padding"],"sources":["MessageToReplyPreview.tsx"],"sourcesContent":["import React from 'react';\nimport { TouchableOpacity, View } from 'react-native';\n\nimport {\n  Icon,\n  ImageWithPlaceholder,\n  Text,\n  VideoThumbnail,\n  createStyleSheet,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport {\n  FileIcon,\n  SendbirdBaseMessage,\n  SendbirdFileMessage,\n  SendbirdUserMessage,\n  getFileIconFromMessageType,\n  getMessageType,\n  getThumbnailUriFromFileMessage,\n} from '@sendbird/uikit-utils';\n\nimport { useLocalization, usePlatformService } from '../../hooks/useContext';\n\nexport type MessageToReplyPreviewProps = {\n  messageToReply?: SendbirdFileMessage | SendbirdUserMessage;\n  setMessageToReply?: (message?: undefined | SendbirdFileMessage | SendbirdUserMessage) => void;\n};\n\nexport const MessageToReplyPreview = ({ messageToReply, setMessageToReply }: MessageToReplyPreviewProps) => {\n  const { colors, select, palette } = useUIKitTheme();\n  const { mediaService } = usePlatformService();\n  const { STRINGS } = useLocalization();\n\n  const getFileIconAsImage = (url: string) => {\n    return <ImageWithPlaceholder source={{ uri: url }} style={styles.previewImage} />;\n  };\n\n  const getFileIconAsVideoThumbnail = (url: string) => {\n    return (\n      <VideoThumbnail\n        style={styles.previewImage}\n        iconSize={0}\n        source={url}\n        fetchThumbnailFromVideoSource={(uri) => mediaService.getVideoThumbnail({ url: uri, timeMills: 1000 })}\n      />\n    );\n  };\n\n  const getFileIconAsSymbol = (icon: FileIcon) => {\n    return (\n      <Icon\n        icon={icon}\n        size={20}\n        color={colors.onBackground02}\n        containerStyle={[\n          styles.fileIcon,\n          {\n            backgroundColor: select({ light: palette.background100, dark: palette.background500 }),\n          },\n        ]}\n      />\n    );\n  };\n\n  const getFileIcon = (messageToReply: SendbirdBaseMessage) => {\n    if (messageToReply?.isFileMessage()) {\n      const messageType = getMessageType(messageToReply);\n      switch (messageType) {\n        case 'file.image':\n          return getFileIconAsImage(getThumbnailUriFromFileMessage(messageToReply));\n        case 'file.video':\n          return getFileIconAsVideoThumbnail(getThumbnailUriFromFileMessage(messageToReply));\n        case 'file.voice':\n          return null;\n        default:\n          return getFileIconAsSymbol(getFileIconFromMessageType(messageType));\n      }\n    }\n    return null;\n  };\n\n  if (!messageToReply) return null;\n\n  return (\n    <View style={[styles.messageToReplyContainer, { borderColor: colors.onBackground04 }]}>\n      <View style={{ flex: 1, flexDirection: 'row' }}>\n        {getFileIcon(messageToReply)}\n        <View style={{ flex: 1, flexDirection: 'column' }}>\n          <Text numberOfLines={1} style={{ fontSize: 13, fontWeight: '900', marginBottom: 4 }}>\n            {STRINGS.LABELS.CHANNEL_INPUT_REPLY_PREVIEW_TITLE(messageToReply.sender)}\n          </Text>\n          <Text numberOfLines={1} style={{ fontSize: 13, color: colors.onBackground03 }}>\n            {STRINGS.LABELS.CHANNEL_INPUT_REPLY_PREVIEW_BODY(messageToReply)}\n          </Text>\n        </View>\n      </View>\n      <TouchableOpacity onPress={() => setMessageToReply?.(undefined)}>\n        <Icon icon={'close'} size={24} color={colors.onBackground01} containerStyle={styles.closeIcon} />\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst styles = createStyleSheet({\n  previewImage: {\n    width: 36,\n    height: 36,\n    borderRadius: 10,\n    marginTop: 2,\n    marginRight: 10,\n    overflow: 'hidden',\n  },\n  messageToReplyContainer: {\n    flexDirection: 'row',\n    paddingLeft: 18,\n    paddingRight: 16,\n    paddingTop: 10,\n    paddingBottom: 8,\n    alignItems: 'center',\n    borderTopWidth: 1,\n  },\n  fileIcon: {\n    width: 36,\n    height: 36,\n    borderRadius: 10,\n    marginRight: 10,\n    marginTop: 2,\n  },\n  closeIcon: {\n    marginLeft: 4,\n    padding: 4,\n  },\n});\n"],"mappings":"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"}