{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_message","_uikitReactNativeFoundation","_uikitUtils","_constants","_useChannelInputItems","_useContext","_SBUUtils","_interopRequireDefault","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","SendInput","forwardRef","_ref","ref","style","VoiceMessageInput","MessageToReplyPreview","AttachmentsButton","onPressSendUserMessage","onPressSendFileMessage","text","onChangeText","onSelectionChange","mentionedUsers","inputDisabled","inputFrozen","inputMuted","channel","messageToReply","setMessageToReply","playerService","recorderService","usePlatformService","mentionManager","sbOptions","useSendbirdChat","STRINGS","useLocalization","openSheet","useBottomSheet","toast","useToast","onClose","onDismiss","visible","voiceMessageInputVisible","setVisible","setVoiceMessageInputVisible","useDeferredModalState","messageReplyParams","useIIFE","groupChannel","uikit","isGroupChannel","replyType","parentMessageId","messageId","isReplyToChannel","messageMentionParams","enableMention","mentionType","MentionType","USERS","mentionedUserIds","map","it","user","userId","mentionedMessageTemplate","textToMentionedMessageTemplate","onFailureToSend","error","show","TOAST","SEND_MSG_ERROR","Logger","sendUserMessage","message","catch","sendFileMessage","file","sendVoiceMessage","durationMills","USER_MUTED_ERROR","CHANNEL_FROZEN_ERROR","metaArrays","MessageMetaArray","VOICE_MESSAGE_META_ARRAY_DURATION_KEY","value","String","VOICE_MESSAGE_META_ARRAY_MESSAGE_TYPE_KEY","options","extension","sheetItems","useChannelInputItems","getPlaceholder","LABELS","CHANNEL_INPUT_PLACEHOLDER_MUTED","CHANNEL_INPUT_PLACEHOLDER_DISABLED","CHANNEL_INPUT_PLACEHOLDER_REPLY","CHANNEL_INPUT_PLACEHOLDER_ACTIVE","voiceMessageEnabled","enableVoiceMessage","sendButtonVisible","Boolean","trim","createElement","View","styles","sendInputContainer","onPress","disabled","TextInput","multiline","disableFullscreenUI","editable","placeholder","textToMentionedComponents","VoiceMessageButton","UserMessageSendButton","Modal","disableBackgroundClose","Promise","allSettled","reset","backgroundStyle","justifyContent","type","onSend","_ref2","duration","_ref3","alert","useAlert","colors","useUIKitTheme","onPressWithPermissionCheck","recorderGranted","requestPermission","title","DIALOG","ALERT_PERMISSIONS_TITLE","ALERT_PERMISSIONS_MESSAGE","PERMISSION_MICROPHONE","PERMISSION_APP_NAME","buttons","ALERT_PERMISSIONS_OK","SBUUtils","openSettings","playerGranted","PERMISSION_DEVICE_STORAGE","TouchableOpacity","Icon","color","ui","input","highlight","active","icon","size","containerStyle","sendIcon","_ref4","createStyleSheet","paddingVertical","paddingHorizontal","alignItems","flexDirection","marginLeft","padding","_default","exports"],"sources":["SendInput.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport {\n  NativeSyntheticEvent,\n  TextInput as RNTextInput,\n  TextInputSelectionChangeEventData,\n  TouchableOpacity,\n  View,\n} from 'react-native';\n\nimport { MentionType, MessageMetaArray } from '@sendbird/chat/message';\nimport {\n  Icon,\n  Modal,\n  TextInput,\n  createStyleSheet,\n  useAlert,\n  useBottomSheet,\n  useToast,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport { Logger, useDeferredModalState, useIIFE } from '@sendbird/uikit-utils';\n\nimport { VOICE_MESSAGE_META_ARRAY_DURATION_KEY, VOICE_MESSAGE_META_ARRAY_MESSAGE_TYPE_KEY } from '../../constants';\nimport { useChannelInputItems } from '../../hooks/useChannelInputItems';\nimport { useLocalization, usePlatformService, useSendbirdChat } from '../../hooks/useContext';\nimport SBUUtils from '../../libs/SBUUtils';\nimport type { FileType } from '../../platform/types';\nimport type { MentionedUser } from '../../types';\nimport type { ChannelInputProps } from './index';\n\ninterface SendInputProps extends ChannelInputProps {\n  text: string;\n  onChangeText: (val: string) => void;\n  onSelectionChange: (e: NativeSyntheticEvent<TextInputSelectionChangeEventData>) => void;\n  mentionedUsers: MentionedUser[];\n}\n\nconst SendInput = forwardRef<RNTextInput, SendInputProps>(function SendInput(\n  {\n    style,\n    VoiceMessageInput,\n    MessageToReplyPreview,\n    AttachmentsButton,\n    onPressSendUserMessage,\n    onPressSendFileMessage,\n    text,\n    onChangeText,\n    onSelectionChange,\n    mentionedUsers,\n    inputDisabled,\n    inputFrozen,\n    inputMuted,\n    channel,\n    messageToReply,\n    setMessageToReply,\n  },\n  ref,\n) {\n  const { playerService, recorderService } = usePlatformService();\n  const { mentionManager, sbOptions } = useSendbirdChat();\n  const { STRINGS } = useLocalization();\n  const { openSheet } = useBottomSheet();\n  const toast = useToast();\n\n  const {\n    onClose,\n    onDismiss,\n    visible: voiceMessageInputVisible,\n    setVisible: setVoiceMessageInputVisible,\n  } = useDeferredModalState();\n\n  const messageReplyParams = useIIFE(() => {\n    const { groupChannel } = sbOptions.uikit;\n    if (!channel.isGroupChannel() || groupChannel.channel.replyType === 'none' || !messageToReply) return {};\n    return {\n      parentMessageId: messageToReply.messageId,\n      isReplyToChannel: true,\n    };\n  });\n\n  const messageMentionParams = useIIFE(() => {\n    const { groupChannel } = sbOptions.uikit;\n    if (!channel.isGroupChannel() || !groupChannel.channel.enableMention) return {};\n    return {\n      mentionType: MentionType.USERS,\n      mentionedUserIds: mentionedUsers.map((it) => it.user.userId),\n      mentionedMessageTemplate: mentionManager.textToMentionedMessageTemplate(\n        text,\n        mentionedUsers,\n        groupChannel.channel.enableMention,\n      ),\n    };\n  });\n\n  const onFailureToSend = (error: Error) => {\n    toast.show(STRINGS.TOAST.SEND_MSG_ERROR, 'error');\n    Logger.error(STRINGS.TOAST.SEND_MSG_ERROR, error);\n  };\n\n  const sendUserMessage = () => {\n    onPressSendUserMessage({\n      message: text,\n      ...messageMentionParams,\n      ...messageReplyParams,\n    }).catch(onFailureToSend);\n\n    onChangeText('');\n    setMessageToReply?.();\n  };\n\n  const sendFileMessage = (file: FileType) => {\n    onPressSendFileMessage({\n      file,\n      ...messageReplyParams,\n    }).catch(onFailureToSend);\n\n    setMessageToReply?.();\n  };\n\n  const sendVoiceMessage = (file: FileType, durationMills: number) => {\n    if (inputMuted) {\n      toast.show(STRINGS.TOAST.USER_MUTED_ERROR, 'error');\n      Logger.error(STRINGS.TOAST.USER_MUTED_ERROR);\n    } else if (inputFrozen) {\n      toast.show(STRINGS.TOAST.CHANNEL_FROZEN_ERROR, 'error');\n      Logger.error(STRINGS.TOAST.CHANNEL_FROZEN_ERROR);\n    } else {\n      onPressSendFileMessage({\n        file,\n        metaArrays: [\n          new MessageMetaArray({\n            key: VOICE_MESSAGE_META_ARRAY_DURATION_KEY,\n            value: [String(durationMills)],\n          }),\n          new MessageMetaArray({\n            key: VOICE_MESSAGE_META_ARRAY_MESSAGE_TYPE_KEY,\n            value: [`voice/${recorderService.options.extension}`],\n          }),\n        ],\n        ...messageReplyParams,\n      }).catch(onFailureToSend);\n    }\n\n    onChangeText('');\n    setMessageToReply?.();\n  };\n\n  const sheetItems = useChannelInputItems(channel, sendFileMessage);\n\n  const getPlaceholder = () => {\n    if (inputMuted) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_MUTED;\n    if (inputFrozen) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_DISABLED;\n    if (inputDisabled) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_DISABLED;\n    if (messageToReply) return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_REPLY;\n\n    return STRINGS.LABELS.CHANNEL_INPUT_PLACEHOLDER_ACTIVE;\n  };\n\n  const voiceMessageEnabled = channel.isGroupChannel() && sbOptions.uikit.groupChannel.channel.enableVoiceMessage;\n  const sendButtonVisible = Boolean(text.trim());\n\n  return (\n    <View>\n      {MessageToReplyPreview && (\n        <MessageToReplyPreview messageToReply={messageToReply} setMessageToReply={setMessageToReply} />\n      )}\n      <View style={styles.sendInputContainer}>\n        {AttachmentsButton && <AttachmentsButton onPress={() => openSheet({ sheetItems })} disabled={inputDisabled} />}\n        <TextInput\n          ref={ref}\n          multiline\n          disableFullscreenUI\n          onSelectionChange={onSelectionChange}\n          editable={!inputDisabled}\n          onChangeText={onChangeText}\n          style={style}\n          placeholder={getPlaceholder()}\n        >\n          {mentionManager.textToMentionedComponents(\n            text,\n            mentionedUsers,\n            sbOptions.uikit.groupChannel.channel.enableMention,\n          )}\n        </TextInput>\n\n        {voiceMessageEnabled && (\n          <VoiceMessageButton\n            visible={!sendButtonVisible}\n            disabled={inputDisabled}\n            onPress={() => setVoiceMessageInputVisible(true)}\n          />\n        )}\n        <UserMessageSendButton visible={sendButtonVisible} disabled={inputDisabled} onPress={sendUserMessage} />\n        {voiceMessageEnabled && VoiceMessageInput && (\n          <Modal\n            disableBackgroundClose\n            onClose={onClose}\n            onDismiss={() => {\n              onDismiss();\n              Promise.allSettled([playerService.reset(), recorderService.reset()]);\n            }}\n            backgroundStyle={{ justifyContent: 'flex-end' }}\n            visible={voiceMessageInputVisible}\n            type={'slide-no-gesture'}\n          >\n            <VoiceMessageInput onClose={onClose} onSend={({ file, duration }) => sendVoiceMessage(file, duration)} />\n          </Modal>\n        )}\n      </View>\n    </View>\n  );\n});\n\ntype InputButtonProps = { visible: boolean; disabled: boolean; onPress: () => void };\nconst VoiceMessageButton = ({ visible, disabled, onPress }: InputButtonProps) => {\n  const { STRINGS } = useLocalization();\n  const { alert } = useAlert();\n  const { playerService, recorderService } = usePlatformService();\n  const { colors } = useUIKitTheme();\n  if (!visible) return null;\n\n  const onPressWithPermissionCheck = async () => {\n    const recorderGranted = await recorderService.requestPermission();\n    if (!recorderGranted) {\n      alert({\n        title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n        message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n          STRINGS.LABELS.PERMISSION_MICROPHONE,\n          STRINGS.LABELS.PERMISSION_APP_NAME,\n        ),\n        buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n      });\n      Logger.error('Failed to request permission for recorder');\n      return;\n    }\n\n    const playerGranted = await playerService.requestPermission();\n    if (!playerGranted) {\n      alert({\n        title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n        message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n          STRINGS.LABELS.PERMISSION_DEVICE_STORAGE,\n          STRINGS.LABELS.PERMISSION_APP_NAME,\n        ),\n        buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n      });\n      Logger.error('Failed to request permission for player');\n      return;\n    }\n\n    onPress();\n  };\n\n  return (\n    <TouchableOpacity onPress={onPressWithPermissionCheck} disabled={disabled}>\n      <Icon\n        color={disabled ? colors.ui.input.default.disabled.highlight : colors.ui.input.default.active.highlight}\n        icon={'audio-on'}\n        size={24}\n        containerStyle={styles.sendIcon}\n      />\n    </TouchableOpacity>\n  );\n};\nconst UserMessageSendButton = ({ visible, disabled, onPress }: InputButtonProps) => {\n  const { colors } = useUIKitTheme();\n  if (!visible) return null;\n  return (\n    <TouchableOpacity onPress={onPress} disabled={disabled}>\n      <Icon\n        color={disabled ? colors.ui.input.default.disabled.highlight : colors.ui.input.default.active.highlight}\n        icon={'send'}\n        size={24}\n        containerStyle={styles.sendIcon}\n      />\n    </TouchableOpacity>\n  );\n};\n\nconst styles = createStyleSheet({\n  sendInputContainer: {\n    paddingVertical: 10,\n    paddingHorizontal: 12,\n    alignItems: 'center',\n    flexDirection: 'row',\n  },\n  sendIcon: {\n    marginLeft: 4,\n    padding: 4,\n  },\n});\n\nexport default SendInput;\n"],"mappings":"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"}