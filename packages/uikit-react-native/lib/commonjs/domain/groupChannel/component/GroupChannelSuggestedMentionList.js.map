{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeSafeAreaContext","_uikitReactNativeFoundation","_uikitUtils","_useContext","_useKeyboardStatus","_interopRequireDefault","_useMentionSuggestion","_moduleContext","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","GroupChannelSuggestedMentionList","_ref","text","selection","inputHeight","bottomInset","onPressToMention","mentionedUsers","width","screenWidth","height","screenHeight","useWindowDimensions","channel","useContext","GroupChannelContexts","Fragment","sdk","mentionManager","useSendbirdChat","STRINGS","useLocalization","colors","useUIKitTheme","topInset","useHeaderStyle","left","right","useSafeAreaInsets","keyboard","useKeyboardStatus","members","reset","searchStringRange","searchLimited","useMentionSuggestion","isLandscape","isShortened","visible","canRenderMembers","length","maxHeight","styles","suggestion","renderLimitGuide","createElement","View","style","borderTopColor","onBackground04","Icon","icon","size","containerStyle","marginRight","color","onBackground02","Text","body3","GROUP_CHANNEL","MENTION_LIMITED","config","mentionLimit","renderMembers","map","member","Pressable","onPress","userId","userContainer","Avatar","uri","profileUrl","userAvatar","userInfo","body2","onBackground01","numberOfLines","userNickname","nickname","LABELS","USER_NO_NAME","onBackground03","Divider","position","bottom","pointerEvents","container","ScrollView","bounces","keyboardDismissMode","keyboardShouldPersistTaps","scrollView","backgroundColor","background","bottomSpace","borderTopWidth","contentContainerStyle","paddingLeft","paddingRight","conditionChaining","createStyleSheet","top","flexDirection","alignItems","justifyContent","flex","flexShrink","lineHeight","textAlignVertical","minWidth","paddingHorizontal","_default","exports"],"sources":["GroupChannelSuggestedMentionList.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { Pressable, ScrollView, View, useWindowDimensions } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport {\n  Avatar,\n  Divider,\n  Icon,\n  Text,\n  createStyleSheet,\n  useHeaderStyle,\n  useUIKitTheme,\n} from '@sendbird/uikit-react-native-foundation';\nimport { conditionChaining } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport useKeyboardStatus from '../../../hooks/useKeyboardStatus';\nimport useMentionSuggestion from '../../../hooks/useMentionSuggestion';\nimport { GroupChannelContexts } from '../module/moduleContext';\nimport type { GroupChannelProps } from '../types';\n\nconst GroupChannelSuggestedMentionList = ({\n  text,\n  selection,\n  inputHeight,\n  bottomInset,\n  onPressToMention,\n  mentionedUsers,\n}: GroupChannelProps['SuggestedMentionList']) => {\n  const { width: screenWidth, height: screenHeight } = useWindowDimensions();\n  const { channel } = useContext(GroupChannelContexts.Fragment);\n  const { sdk, mentionManager } = useSendbirdChat();\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n  const { topInset } = useHeaderStyle();\n  const { left, right } = useSafeAreaInsets();\n\n  const keyboard = useKeyboardStatus();\n\n  const { members, reset, searchStringRange, searchLimited } = useMentionSuggestion({\n    sdk,\n    text,\n    selection,\n    channel,\n    mentionedUsers,\n  });\n\n  const isLandscape = screenWidth > screenHeight;\n  const isShortened = isLandscape && keyboard.visible;\n  const canRenderMembers = members.length > 0;\n  const maxHeight = isShortened ? screenHeight - (topInset + inputHeight + keyboard.height) : styles.suggestion.height;\n\n  const renderLimitGuide = () => {\n    return (\n      <View style={[styles.searchLimited, { borderTopColor: colors.onBackground04 }]}>\n        <Icon icon={'info'} size={20} containerStyle={{ marginRight: 4 }} color={colors.onBackground02} />\n        <Text body3 color={colors.onBackground02}>\n          {STRINGS.GROUP_CHANNEL.MENTION_LIMITED(mentionManager.config.mentionLimit)}\n        </Text>\n      </View>\n    );\n  };\n\n  const renderMembers = () => {\n    return (\n      <View>\n        {members.map((member) => {\n          return (\n            <Pressable\n              onPress={() => {\n                onPressToMention(member, searchStringRange);\n                reset();\n              }}\n              key={member.userId}\n              style={styles.userContainer}\n            >\n              <Avatar size={28} uri={member.profileUrl} containerStyle={styles.userAvatar} />\n              <View style={styles.userInfo}>\n                <Text body2 color={colors.onBackground01} numberOfLines={1} style={styles.userNickname}>\n                  {member.nickname || STRINGS.LABELS.USER_NO_NAME}\n                </Text>\n                <Text body3 color={colors.onBackground03} numberOfLines={1} style={styles.userId}>\n                  {member.userId}\n                </Text>\n                <Divider style={{ position: 'absolute', bottom: 0 }} />\n              </View>\n            </Pressable>\n          );\n        })}\n      </View>\n    );\n  };\n\n  return (\n    <Pressable\n      onPress={reset}\n      pointerEvents={canRenderMembers ? 'auto' : 'none'}\n      style={[styles.container, { bottom: inputHeight + bottomInset }]}\n    >\n      <ScrollView\n        bounces={false}\n        keyboardDismissMode={'none'}\n        keyboardShouldPersistTaps={'always'}\n        style={[\n          styles.scrollView,\n          {\n            maxHeight,\n            backgroundColor: colors.background,\n            bottom: keyboard.bottomSpace,\n          },\n          canRenderMembers && {\n            borderTopWidth: 1,\n            borderTopColor: colors.onBackground04,\n          },\n        ]}\n        contentContainerStyle={{ paddingLeft: left, paddingRight: right }}\n      >\n        {conditionChaining([searchLimited, canRenderMembers], [renderLimitGuide(), renderMembers(), null])}\n      </ScrollView>\n    </Pressable>\n  );\n};\n\nconst styles = createStyleSheet({\n  suggestion: {\n    height: 196,\n  },\n  container: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    left: 0,\n  },\n  scrollView: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n  },\n  userContainer: {\n    paddingLeft: 16,\n    flexDirection: 'row',\n    height: 44,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  userAvatar: {\n    marginRight: 16,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    flex: 1,\n  },\n  userNickname: {\n    flexShrink: 1,\n    lineHeight: 44,\n    textAlignVertical: 'center',\n    marginRight: 6,\n  },\n  userId: {\n    lineHeight: 44,\n    textAlignVertical: 'center',\n    minWidth: 32,\n    flexShrink: 1,\n    marginRight: 16,\n  },\n  searchLimited: {\n    borderTopWidth: 1,\n    paddingHorizontal: 16,\n    height: 44,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n});\nexport default GroupChannelSuggestedMentionList;\n"],"mappings":"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"}