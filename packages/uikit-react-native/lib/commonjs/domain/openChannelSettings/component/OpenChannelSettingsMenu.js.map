{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_uikitChatHooks","_uikitReactNativeFoundation","_uikitUtils","_constants","_useContext","_moduleContext","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","OpenChannelSettingsMenu","_ref","onPressMenuModeration","onPressMenuParticipants","onPressMenuDeleteChannel","menuItemsCreator","menu","currentUser","sdk","useSendbirdChat","channel","useContext","OpenChannelSettingsContexts","Fragment","STRINGS","useLocalization","colors","useUIKitTheme","alert","useAlert","forceUpdate","useForceUpdate","handlerId","useUniqHandlerId","onChannelUpdated","eventChannel","isDifferentChannel","useChannelHandler","onChannelChanged","onChannelParticipantCountChanged","menuItems","icon","visible","isOperator","userId","UNKNOWN_USER_ID","name","OPEN_CHANNEL_SETTINGS","MENU_MODERATION","onPress","actionItem","createElement","Icon","color","onBackground01","MENU_PARTICIPANTS","actionLabel","String","participantCount","iconColor","error","MENU_DELETE_CHANNEL","title","DIALOG_CHANNEL_DELETE_CONFIRM_TITLE","buttons","text","DIALOG_CHANNEL_DELETE_CONFIRM_CANCEL","DIALOG_CHANNEL_DELETE_CONFIRM_OK","style","delete","then","View","map","MenuBar","disabled","iconBackgroundColor","_default","exports"],"sources":["OpenChannelSettingsMenu.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { View } from 'react-native';\n\nimport { useChannelHandler } from '@sendbird/uikit-chat-hooks';\nimport type { MenuBarProps } from '@sendbird/uikit-react-native-foundation';\nimport { Icon, MenuBar, useAlert, useUIKitTheme } from '@sendbird/uikit-react-native-foundation';\nimport { SendbirdBaseChannel, isDifferentChannel, useForceUpdate, useUniqHandlerId } from '@sendbird/uikit-utils';\n\nimport { UNKNOWN_USER_ID } from '../../../constants';\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport { OpenChannelSettingsContexts } from '../module/moduleContext';\nimport type { OpenChannelSettingsProps } from '../types';\n\nconst OpenChannelSettingsMenu = ({\n  onPressMenuModeration,\n  onPressMenuParticipants,\n  onPressMenuDeleteChannel,\n  menuItemsCreator = (menu) => menu,\n}: OpenChannelSettingsProps['Menu']) => {\n  const { currentUser, sdk } = useSendbirdChat();\n  const { channel } = useContext(OpenChannelSettingsContexts.Fragment);\n  const { STRINGS } = useLocalization();\n  const { colors } = useUIKitTheme();\n  const { alert } = useAlert();\n\n  const forceUpdate = useForceUpdate();\n  const handlerId = useUniqHandlerId('OpenChannelSettingsMenu');\n\n  const onChannelUpdated = (eventChannel: SendbirdBaseChannel) => {\n    if (isDifferentChannel(channel, eventChannel)) return;\n    forceUpdate();\n  };\n\n  useChannelHandler(\n    sdk,\n    handlerId,\n    {\n      onChannelChanged: onChannelUpdated,\n      onChannelParticipantCountChanged: onChannelUpdated,\n    },\n    'open',\n  );\n\n  const menuItems: MenuBarProps[] = menuItemsCreator([\n    {\n      icon: 'moderation',\n      visible: channel.isOperator(currentUser?.userId ?? UNKNOWN_USER_ID),\n      name: STRINGS.OPEN_CHANNEL_SETTINGS.MENU_MODERATION,\n      onPress: () => onPressMenuModeration(),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n    {\n      icon: 'members',\n      name: STRINGS.OPEN_CHANNEL_SETTINGS.MENU_PARTICIPANTS,\n      onPress: () => onPressMenuParticipants(),\n      actionLabel: String(channel.participantCount),\n      actionItem: <Icon icon={'chevron-right'} color={colors.onBackground01} />,\n    },\n    {\n      icon: 'leave',\n      iconColor: colors.error,\n      name: STRINGS.OPEN_CHANNEL_SETTINGS.MENU_DELETE_CHANNEL,\n      onPress: () => {\n        alert({\n          title: STRINGS.OPEN_CHANNEL_SETTINGS.DIALOG_CHANNEL_DELETE_CONFIRM_TITLE,\n          buttons: [\n            {\n              text: STRINGS.OPEN_CHANNEL_SETTINGS.DIALOG_CHANNEL_DELETE_CONFIRM_CANCEL,\n            },\n            {\n              text: STRINGS.OPEN_CHANNEL_SETTINGS.DIALOG_CHANNEL_DELETE_CONFIRM_OK,\n              style: 'destructive',\n              onPress: () => {\n                channel.delete().then(() => onPressMenuDeleteChannel());\n              },\n            },\n          ],\n        });\n      },\n    },\n  ]);\n\n  return (\n    <View>\n      {menuItems.map((menu) => {\n        return (\n          <MenuBar\n            key={menu.name}\n            onPress={menu.onPress}\n            name={menu.name}\n            disabled={menu.disabled}\n            visible={menu.visible}\n            icon={menu.icon}\n            iconColor={menu.iconColor}\n            iconBackgroundColor={menu.iconBackgroundColor}\n            actionLabel={menu.actionLabel}\n            actionItem={menu.actionItem}\n          />\n        );\n      })}\n    </View>\n  );\n};\n\nexport default OpenChannelSettingsMenu;\n"],"mappings":"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"}