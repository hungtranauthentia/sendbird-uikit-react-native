{"version":3,"names":["_react","_interopRequireWildcard","require","_uikitChatHooks","_uikitUtils","_ChannelInput","_interopRequireDefault","_constants","_useContext","_moduleContext","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","bind","target","i","arguments","length","source","apply","OpenChannelInput","_ref","inputDisabled","props","sdk","currentUser","useSendbirdChat","channel","messageToEdit","setMessageToEdit","keyboardAvoidOffset","useContext","OpenChannelContexts","Fragment","chatAvailableState","setChatAvailableState","useState","frozen","muted","disabled","updateChatAvailableState","useCallback","baseChannel","isOpenChannel","userId","UNKNOWN_USER_ID","getOpenChannelChatAvailableState","then","useEffect","handlerId","useUniqHandlerId","useChannelHandler","onChannelFrozen","onChannelUnfrozen","onUserMuted","onUserUnmuted","onOperatorUpdated","createElement","inputMuted","inputFrozen","_default","React","memo","exports"],"sources":["OpenChannelInput.tsx"],"sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from 'react';\n\nimport { useChannelHandler } from '@sendbird/uikit-chat-hooks';\nimport { SendbirdBaseChannel, getOpenChannelChatAvailableState, useUniqHandlerId } from '@sendbird/uikit-utils';\n\nimport ChannelInput from '../../../components/ChannelInput';\nimport { UNKNOWN_USER_ID } from '../../../constants';\nimport { useSendbirdChat } from '../../../hooks/useContext';\nimport { OpenChannelContexts } from '../module/moduleContext';\nimport type { OpenChannelProps } from '../types';\n\nconst OpenChannelInput = ({ inputDisabled = false, ...props }: OpenChannelProps['Input']) => {\n  const { sdk, currentUser } = useSendbirdChat();\n\n  const {\n    channel,\n    messageToEdit,\n    setMessageToEdit,\n    keyboardAvoidOffset = 0,\n  } = useContext(OpenChannelContexts.Fragment);\n\n  const [chatAvailableState, setChatAvailableState] = useState({ frozen: false, muted: false, disabled: false });\n\n  const updateChatAvailableState = useCallback(\n    (baseChannel: SendbirdBaseChannel) => {\n      if (baseChannel.isOpenChannel()) {\n        const userId = currentUser?.userId ?? UNKNOWN_USER_ID;\n        getOpenChannelChatAvailableState(baseChannel, userId).then(setChatAvailableState);\n      }\n    },\n    [currentUser?.userId],\n  );\n\n  useEffect(() => {\n    updateChatAvailableState(channel);\n  }, [channel, updateChatAvailableState]);\n\n  const handlerId = useUniqHandlerId('OpenChannelInput');\n  useChannelHandler(\n    sdk,\n    handlerId,\n    {\n      onChannelFrozen(channel) {\n        updateChatAvailableState(channel);\n      },\n      onChannelUnfrozen(channel) {\n        updateChatAvailableState(channel);\n      },\n      onUserMuted(channel) {\n        updateChatAvailableState(channel);\n      },\n      onUserUnmuted(channel) {\n        updateChatAvailableState(channel);\n      },\n      onOperatorUpdated(channel) {\n        updateChatAvailableState(channel);\n      },\n    },\n    'open',\n  );\n\n  return (\n    <ChannelInput\n      channel={channel}\n      messageToEdit={messageToEdit}\n      setMessageToEdit={setMessageToEdit}\n      keyboardAvoidOffset={keyboardAvoidOffset}\n      inputMuted={chatAvailableState.muted}\n      inputFrozen={chatAvailableState.frozen}\n      inputDisabled={chatAvailableState.disabled ? true : inputDisabled}\n      {...props}\n    />\n  );\n};\n\nexport default React.memo(OpenChannelInput);\n"],"mappings":"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"}