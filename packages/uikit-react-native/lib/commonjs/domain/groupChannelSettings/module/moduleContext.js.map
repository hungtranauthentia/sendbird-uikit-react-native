{"version":3,"names":["_react","_interopRequireWildcard","require","_uikitChatHooks","_uikitReactNativeFoundation","_uikitUtils","_ProviderLayout","_interopRequireDefault","_useContext","_SBUError","_SBUUtils","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","GroupChannelSettingsContexts","Fragment","createContext","channel","headerTitle","headerRight","onPressHeaderRight","NOOP","exports","GroupChannelSettingsContextsProvider","_ref","children","handlerId","useUniqHandlerId","forceUpdate","useForceUpdate","STRINGS","useLocalization","sdk","useSendbirdChat","fileService","usePlatformService","alert","useAlert","onChannelChanged","eventChannel","isDifferentChannel","useChannelHandler","onChannelFrozen","onChannelUnfrozen","onUserBanned","toast","useToast","openSheet","useBottomSheet","openPrompt","usePrompt","openMenu","useActionMenu","updateChannel","useCallback","params","changeChannelName","title","GROUP_CHANNEL_SETTINGS","DIALOG_CHANGE_NAME_PROMPT_TITLE","submitLabel","DIALOG_CHANGE_NAME_PROMPT_OK","placeholder","DIALOG_CHANGE_NAME_PROMPT_PLACEHOLDER","defaultValue","name","onSubmit","channelName","changeChannelImage","DIALOG_CHANGE_IMAGE_MENU_TITLE","menuItems","DIALOG_CHANGE_IMAGE_MENU_CAMERA","onPress","file","openCamera","mediaType","onOpenFailure","error","code","SBUError","CODE","ERR_PERMISSIONS_DENIED","DIALOG","ALERT_PERMISSIONS_TITLE","message","ALERT_PERMISSIONS_MESSAGE","LABELS","PERMISSION_CAMERA","PERMISSION_APP_NAME","buttons","text","ALERT_PERMISSIONS_OK","SBUUtils","openSettings","show","TOAST","OPEN_CAMERA_ERROR","coverImage","DIALOG_CHANGE_IMAGE_MENU_PHOTO_LIBRARY","files","openMediaLibrary","selectionLimit","PERMISSION_DEVICE_STORAGE","OPEN_PHOTO_LIBRARY_ERROR","sheetItems","DIALOG_CHANGE_NAME","DIALOG_CHANGE_IMAGE","createElement","Provider","value","HEADER_TITLE","HEADER_RIGHT"],"sources":["moduleContext.tsx"],"sourcesContent":["import React, { createContext, useCallback } from 'react';\n\nimport { useChannelHandler } from '@sendbird/uikit-chat-hooks';\nimport { useActionMenu, useAlert, useBottomSheet, usePrompt, useToast } from '@sendbird/uikit-react-native-foundation';\nimport {\n  NOOP,\n  SendbirdBaseChannel,\n  SendbirdGroupChannel,\n  SendbirdGroupChannelUpdateParams,\n  isDifferentChannel,\n  useForceUpdate,\n  useUniqHandlerId,\n} from '@sendbird/uikit-utils';\n\nimport ProviderLayout from '../../../components/ProviderLayout';\nimport { useLocalization, usePlatformService, useSendbirdChat } from '../../../hooks/useContext';\nimport SBUError from '../../../libs/SBUError';\nimport SBUUtils from '../../../libs/SBUUtils';\nimport type { GroupChannelSettingsContextsType, GroupChannelSettingsModule } from '../types';\n\nexport const GroupChannelSettingsContexts: GroupChannelSettingsContextsType = {\n  Fragment: createContext({\n    channel: {} as SendbirdGroupChannel,\n    headerTitle: '',\n    headerRight: '',\n    onPressHeaderRight: NOOP,\n  }),\n};\n\nexport const GroupChannelSettingsContextsProvider: GroupChannelSettingsModule['Provider'] = ({ children, channel }) => {\n  const handlerId = useUniqHandlerId('GroupChannelSettingsContextsProvider');\n  const forceUpdate = useForceUpdate();\n  const { STRINGS } = useLocalization();\n  const { sdk } = useSendbirdChat();\n  const { fileService } = usePlatformService();\n  const { alert } = useAlert();\n\n  const onChannelChanged = (eventChannel: SendbirdBaseChannel) => {\n    if (isDifferentChannel(eventChannel, channel)) return;\n    forceUpdate();\n  };\n\n  useChannelHandler(sdk, handlerId, {\n    onChannelChanged: onChannelChanged,\n    onChannelFrozen: onChannelChanged,\n    onChannelUnfrozen: onChannelChanged,\n    onUserBanned: onChannelChanged,\n  });\n\n  const toast = useToast();\n  const { openSheet } = useBottomSheet();\n  const { openPrompt } = usePrompt();\n  const { openMenu } = useActionMenu();\n\n  const updateChannel = useCallback(\n    async (params: SendbirdGroupChannelUpdateParams) => {\n      await channel.updateChannel(params);\n      forceUpdate();\n    },\n    [channel],\n  );\n\n  const changeChannelName = useCallback(() => {\n    openPrompt({\n      title: STRINGS.GROUP_CHANNEL_SETTINGS.DIALOG_CHANGE_NAME_PROMPT_TITLE,\n      submitLabel: STRINGS.GROUP_CHANNEL_SETTINGS.DIALOG_CHANGE_NAME_PROMPT_OK,\n      placeholder: STRINGS.GROUP_CHANNEL_SETTINGS.DIALOG_CHANGE_NAME_PROMPT_PLACEHOLDER,\n      defaultValue: channel.name,\n      onSubmit: (channelName) => updateChannel({ name: channelName }),\n    });\n  }, [STRINGS, updateChannel, channel.name]);\n\n  const changeChannelImage = useCallback(() => {\n    openMenu({\n      title: STRINGS.GROUP_CHANNEL_SETTINGS.DIALOG_CHANGE_IMAGE_MENU_TITLE,\n      menuItems: [\n        {\n          title: STRINGS.GROUP_CHANNEL_SETTINGS.DIALOG_CHANGE_IMAGE_MENU_CAMERA,\n          onPress: async () => {\n            const file = await fileService.openCamera({\n              mediaType: 'photo',\n              onOpenFailure: (error) => {\n                if (error.code === SBUError.CODE.ERR_PERMISSIONS_DENIED) {\n                  alert({\n                    title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n                    message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n                      STRINGS.LABELS.PERMISSION_CAMERA,\n                      STRINGS.LABELS.PERMISSION_APP_NAME,\n                    ),\n                    buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n                  });\n                } else {\n                  toast.show(STRINGS.TOAST.OPEN_CAMERA_ERROR, 'error');\n                }\n              },\n            });\n            if (!file) return;\n\n            await updateChannel({ coverImage: file });\n          },\n        },\n        {\n          title: STRINGS.GROUP_CHANNEL_SETTINGS.DIALOG_CHANGE_IMAGE_MENU_PHOTO_LIBRARY,\n          onPress: async () => {\n            const files = await fileService.openMediaLibrary({\n              selectionLimit: 1,\n              mediaType: 'photo',\n              onOpenFailure: (error) => {\n                if (error.code === SBUError.CODE.ERR_PERMISSIONS_DENIED) {\n                  alert({\n                    title: STRINGS.DIALOG.ALERT_PERMISSIONS_TITLE,\n                    message: STRINGS.DIALOG.ALERT_PERMISSIONS_MESSAGE(\n                      STRINGS.LABELS.PERMISSION_DEVICE_STORAGE,\n                      STRINGS.LABELS.PERMISSION_APP_NAME,\n                    ),\n                    buttons: [{ text: STRINGS.DIALOG.ALERT_PERMISSIONS_OK, onPress: () => SBUUtils.openSettings() }],\n                  });\n                } else {\n                  toast.show(STRINGS.TOAST.OPEN_PHOTO_LIBRARY_ERROR, 'error');\n                }\n              },\n            });\n            if (!files || !files[0]) return;\n\n            await updateChannel({ coverImage: files[0] });\n          },\n        },\n      ],\n    });\n  }, [STRINGS, updateChannel]);\n\n  const onPressHeaderRight = useCallback(() => {\n    openSheet({\n      sheetItems: [\n        { title: STRINGS.GROUP_CHANNEL_SETTINGS.DIALOG_CHANGE_NAME, onPress: changeChannelName },\n        { title: STRINGS.GROUP_CHANNEL_SETTINGS.DIALOG_CHANGE_IMAGE, onPress: changeChannelImage },\n      ],\n    });\n  }, [STRINGS, changeChannelImage, changeChannelName]);\n\n  return (\n    <ProviderLayout>\n      <GroupChannelSettingsContexts.Fragment.Provider\n        value={{\n          channel,\n          headerTitle: STRINGS.GROUP_CHANNEL_SETTINGS.HEADER_TITLE,\n          headerRight: STRINGS.GROUP_CHANNEL_SETTINGS.HEADER_RIGHT,\n          onPressHeaderRight,\n        }}\n      >\n        {children}\n      </GroupChannelSettingsContexts.Fragment.Provider>\n    </ProviderLayout>\n  );\n};\n"],"mappings":"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"}