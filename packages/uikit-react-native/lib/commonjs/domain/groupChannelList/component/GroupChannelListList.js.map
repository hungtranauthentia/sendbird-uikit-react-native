{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_reactNativeSafeAreaContext","_chat","_uikitReactNativeFoundation","_uikitUtils","_useContext","obj","__esModule","default","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","GroupChannelListList","_ref","onPressChannel","renderGroupChannelPreview","groupChannels","onLoadNext","flatListProps","menuItemCreator","PASS","toast","useToast","openMenu","useActionMenu","STRINGS","useLocalization","sdk","currentUser","useSendbirdChat","onLongPress","useFreshCallback","channel","action","myPushTriggerOption","menuItem","title","GROUP_CHANNEL_LIST","DIALOG_CHANNEL_TITLE","userId","menuItems","DIALOG_CHANNEL_NOTIFICATION","onPress","setMyPushTriggerOption","PushTriggerOption","DEFAULT","OFF","onError","show","TOAST","TURN_ON_NOTIFICATIONS_ERROR","TURN_OFF_NOTIFICATIONS_ERROR","DIALOG_CHANNEL_LEAVE","leave","then","clearCachedMessages","url","catch","NOOP","LEAVE_CHANNEL_ERROR","renderItem","_ref2","item","left","right","useSafeAreaInsets","createElement","FlatList","bounces","data","onEndReached","contentContainerStyle","paddingLeft","paddingRight","keyExtractor","getChannelUniqId","_default","exports"],"sources":["GroupChannelListList.tsx"],"sourcesContent":["import React from 'react';\nimport { FlatList, ListRenderItem } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { PushTriggerOption } from '@sendbird/chat';\nimport { useActionMenu, useToast } from '@sendbird/uikit-react-native-foundation';\nimport { NOOP, PASS, SendbirdGroupChannel, getChannelUniqId, useFreshCallback } from '@sendbird/uikit-utils';\n\nimport { useLocalization, useSendbirdChat } from '../../../hooks/useContext';\nimport type { GroupChannelListProps } from '../types';\n\nconst GroupChannelListList = ({\n  onPressChannel,\n  renderGroupChannelPreview,\n  groupChannels,\n  onLoadNext,\n  flatListProps,\n  menuItemCreator = PASS,\n}: GroupChannelListProps['List']) => {\n  const toast = useToast();\n  const { openMenu } = useActionMenu();\n  const { STRINGS } = useLocalization();\n  const { sdk, currentUser } = useSendbirdChat();\n\n  const onLongPress = useFreshCallback((channel: SendbirdGroupChannel) => {\n    const action = channel.myPushTriggerOption === 'off' ? 'on' : 'off';\n    const menuItem = menuItemCreator({\n      title: STRINGS.GROUP_CHANNEL_LIST.DIALOG_CHANNEL_TITLE(currentUser?.userId ?? '', channel),\n      menuItems: [\n        {\n          title: STRINGS.GROUP_CHANNEL_LIST.DIALOG_CHANNEL_NOTIFICATION(channel),\n          onPress: async () => {\n            if (action === 'on') {\n              await channel.setMyPushTriggerOption(PushTriggerOption.DEFAULT);\n            } else {\n              await channel.setMyPushTriggerOption(PushTriggerOption.OFF);\n            }\n          },\n          onError: () => {\n            toast.show(\n              action === 'on' ? STRINGS.TOAST.TURN_ON_NOTIFICATIONS_ERROR : STRINGS.TOAST.TURN_OFF_NOTIFICATIONS_ERROR,\n              'error',\n            );\n          },\n        },\n        {\n          title: STRINGS.GROUP_CHANNEL_LIST.DIALOG_CHANNEL_LEAVE,\n          onPress: async () => {\n            channel.leave().then(() => sdk.clearCachedMessages([channel.url]).catch(NOOP));\n          },\n          onError: () => toast.show(STRINGS.TOAST.LEAVE_CHANNEL_ERROR, 'error'),\n        },\n      ],\n    });\n\n    openMenu(menuItem);\n  });\n\n  const renderItem: ListRenderItem<SendbirdGroupChannel> = useFreshCallback(({ item }) =>\n    renderGroupChannelPreview?.({\n      channel: item,\n      onPress: () => onPressChannel(item),\n      onLongPress: () => onLongPress(item),\n    }),\n  );\n\n  const { left, right } = useSafeAreaInsets();\n  return (\n    <FlatList\n      bounces={false}\n      data={groupChannels}\n      renderItem={renderItem}\n      onEndReached={onLoadNext}\n      {...flatListProps}\n      contentContainerStyle={[flatListProps?.contentContainerStyle, { paddingLeft: left, paddingRight: right }]}\n      keyExtractor={getChannelUniqId}\n    />\n  );\n};\n\nexport default GroupChannelListList;\n"],"mappings":"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"}