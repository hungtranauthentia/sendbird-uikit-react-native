{"version":3,"names":["_react","require","_reactNative","_reactNativeSafeAreaContext","_uikitUtils","isLayoutAnimationConfigured","configureNextLayoutAnimation","event","config","LayoutAnimation","create","duration","easing","Properties","scaleY","onEnd","configureNext","showEvent","hideEvent","Platform","select","android","default","useKeyboardStatus","keyboardStatus","setKeyboardStatus","useState","visible","height","bottomSpace","bottom","bottomInset","useSafeAreaInsets","useEffect","subscriptions","Keyboard","addListener","endCoordinates","ios","nextLayoutAnimation","NOOP","forEach","it","remove","_default","exports"],"sources":["useKeyboardStatus.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Keyboard, KeyboardEvent, KeyboardEventName, LayoutAnimation, Platform } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nimport { NOOP } from '@sendbird/uikit-utils';\n\ntype KeyboardEvents = {\n  showEvent: KeyboardEventName;\n  hideEvent: KeyboardEventName;\n};\n\nlet isLayoutAnimationConfigured = false;\n\nconst configureNextLayoutAnimation = (event: KeyboardEvent) => {\n  if (isLayoutAnimationConfigured) return;\n  const config = LayoutAnimation.create(event.duration, event.easing, LayoutAnimation.Properties.scaleY);\n  isLayoutAnimationConfigured = true;\n  const onEnd = () => (isLayoutAnimationConfigured = false);\n  LayoutAnimation.configureNext(config, onEnd, onEnd);\n};\n\nconst { showEvent, hideEvent } = Platform.select<KeyboardEvents>({\n  android: { showEvent: 'keyboardDidShow', hideEvent: 'keyboardDidHide' },\n  default: { showEvent: 'keyboardWillShow', hideEvent: 'keyboardWillHide' },\n});\n\nconst useKeyboardStatus = () => {\n  const [keyboardStatus, setKeyboardStatus] = useState({ visible: false, height: 0, bottomSpace: 0 });\n  const { bottom: bottomInset } = useSafeAreaInsets();\n\n  useEffect(() => {\n    const subscriptions = [\n      Keyboard.addListener(showEvent, (event) => {\n        const height = event.endCoordinates.height;\n        const bottomSpace = Platform.select({ ios: height - bottomInset, default: 0 });\n        const nextLayoutAnimation = Platform.select({ ios: configureNextLayoutAnimation, default: NOOP });\n\n        nextLayoutAnimation(event);\n        setKeyboardStatus({ visible: true, height, bottomSpace });\n      }),\n\n      Keyboard.addListener(hideEvent, () => {\n        const height = 0;\n        const bottomSpace = Platform.select({ default: height });\n        // const nextLayoutAnimation = Platform.select({ ios: configureNextLayoutAnimation, default: NOOP });\n\n        // nextLayoutAnimation(event);\n        setKeyboardStatus({ visible: false, height, bottomSpace });\n      }),\n    ];\n    return () => {\n      subscriptions.forEach((it) => it.remove());\n    };\n  }, []);\n\n  return keyboardStatus;\n};\n\nexport default useKeyboardStatus;\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,2BAAA,GAAAF,OAAA;AAEA,IAAAG,WAAA,GAAAH,OAAA;AAOA,IAAII,2BAA2B,GAAG,KAAK;AAEvC,MAAMC,4BAA4B,GAAIC,KAAoB,IAAK;EAC7D,IAAIF,2BAA2B,EAAE;EACjC,MAAMG,MAAM,GAAGC,4BAAe,CAACC,MAAM,CAACH,KAAK,CAACI,QAAQ,EAAEJ,KAAK,CAACK,MAAM,EAAEH,4BAAe,CAACI,UAAU,CAACC,MAAM,CAAC;EACtGT,2BAA2B,GAAG,IAAI;EAClC,MAAMU,KAAK,GAAGA,CAAA,KAAOV,2BAA2B,GAAG,KAAM;EACzDI,4BAAe,CAACO,aAAa,CAACR,MAAM,EAAEO,KAAK,EAAEA,KAAK,CAAC;AACrD,CAAC;AAED,MAAM;EAAEE,SAAS;EAAEC;AAAU,CAAC,GAAGC,qBAAQ,CAACC,MAAM,CAAiB;EAC/DC,OAAO,EAAE;IAAEJ,SAAS,EAAE,iBAAiB;IAAEC,SAAS,EAAE;EAAkB,CAAC;EACvEI,OAAO,EAAE;IAAEL,SAAS,EAAE,kBAAkB;IAAEC,SAAS,EAAE;EAAmB;AAC1E,CAAC,CAAC;AAEF,MAAMK,iBAAiB,GAAGA,CAAA,KAAM;EAC9B,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAG,IAAAC,eAAQ,EAAC;IAAEC,OAAO,EAAE,KAAK;IAAEC,MAAM,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAE,CAAC,CAAC;EACnG,MAAM;IAAEC,MAAM,EAAEC;EAAY,CAAC,GAAG,IAAAC,6CAAiB,GAAE;EAEnD,IAAAC,gBAAS,EAAC,MAAM;IACd,MAAMC,aAAa,GAAG,CACpBC,qBAAQ,CAACC,WAAW,CAACnB,SAAS,EAAGV,KAAK,IAAK;MACzC,MAAMqB,MAAM,GAAGrB,KAAK,CAAC8B,cAAc,CAACT,MAAM;MAC1C,MAAMC,WAAW,GAAGV,qBAAQ,CAACC,MAAM,CAAC;QAAEkB,GAAG,EAAEV,MAAM,GAAGG,WAAW;QAAET,OAAO,EAAE;MAAE,CAAC,CAAC;MAC9E,MAAMiB,mBAAmB,GAAGpB,qBAAQ,CAACC,MAAM,CAAC;QAAEkB,GAAG,EAAEhC,4BAA4B;QAAEgB,OAAO,EAAEkB;MAAK,CAAC,CAAC;MAEjGD,mBAAmB,CAAChC,KAAK,CAAC;MAC1BkB,iBAAiB,CAAC;QAAEE,OAAO,EAAE,IAAI;QAAEC,MAAM;QAAEC;MAAY,CAAC,CAAC;IAC3D,CAAC,CAAC,EAEFM,qBAAQ,CAACC,WAAW,CAAClB,SAAS,EAAE,MAAM;MACpC,MAAMU,MAAM,GAAG,CAAC;MAChB,MAAMC,WAAW,GAAGV,qBAAQ,CAACC,MAAM,CAAC;QAAEE,OAAO,EAAEM;MAAO,CAAC,CAAC;MACxD;;MAEA;MACAH,iBAAiB,CAAC;QAAEE,OAAO,EAAE,KAAK;QAAEC,MAAM;QAAEC;MAAY,CAAC,CAAC;IAC5D,CAAC,CAAC,CACH;IACD,OAAO,MAAM;MACXK,aAAa,CAACO,OAAO,CAAEC,EAAE,IAAKA,EAAE,CAACC,MAAM,EAAE,CAAC;IAC5C,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOnB,cAAc;AACvB,CAAC;AAAC,IAAAoB,QAAA,GAEarB,iBAAiB;AAAAsB,OAAA,CAAAvB,OAAA,GAAAsB,QAAA"}